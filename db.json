{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/yilia/source/main.0cf68a.css","path":"main.0cf68a.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/mobile.992cbe.js","path":"mobile.992cbe.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/slider.e37972.js","path":"slider.e37972.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.0cf68a.js","path":"main.0cf68a.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/avatar.jpeg","path":"img/avatar.jpeg","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/favicon.ico","path":"img/favicon.ico","modified":0,"renderable":1},{"_id":"themes/yilia/source/clipboard_use.js","path":"clipboard_use.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia.md","hash":"cfdbe6c4fecf9b7369f6b1c3841dae11cba0d8e5","modified":1646114554926},{"_id":"source/.DS_Store","hash":"27aa8fc6a4fd4146edd797dfcbb167a00bbf8664","modified":1645606582481},{"_id":"source/_posts/Hello-ShouRou.md","hash":"da1de7ff70f849a0ed7d7bfe1b8573f9d382896b","modified":1646100693699},{"_id":"source/_posts/.DS_Store","hash":"cd9d306e8c3a737a17abac314f9590266dd31b33","modified":1646063488165},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1645500764238},{"_id":"themes/yilia/source-src/js/report.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1645515164044},{"_id":"themes/yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1645500764232},{"_id":"themes/yilia/.DS_Store","hash":"164597c923a12a30855cc342aa8de43711dc6382","modified":1646064072924},{"_id":"themes/yilia/_config.yml","hash":"64ca67d20f9c1b10bf179d90511cdae7f0a4f028","modified":1646100693702},{"_id":"themes/yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1645500764233},{"_id":"themes/yilia/package.json","hash":"ee6aa61f1cb89fd549e3e087c0232207a9c9ee30","modified":1646100701107},{"_id":"themes/yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1645500764233},{"_id":"themes/yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1645500764233},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1645500764238},{"_id":"themes/yilia/.gitignore","hash":"9c4b7d27a1e3e5efa0c8ed143a032a85d586b03b","modified":1645500764233},{"_id":"themes/yilia/layout/layout.ejs","hash":"7e6fa2d148a738a13e4d7306f289b70718f35153","modified":1646113257919},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1645500764239},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1645500764238},{"_id":"themes/yilia/layout/index.ejs","hash":"ec498c6c0606acde997ce195dad97b267418d980","modified":1646100693715},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1645500764239},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1645500764239},{"_id":"themes/yilia/languages/no.yml","hash":"ddf2035e920a5ecb9076138c184257d9f51896a7","modified":1646100693703},{"_id":"themes/yilia/languages/nl.yml","hash":"3d82ec703d0b3287739d7cb4750a715ae83bfcb3","modified":1646100693703},{"_id":"themes/yilia/README.md","hash":"1bf755806af9d8874bd22e1abbdaaa24328ef4dc","modified":1645500764233},{"_id":"themes/yilia/languages/default.yml","hash":"f26a34a7983d4bc17c65c7f0f14da598e62ce66d","modified":1646100693702},{"_id":"themes/yilia/languages/ru.yml","hash":"2a476b4c6e04900914c81378941640ac5d58a1f0","modified":1646100693703},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"b057f389c6713010f97d461e48ec959b0b6f3b44","modified":1646100693704},{"_id":"themes/yilia/languages/fr.yml","hash":"b4be1c1592a72012e48df2b3ec41cc9685573e50","modified":1646100693702},{"_id":"themes/yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1645500764233},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"f5f0ca88185da7a8457760d84bf221781473bd7c","modified":1646100693704},{"_id":"themes/yilia/webpack.config.js","hash":"da7657347109ddb4ab8602b219778117254677fe","modified":1646100701134},{"_id":"themes/yilia/source/.DS_Store","hash":"044653cb09ae9d82c44ab9365c07168edcba5feb","modified":1645623966455},{"_id":"themes/yilia/source/main.0cf68a.css","hash":"728e3ba7029bd9a2ea584e62ba7f67aa98914302","modified":1646114217311},{"_id":"themes/yilia/source/slider.e37972.js","hash":"ce5eac88301fe4f2fce0fb6203adfd58eb8313ac","modified":1646100701134},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"edc0154b30a4127acda10297bec6aacf754b4ac4","modified":1646100693705},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a4eacc2bc1278095a0ef99f904b0634c78f980eb","modified":1646100693705},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"751e5deab5365348be5243688b419c82d337ab9a","modified":1646100693706},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"2ae861022149afa279e3f70b14a5bd01be987be7","modified":1646100693705},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"c70f367f54064a441e574c913f5e0ea121d0f899","modified":1646100693705},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"155327c23607f69989b58845f24d842a54e504b8","modified":1646100693706},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"1d5ff56e241efdd96901e00efc6c70eaf63e6be8","modified":1646100693708},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"ccec1fc70f021cb50ac85b524e7949878ab93a18","modified":1646100693709},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"84847cf1aca5ea1dee3707754edf010b94eaac8e","modified":1646100693707},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"236f8a377b2e4e35754319c3029bcd4a4115431d","modified":1645500764235},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"11550a418921d330e6553be0569a94ab5a217967","modified":1646100693709},{"_id":"themes/yilia/source-src/css.ejs","hash":"cf7eab48d626433120d1ef9697f719a359817018","modified":1646100701108},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"23fc3a6b038db27f1682c92a5b9f2970e31010bd","modified":1646100693708},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"b69855e07b65117769adc515cb64b803932068c9","modified":1646100693708},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"0ffcb251b79e8a920c9b4cb6bb7a96a808816165","modified":1646100693714},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"1ccc627d7697e68fddc367c73ac09920457e5b35","modified":1646100693707},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"cc1c39903aed0a0601d104238d2bbd13ad2a36f3","modified":1646100693715},{"_id":"themes/yilia/source-src/script.ejs","hash":"28abac2426761d7e715b38aadd86ce6549c8ae77","modified":1646100701125},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1645500764247},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"75767c904d483d9b93469afb6b92bb6bdface639","modified":1646100701128},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1645500764248},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1645500764247},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1645500764248},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1645500764248},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1645500764248},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1645500764248},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1645500764248},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"ce227b6f5a9af194fd5d455200630f32c05e151f","modified":1646100701109},{"_id":"themes/yilia/source/img/avatar.jpeg","hash":"c6575ca36dc695bf8330d6253ebd38e9761a9462","modified":1645526272735},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"8f82fe898ba1c1bd00c24a7d8270feddc7eba3bc","modified":1646100701110},{"_id":"themes/yilia/source/img/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1645583847597},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"29ba600e98ed55f7af4ade8038272c84cba21188","modified":1646100701108},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"d6a7dd88404b383b5b94e4c7ec675a410c41f3cc","modified":1646100701109},{"_id":"themes/yilia/source-src/css/article.scss","hash":"55d082fec4c6bb341725567acaa29ce37d50320a","modified":1646100701110},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"f7388f5c11370ef462f7cb913d8f72edf24ecaf9","modified":1646100701110},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1645500764242},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"1577a2336b3ad122f49f60dff2bc1a97d4e7b18b","modified":1646100701110},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"b85f344f2c66d43d7094746e0a9ccb21d0534201","modified":1646100701111},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"07244c188f58ecfb90bb7c047b8cde977f1dc4b4","modified":1646100701111},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7ca837a4cc34db1c35f01baec85eb10ccc64ea86","modified":1646100701116},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"96d7eb1d42c06fdcccb8ef969f6ecd30c3194903","modified":1646100701113},{"_id":"themes/yilia/source-src/css/left.scss","hash":"80dac621e43581a254d0152d5df901e4d0b01c09","modified":1646100701117},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"40e5aa5056dc0b3b9f51c5b387370b612e265d4e","modified":1646100701116},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"f53ea8270752b5919ec5d79224d22af91f2eda12","modified":1646100701116},{"_id":"themes/yilia/source-src/css/main.scss","hash":"9eba1fcf4805256697528fcf3b767cf6dd8d0591","modified":1646100701117},{"_id":"themes/yilia/source-src/css/page.scss","hash":"244c4d75c375978ff9edb74acc68825e63c6b235","modified":1646100701119},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"d995dcd483a250fe61b426158afb61bf8923a927","modified":1646100701119},{"_id":"themes/yilia/source-src/css/share.scss","hash":"9d6f6884f40c191882e56a1e1e1192400944a515","modified":1646100701120},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"2495f7e4e3b055735c531f944b5f40a118a351ec","modified":1646100701119},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"a557a9ed244c82b8b71e9da9de3339d92783499f","modified":1646100701119},{"_id":"themes/yilia/source-src/css/social.scss","hash":"a10a038a1dac8953cb4ffc7e04272eff9fac54e4","modified":1646100701120},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"b81cedbe31accca82e597801186911a7b5e6841c","modified":1646100701121},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"19f10fd2f0c3377aa4b165b3c2291ecf86dd9351","modified":1646100701118},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"2924fb6f77c4a9973cd928c2c7db0acb848ed483","modified":1646100701120},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"915c93edd67c5326695cc7dc84b14c5f154dbcc8","modified":1646100701120},{"_id":"themes/yilia/source-src/js/Q.js","hash":"e56d9710afa79b31ca6b9fbd845f6d1895f5214b","modified":1646100701122},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"399744e98e7c67939ed9b23c2670d8baad044eda","modified":1646100701120},{"_id":"themes/yilia/source-src/js/browser.js","hash":"4dc04845cf27f350922b63f1813a9c82e6e33b05","modified":1646100701123},{"_id":"themes/yilia/source-src/js/anm.js","hash":"d18f6276a352b871390a4112d479b9e58b8cdbbe","modified":1646100701122},{"_id":"themes/yilia/source-src/js/main.js","hash":"fe98bf90ce61658fe16ae057f8b6a512a845af3b","modified":1646100701123},{"_id":"themes/yilia/source-src/js/aside.js","hash":"5e4c3c3d61f1e1ce2f09688d3aff25fadc851fff","modified":1646100701122},{"_id":"themes/yilia/source-src/js/fix.js","hash":"67b8819abb886c9d066fb3b0624ca15e06f63fe0","modified":1646100701123},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"461c08ffcbc724d74ec7e0ff38e171eefe0f89fd","modified":1646100701124},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"f6b4c4eaafb5ac386273354b5f64a26139b7a3b0","modified":1646100693711},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"086c8a88fd3bcae7ec13258df58e25d6354af2fa","modified":1646100693710},{"_id":"themes/yilia/source-src/js/share.js","hash":"d4ccff8266c37363b3904226f5d035b7db882c61","modified":1646100701124},{"_id":"themes/yilia/source-src/js/slider.js","hash":"0beaa112657ad57c723d9e773d5b79de60c1dd74","modified":1646100701125},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"c699cf3c89409ec8f044258e0715a470861b5d5d","modified":1646100701125},{"_id":"themes/yilia/layout/_partial/post/gitment.ejs","hash":"25655016773aa5d0774c56115ae1736a9fc9ea1f","modified":1646100693711},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"d4a460a35e2112d0c7414fd5e19b3a16093f1caf","modified":1646100693712},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2c4e4ca36c9bb4318506c38aca7127f1f44d827f","modified":1646100693712},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"b6a97043f9ec37e571aacacfedcda1d4d75e3c7c","modified":1646100693711},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"aae96de18d48cd3b9b7bf6fed0100e15b53cca97","modified":1646100693710},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"fb022502c741b4a26bad6b2ad37245c10ede3f1a","modified":1646100693713},{"_id":"themes/yilia/source-src/js/util.js","hash":"3bcdeb95072b85600874424e6929e3e22cfddaa0","modified":1646100701125},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"e777cbf959b11c4dfda649c562799899b90ab4a3","modified":1646100693709},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"f464a06d565ec2b207857ca88429648be5b9a5ad","modified":1646100693712},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"6e75bdaa46de83094ba0873099c6e7d656a22453","modified":1646100701113},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1645500764241},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1645500764242},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"1834c3ed8560716e63bb3a50be94cac87fbbeaf3","modified":1646100701111},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"262ffcd88775080b7f511db37f58d2bcb1b2bfc7","modified":1646100701111},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"75767c904d483d9b93469afb6b92bb6bdface639","modified":1646100701114},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1645500764243},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"91db061c9c17628291a005e5bd4936cf9d35a6c4","modified":1646100701112},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1645500764242},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1645500764243},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"398a49913b4a47d928103562b1ce94520be4026a","modified":1646100701112},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1645500764243},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"e98ec0b3b56f14d1d79af99ceb42727719a584f3","modified":1646100693714},{"_id":"themes/yilia/source/main.0cf68a.js","hash":"283ae27ea37ac3e0e45b2e05c2482a4c594b9c25","modified":1646100701133},{"_id":"themes/yilia/source/mobile.992cbe.js","hash":"1801ef448909ea23c0a48e9d63b80d0cfd5534ce","modified":1646100701133},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/check google search.png","hash":"a283f4c31f86a0f29ffc685c572431a00e5199c7","modified":1645604738508},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/typora setting.png","hash":"4bbaf27946caa82912470a69221a7f494b985bf9","modified":1645586028925},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/google console.png","hash":"240520671ae14a4db700b002e99ee276bf1fe650","modified":1645605064121},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/github page.png","hash":"5262aa8e506f60a57b7ddc69a76c860bca21ffce","modified":1645583716321},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/node js install.png","hash":"49b580f0049a4e224ea17cbb30a33dc34e8acc3a","modified":1645586237414},{"_id":"public/content.json","hash":"b2ebdc3e458a33e4ed9f1dc40a32d25870011691","modified":1646387851557},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/index.html","hash":"9da5cf5750338ea6c0508c6a01992483856a9f93","modified":1646387851557},{"_id":"public/2022/02/22/Hello-ShouRou/index.html","hash":"b6ea18f2d1f8294e45b270be4d7c86b60e988fa7","modified":1646387851557},{"_id":"public/index.html","hash":"53534c9fab220859cb0a19a0a274c3d98f9cf70d","modified":1646387851557},{"_id":"public/archives/2022/index.html","hash":"2c5003dec17e299d3f67d904f396c37e81885a8a","modified":1646387851557},{"_id":"public/archives/2022/02/index.html","hash":"962399ae3c4a13d4d135bf94e764767313db214c","modified":1646387851557},{"_id":"public/tags/First-Blog/index.html","hash":"1b7ba6aa879eb7c36c2e002594978267a7cfe018","modified":1646387851557},{"_id":"public/tags/learn/index.html","hash":"0518c63ec7dbb47c43c0c10b0f3e87fed559fe97","modified":1646387851557},{"_id":"public/archives/index.html","hash":"7499a38fce33e668a887d3c7affce1f4652f2188","modified":1646387851557},{"_id":"public/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1645606169338},{"_id":"public/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1645606169338},{"_id":"public/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1645606169338},{"_id":"public/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1645606169338},{"_id":"public/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1645606169338},{"_id":"public/img/avatar.jpeg","hash":"c6575ca36dc695bf8330d6253ebd38e9761a9462","modified":1645606169338},{"_id":"public/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1645606169338},{"_id":"public/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1645606169338},{"_id":"public/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1645606169338},{"_id":"public/fonts/iconfont.45d7ee.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1645606169338},{"_id":"public/main.0cf68a.css","hash":"12785e35cb6b22b41cbab2e560db4f8d2e70a90e","modified":1646114223475},{"_id":"public/mobile.992cbe.js","hash":"01b35e71e37aa2849664eb5daf26daede2278398","modified":1645606169338},{"_id":"public/slider.e37972.js","hash":"6dec4e220c89049037eebc44404abd8455d22ad7","modified":1645606169338},{"_id":"public/main.0cf68a.js","hash":"993fadeb5f6d296e9d997a49ee20dc97333ceab7","modified":1645606169338},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/check google search.png","hash":"a283f4c31f86a0f29ffc685c572431a00e5199c7","modified":1645606169338},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/typora setting.png","hash":"4bbaf27946caa82912470a69221a7f494b985bf9","modified":1645606169338},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/google console.png","hash":"240520671ae14a4db700b002e99ee276bf1fe650","modified":1645606169338},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/github page.png","hash":"5262aa8e506f60a57b7ddc69a76c860bca21ffce","modified":1645606169338},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/node js install.png","hash":"49b580f0049a4e224ea17cbb30a33dc34e8acc3a","modified":1645606169338},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/google console varification.png","hash":"54b854a7bc2152a565ae61ab6f513fe8fad31139","modified":1645606581799},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/google console varification.png","hash":"54b854a7bc2152a565ae61ab6f513fe8fad31139","modified":1645606769469},{"_id":"public/baidusitemap.xml","hash":"851d72ca6a8ced8387244430a65fc97cc1cb482e","modified":1646387851557},{"_id":"public/sitemap.xml","hash":"b522a006796327a5e3bd1767f3adab254fa04ca5","modified":1646387851557},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/can't fetch sitemap.png","hash":"f33cf775460666ebefa5e8aa56b768a1ce4d1af4","modified":1645608343832},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/can't fetch sitemap.png","hash":"f33cf775460666ebefa5e8aa56b768a1ce4d1af4","modified":1645608398487},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console.png","hash":"1b21c2b62d1217fc07402a2b5a93ade16b9d06a9","modified":1645608661819},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console.png","hash":"1b21c2b62d1217fc07402a2b5a93ade16b9d06a9","modified":1645608884560},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console sitemap.png","hash":"8ecba7e34a53e980586ae8ab154511d951867aee","modified":1645610381532},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console varification.png","hash":"09c2e3d1f3b52807bf6dd97d8ec42f7cfd1fe1c7","modified":1645609658080},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console sitemap.png","hash":"8ecba7e34a53e980586ae8ab154511d951867aee","modified":1645610509067},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console varification.png","hash":"09c2e3d1f3b52807bf6dd97d8ec42f7cfd1fe1c7","modified":1645610509067},{"_id":"themes/yilia/source/img/favicon.ico","hash":"7e55bf11b25279bbe79d6f9790374a4427e92eb6","modified":1645623605171},{"_id":"public/img/favicon.ico","hash":"7e55bf11b25279bbe79d6f9790374a4427e92eb6","modified":1645624387677},{"_id":"themes/yilia/source/clipboard_use.js","hash":"c1ee5f79139d5b614c10441e9bc748253f5286ad","modified":1646100701126},{"_id":"public/clipboard_use.js","hash":"3ee101befd45bb0b03c6355c11326cb5c16bbd75","modified":1645631644817},{"_id":"themes/yilia/source/js/clipboard_use.js","hash":"dfe635310ae5ecf0586ec457a6ca1e65592410c6","modified":1645629646513},{"_id":"public/js/clipboard_use.js","hash":"dfe635310ae5ecf0586ec457a6ca1e65592410c6","modified":1645630053895},{"_id":"public/tags/learn-hexo/index.html","hash":"0ecec9a61db58ce96bf4251ddfe47bde5325daa5","modified":1645633021297},{"_id":"public/tags/hexo/index.html","hash":"4f438ad85fd0be1c10801ab0ad094da59a307864","modified":1646387851557},{"_id":"public/tags/git/index.html","hash":"3e6438dd3dc47fb8337850241f789305827bc6a1","modified":1646387851557},{"_id":"themes/yilia/layout/_partial/post/declare.ejs","hash":"16c53bc4975236a17201d622e087222a7db56313","modified":1646100693710},{"_id":"themes/yilia/source/assets/favicon.ico","hash":"7e55bf11b25279bbe79d6f9790374a4427e92eb6","modified":1645711329870},{"_id":"public/assets/favicon.ico","hash":"7e55bf11b25279bbe79d6f9790374a4427e92eb6","modified":1645711374973},{"_id":"source/_posts/install-d2l-moudule-on-apple-m1-chip-for-deep-learning.md","hash":"1ae969ec06c74a1f7b36bcfae9bc7542550010ce","modified":1646373736090},{"_id":"public/2022/02/28/install-d2l-moudule-on-apple-m1-chip-for-deep-learning/index.html","hash":"4455b4e535347a253c6b0105b4a076d780220362","modified":1646387851557},{"_id":"public/tags/m1-mac/index.html","hash":"1dbee29ceb3ba1ceefb12929461943928abe45e4","modified":1646387851557},{"_id":"public/tags/deep-learning/index.html","hash":"840b85db1e0a5d34aac16b16928104e48f171df2","modified":1646387851557},{"_id":"public/tags/d2l/index.html","hash":"5cacbbffbfc10f4d31bdb85492c645db97b07c0c","modified":1646387851557},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect 3.png","hash":"091b41b10a1cc1c91cb81f48b062d32bc57b79d5","modified":1646104023851},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect.png","hash":"90618421c6cab7c23ef65da92bc0c48090bc93ea","modified":1646103898160},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect 2.png","hash":"acaf3254cd16099f517b0f1e1ab58aa89552e6cd","modified":1646103973056},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect 3.png","hash":"091b41b10a1cc1c91cb81f48b062d32bc57b79d5","modified":1646104454099},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect.png","hash":"90618421c6cab7c23ef65da92bc0c48090bc93ea","modified":1646104454099},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect 2.png","hash":"acaf3254cd16099f517b0f1e1ab58aa89552e6cd","modified":1646104454099},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/bing search console success.png","hash":"03acd2a59a1e8af3276f36039a235c44afa5a218","modified":1646112073953},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/bing sitemap.png","hash":"f8ca2e88f4c6e1969395b7617075010a4a697565","modified":1646112035848},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/being sitemap connect google.png","hash":"2f7067940f7d336d1c87987c26562bb87b4f90bf","modified":1646112052665},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/bing sitemap.png","hash":"f8ca2e88f4c6e1969395b7617075010a4a697565","modified":1646112180959},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/bing search console success.png","hash":"03acd2a59a1e8af3276f36039a235c44afa5a218","modified":1646112180959},{"_id":"public/2022/02/22/Build-and-configure-a-personal-blog-via-hexo-and-yilia/being sitemap connect google.png","hash":"2f7067940f7d336d1c87987c26562bb87b4f90bf","modified":1646112180959},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR.md","hash":"93ad7925bf8b95ce8b4a079f894d0e76443640fc","modified":1646388407614},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/Cross entropy loss function.png","hash":"f39593d083f6b6a97eb20780a4be745e19dd0452","modified":1646381734439},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/~$source ppt.pptx","hash":"72dc4e1ae8c5c25e720f369d5bdd3ed4be576895","modified":1646379928859},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/accuracy curve applying label smoothing.png","hash":"4aeeb4d6d7711a4396e2149e4d1f8130d183edcc","modified":1646387499670},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/accuracy curve compare label smoothing with hard label.png","hash":"cdae6eacdd69d900057bf680a2d321e58dda17d9","modified":1646386974486},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/Label smoothing feature norm.png","hash":"47841e9b48ef8aaa61bdedf70b593a1d563840ca","modified":1646385154161},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/leave class code.png","hash":"224786316ca7dc910a29d3c5acb42f755f3bc662","modified":1646379406357},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/soft label.png","hash":"2d6357cd03c4b4149f5191e91d781cc5a554a897","modified":1646379423475},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/hard label.png","hash":"8e83c8d43703867f9faf7a1db317fcb040a24045","modified":1646379415607},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/source ppt.pptx","hash":"97679971cce2f5f2cc7dde45f7b7c7b873cb0a25","modified":1646387472915},{"_id":"public/archives/2022/03/index.html","hash":"ad69323415db0b2d0466f39a957ddcb2a36f420a","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/index.html","hash":"5fddbf0aefe6a4d9c5d2c9116657168ed79e75fa","modified":1646388413947},{"_id":"public/tags/deep-learning-tricks/index.html","hash":"3404fec7a74b7b569aedaa4ee9b045498bc8adeb","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/Cross entropy loss function.png","hash":"f39593d083f6b6a97eb20780a4be745e19dd0452","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/~$source ppt.pptx","hash":"72dc4e1ae8c5c25e720f369d5bdd3ed4be576895","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/accuracy curve applying label smoothing.png","hash":"4aeeb4d6d7711a4396e2149e4d1f8130d183edcc","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/accuracy curve compare label smoothing with hard label.png","hash":"cdae6eacdd69d900057bf680a2d321e58dda17d9","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/leave class code.png","hash":"224786316ca7dc910a29d3c5acb42f755f3bc662","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/Label smoothing feature norm.png","hash":"47841e9b48ef8aaa61bdedf70b593a1d563840ca","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/hard label.png","hash":"8e83c8d43703867f9faf7a1db317fcb040a24045","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/soft label.png","hash":"2d6357cd03c4b4149f5191e91d781cc5a554a897","modified":1646387851557},{"_id":"public/2022/03/04/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/source ppt.pptx","hash":"97679971cce2f5f2cc7dde45f7b7c7b873cb0a25","modified":1646387851557}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Hello ShouRou","date":"2022-02-22T02:44:29.000Z","_content":"\n### Welcome\n\nThis is the first blog on ShouRou. The name of the website is extracted from the cute nikenames between a pair of good-looking lovers.\n\nShoushou the dumb and his girl Rourou the clever, cute and sexy will start up magnifisent careers of each own and be together as a happy couple.\n\n","source":"_posts/Hello-ShouRou.md","raw":"---\ntitle: Hello ShouRou\ndate: 2022-02-22 10:44:29\ntags: First Blog\n---\n\n### Welcome\n\nThis is the first blog on ShouRou. The name of the website is extracted from the cute nikenames between a pair of good-looking lovers.\n\nShoushou the dumb and his girl Rourou the clever, cute and sexy will start up magnifisent careers of each own and be together as a happy couple.\n\n","slug":"Hello-ShouRou","published":1,"updated":"2022-03-01T02:11:33.699Z","_id":"ckzzbfasz0000miybbz5ldmby","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"Welcome\"><a href=\"#Welcome\" class=\"headerlink\" title=\"Welcome\"></a>Welcome</h3><p>This is the first blog on ShouRou. The name of the website is extracted from the cute nikenames between a pair of good-looking lovers.</p>\n<p>Shoushou the dumb and his girl Rourou the clever, cute and sexy will start up magnifisent careers of each own and be together as a happy couple.</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Welcome\"><a href=\"#Welcome\" class=\"headerlink\" title=\"Welcome\"></a>Welcome</h3><p>This is the first blog on ShouRou. The name of the website is extracted from the cute nikenames between a pair of good-looking lovers.</p>\n<p>Shoushou the dumb and his girl Rourou the clever, cute and sexy will start up magnifisent careers of each own and be together as a happy couple.</p>\n"},{"title":"Build and configure a personal blog via hexo and yilia on github","date":"2022-02-22T08:15:03.000Z","toc":true,"declare":true,"_content":"> Keep updating...\n\n\n> Technical blog has a hundred benefits and no harm\n>\n> This blog records the process of building and customizing this personal blog from 0 to 1\n\n<!-- more -->\n\n## Preliminary\n\n### Why personal blog\n\n> Keeping a technical blog can be **a great way of documenting your growth as a developer**. This documentation can be particularly useful on a professional level. All software companies want to hire smart, thoughtful, communicative developers who can easily assimilate into a team, and who are ready to both teach and learn\n\n### Static vs dynamic blog\n\nthere are 2 types of mainstream personal blog: static and dynamic.\n\nStatic is recommended considering its simplicity, 0 maintenance and 0 safety worry. \n\n|              | Static blog                                                  | Dynamic blog                                                 |\n| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |\n| Price        | low, 0 cost when the traffic is relatively low               | High, server is needed, cloud server of  high performance is usually very expensive. |\n| Features     | Limited, only third-party services can be used to complete certain \"dynamic\" functions, such as comments | Rich, in WordPress for example, basically any kind of plugins can be found. Featuers such as auto-resizing, media players, multiple authors, scheduled posts, user analysis can be easily realize. |\n| Speed        | Fast                                                         | Slow                                                         |\n| Maintainance | 0                                                            | Need to care about the sever                                 |\n| Markdown     | Supported yet it's the only choice                           | not supported                                                |\n| Geeky        | YES                                                          | No                                                           |\n\nAnd I also chose static because I'm geeky (poor of money) and results-driven (lazy to spend time on maintaining).\n\n## Build a static blog via hexo\n\n### Set environment\n\n1.check machine information: macOS on M1 MacBook\n\n2.Install Nodejs, including node and npm\n\nopen  https://nodejs.org/en/download/ and click download\n\n<img src=\"node js install.png\" alt=\"node js install\" style=\"zoom:50%;\" />\n\n3.Install Git\n\nAready installed\n\n4.Open terminal, check node, npm and git versions\n\n```shell\n$ npm -v\n$ node -v\n$ git --version\n8.3.1\nv16.14.0\ngit version 2.32.0 (Apple Git-132)\n```\n\n### Initialize blog\n\n1.install hexo via npm\n\n```shell\n$ sudo npm install -g hexo-cli\n$ hexo -v\nINFO  Validating config\nhexo: 6.0.0\nhexo-cli: 4.3.0\nos: darwin 21.2.0 12.1\n\nnode: 16.14.0\nv8: 9.4.146.24-node.20\nuv: 1.43.0\nzlib: 1.2.11\nbrotli: 1.0.9\nares: 1.18.1\nmodules: 93\nnghttp2: 1.45.1\nnapi: 8\nllhttp: 6.0.4\nopenssl: 1.1.1m+quic\ncldr: 40.0\nicu: 70.1\ntz: 2021a3\nunicode: 14.0\nngtcp2: 0.1.0-DEV\nnghttp3: 0.1.0-DEV\n```\n\n2.create a new folder in terminal and initialize the blog\n\n```shell\n$ cd ~/Documents/\n$ makedir self_blog\n$ cd self_blog/\n$ hexo init\nINFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitINFO  Install dependencies⸨#########⠂⠂⠂⠂⠂⠂⠂⠂⠂⸩ ⠹ idealTree:hexo-front-matter: timing idealTree:node_modules/hexo-front-matter Completed in 212msINFO  Start blogging with Hexo! \n```\n\n3.view the blog on localhost, s for start\n\n```shell\n$ hexo s\nINFO  Validating config\nINFO  Start processing\nINFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.\n```\n\n\n### Write first blog\n\n1.write a new blog, n for new\n\n```shell\n$ hexo n 'Hello ShouRou'\nINFO  Validating config\nINFO  Created: ~/Documents/self_blog/source/_posts/Hello-ShouRou.md\n```\n\nthe blog can be written on any editor, Typora in use.\n\n```shell\nopen ~/Documents/self_blog/source/_posts/Hello-ShouRou.md\n```\n\n2.clean cache(not necessary)\n\n```shell\n$ hexo clean\n```\n\n3.generate the blog, g for generate\n\n```shell\n$ hexo g\nINFO  Validating config\nINFO  Start processing\nINFO  Files loaded in 61 ms\n(node:10719) Warning: Accessing non-existent property 'lineno' of module exports inside circular dependency\n(Use `node --trace-warnings ...` to show where the warning was created)\n(node:10719) Warning: Accessing non-existent property 'column' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'filename' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'lineno' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'column' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'filename' of module exports inside circular dependency\nINFO  Generated: archives/2022/index.html\nINFO  Generated: archives/index.html\nINFO  Generated: js/script.js\nINFO  Generated: fancybox/jquery.fancybox.min.css\nINFO  Generated: index.html\nINFO  Generated: css/style.css\nINFO  Generated: css/fonts/fontawesome-webfont.woff2\nINFO  Generated: fancybox/jquery.fancybox.min.js\nINFO  Generated: js/jquery-3.4.1.min.js\nINFO  Generated: archives/2022/02/index.html\nINFO  Generated: css/fonts/FontAwesome.otf\nINFO  Generated: css/fonts/fontawesome-webfont.woff\nINFO  Generated: css/fonts/fontawesome-webfont.eot\nINFO  Generated: css/fonts/fontawesome-webfont.ttf\nINFO  Generated: css/images/banner.jpg\nINFO  Generated: 2022/02/22/hello-world/index.html\nINFO  Generated: css/fonts/fontawesome-webfont.svg\nINFO  Generated: 2022/02/22/Hello-ShouRou/index.html\nINFO  18 files generated in 161 ms\n```\n\n### Deploy to remote (GitHub)\n\n1.Create a new repository with the name of $username.github.io\n\n<img src=\"github page.png\" alt=\"github page\" style=\"zoom:50%;\" />\n\nuse default setting\n\n2.open terminal, install plugin of deploying to git\n\n```shell\n$ npm install --save hexo-deployer-git\n```\n\n3.Open the `_config.yml` file in the blog `root` directory, add these lines afterwards\n\n```yml\ndeploy:\n type: git\n repo: git@github.com:DaydreamAtNight/DaydreamAtNight.github.io.git\n branch: master\n```\n\n4.Go to the blog `root`, deploy the blog to remote, d for deploy\n\n```shell\n$ hexo clean\n$ hexo g\n$ hexo d\n```\n\nOpen https://daydreamatnight.github.io/ to see if it works\n\n## Change theme to yilia\n\ndefault theme of hexo is called landscape and it's not beautiful enough to most of the people. Yilia is a fast, simple, elegant and popular theme. Thought it has not been updated since Nov 2017, it still a good choice for fresh bloggers.\n\n### Download and deploy yilia\n\n1.go to the blog `root`\n\n``` shell\n$ git clone https://github.com/litten/hexo-theme-yilia theme/yilia\n```\n\n2.eidt the `_config.yml` file, add\n\n```yml\ntheme: yilia\n```\n\n3.clean and deploy hexo\n\n```shell\n$ hexo clean\n$ hexo g\n$ hexo d\n```\n\n### Basic customize yillia\n\n#### Activate `aboutme` ‘left slider’ button\n\n1.go to terminal run\n\n```shell\n$ npm i hexo-generator-json-content --save\n```\n\n2.go to the blog `root` directory, add these lines to the `_config.yml` file\n\n```yml\njsonContent:\n    meta: false\n    pages: false\n    posts:\n      title: true\n      date: true\n      path: true\n      text: false\n      raw: false\n      content: false\n      slug: false\n      updated: false\n      comments: false\n      link: false\n      permalink: false\n      excerpt: false\n      categories: false\n      tags: true\n```\n\n#### Customize avatar\n\nput the avatar file in directory  `themes/yilia/source/img`\n\n> do not add to the public repository directly, or the img get cleaned every time running `hexo clean` , need to upload to the same dir again after this command.\n\n#### Set favicon (icon on the tab of website)\n\nput the favicon img in directory `themes/yilia/source/img`\n\n[Bitbug](https://www.bitbug.net/) is a way of converting image into .ico file.\n\n#### Other configuration\n\nSet file of yillia is in `themes/yilia/_config.yml` as:\n\n```yml\n# Header\nauthor: Ryan LI\nsubtitle: 'Daydreaming at night'\nmenu:\n  main: /\n  archives: /archives/index.html\n  learn: /tags/learn/\n\n# SubNav\nsubnav:\n  github: \"https://github.com/DaydreamAtNight\"\n  # weibo: \"#\"\n  # rss: \"#\"\n  # zhihu: \"#\"\n  #qq: \"#\"\n  #weixin: \"#\"\n  #jianshu: \"#\"\n  #douban: \"#\"\n  #segmentfault: \"#\"\n  #bilibili: \"#\"\n  #acfun: \"#\"\n  mail: \"mailto:lishoushou2019@gmail.com\"\n  #facebook: \"#\"\n  #google: \"#\"\n  #twitter: \"#\"\n  #linkedin: \"#\"\n\nrss: /atom.xml\n\n# 是否需要修改 root 路径\n# 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，\n# 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。\nroot: /\n\n# Content\n\n# 文章太长，截断按钮文字\n# excerpt_link: more\n# 文章卡片右下角常驻链接，不需要请设置为false\nshow_all_link: 'show all'\n# 数学公式\nmathjax: false\n# 是否在新窗口打开链接\nopen_in_new: false\n\n# 打赏\n# 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏\nreward_type: 0\n# # 打赏wording\n# reward_wording: '谢谢你请我吃糖果'\n# # 支二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg\n# alipay: \n# # 微信二维码图片地址\n# weixin: \n\n# 目录\n# 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录\ntoc: 1\n# 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false\ntoc_hide_index: true\n# 目录为空时的提示\ntoc_empty_wording: 'directery none exist'\n\n# 是否有快速回到顶部的按钮\ntop: true\n\n# Miscellaneous\nbaidu_analytics: ''\ngoogle_analytics: ''\nfavicon: /img/favicon.ico\n\n#你的头像url\navatar: /img/avatar.jpeg\n\n#是否开启分享\n# share_jia: true\n\n# #评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment\n# #不需要使用某项，直接设置值为false，或注释掉\n# #具体请参考wiki：https://github.com/litten/hexo-theme-yilia/wiki/\n\n# #1、多说\n# duoshuo: false\n\n# #2、网易云跟帖\n# wangyiyun: false\n\n# #3、畅言\n# changyan_appid: false\n# changyan_conf: false\n\n# #4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的\n# disqus: false\n\n# #5、Gitment\n# gitment_owner: false      #你的 GitHub ID\n# gitment_repo: ''          #存储评论的 repo\n# gitment_oauth:\n#   client_id: ''           #client ID\n#   client_secret: ''       #client secret\n\n# 样式定制 - 一般不需要修改，除非有很强的定制欲望…\nstyle:\n  # 头像上面的背景颜色\n  header: '#ece0cf'\n  # 右滑板块背景\n  slider: 'linear-gradient(45deg,#b4a698,#ece0cf)'\n\n# slider的设置\nslider:\n  # 是否默认展开tags板块\n  showTags: false\n\n# 智能菜单\n# 如不需要，将该对应项置为false\n# 比如\n#smart_menu:\n#  friends: false\nsmart_menu:\n  innerArchive: 'All articles'\n  # friends: '友链'\n  aboutme: 'About me'\n\n# friends:\n#   友情链接1: http://localhost:4000/\n#   友情链接2: http://localhost:4000/\n#   友情链接3: http://localhost:4000/\n#   友情链接4: http://localhost:4000/\n#   友情链接5: http://localhost:4000/\n#   友情链接6: http://localhost:4000/\n\naboutme: Stay hungry, stay fullish\n```\n\n## Advance customize\n\n### Stop visit litten.me:9005\n\nSometimes the user's client information is collected, see [here](https://github.com/litten/hexo-theme-yilia/issues/528) for details. \n\nStop reporting by clear the contents in `themes/yilia/source-src/js/report.js`\n\n### Limit display numbers on the main page\n\nSimply insert `<! -- more -->` to show only what comes before it while collapse the afterwards,  click on the article title to read it in full.\n\n### Easily add pics to blogs via hexo-renderer-marked plugin\n\n1.find `post_asset_folder ` in `_config.yml` file in the blog `root` directory, set to be true\n\n```yml\npost_asset_folder:true\n```\n\n2.Install plugin\n\n```shell\nnpm install hexo-renderer-marked --save\n```\n\n3.change `_config.yml` in blog `root` directory as\n\n```yml\npost_asset_folder: true\nmarked:\n  prependRoot: true\n  postAsset: true\n```\n\nthen img can be easily add with `![img description](img.png)` after add the image to the folder with the same name as the article in `/source/_posts/`\n\n4.change Typora pereference as\n\n<img src=\"typora setting.png\" alt=\"typora setting\" style=\"zoom:50%;\" />\n\nimg can drag into typro, yet blogname need to be deleted before deploying\n\n### Show number of articles and words on the left panel\n\n1.add wordcount plugin in terminal\n\n```shell\nnpm i --save hexo-wordcount\n```\n\n2.change `themes/yilia/layout/_partial/left-col.ejs` \n\nafter\n\n```html\n<nav class=\"header-menu\">\n  <ul>\n    <% for (var i in theme.menu){ %>\n      <li><a href=\"<%- url_for(theme.menu[i]) %>\"><%= i %></a></li>\n    <%}%>\n  </ul>\n</nav>\n```\n\nadd\n\n```html\n<span class=\"post-count\"><%=site.posts.length%> articles\n\t\t\t<span><%= totalcount(site, '0,0.0a') %></span> words</span>\n```\n\nadd style sheet in `themes/yilia/source/main.0cf68a.css`\n\n```\n.post-count{\n  font-size: 12px;\n  color: #696969;\n}\n```\n\n### Show number of visits in the footer\n\n[busuanzi](https://busuanzi.ibruce.info/) is in use, which is super easy to deploy\n\nchange `themes/yilia/layout/_partial/footer.ejs` as\n\n```html\n<footer id=\"footer\">\n  <div class=\"outer\">\n    <div id=\"footer-info\">\n    \t<div class=\"footer-left\">\n    \t\t<!-- total visits number -->\n          <% if (theme.busuanzi && theme.busuanzi.enable){ %>\n            <!-- busuanzi statistics -->\n            <span id=\"busuanzi_value_site_pv\"></span>&nbsp;visits in total\n            <script async src=\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n          <% } %>\n        <!-- end -->\n    \t</div>\n      \t<div class=\"footer-right\">\n      \t\t&copy; <%= date(new Date(), 'YYYY') %> <%= config.author || config.title %>\n      \t</div>\n    </div>\n  </div>\n</footer>\n```\n\nand add \n\n```yml\nbusuanzi:\n  enable: true\n```\n\n### Add button of hiding the left panel\n\nRefer to  [hexo yilia主题添加隐藏左边栏目按钮](https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/ )  \n\n1.add style list to file ` /themes/yilia/source/main.0cf68a.css `\n\n```css\n/*stylesheet for hide the left panel*/\n.mymenucontainer {\n\tdisplay:block;\n\tcursor:pointer;\n\tleft:0;\n\ttop:0;\n\twidth:35px;\n\theight:35px;\n\tz-index:9999;\n\tposition:fixed;\n}\n.bar1 {\n\twidth:35px;\n\theight:3px;\n\tborder-radius:3px;\n\tbackground-color:#8E6D51;\n\tmargin:6px 0;\n\ttransition:0.1s;\n\t-webkit-transform:rotate(-45deg) translate(-8px,8px);\n\ttransform:rotate(-45deg) translate(-8px,8px);\n}\n.bar2 {\n\twidth:35px;\n\theight:3px;\n\tborder-radius:3px;\n\tbackground-color:#8E6D51;\n\tmargin:6px 0;\n\ttransition:0.1s;\n\topacity:0;\n}\n.bar3 {\n\twidth:35px;\n\theight:3px;\n\tborder-radius:3px;\n\tbackground-color:#8E6D51;\n\tmargin:6px 0;\n\ttransition:0.1s;\n\t-webkit-transform:rotate(45deg) translate(-4px,-6px);\n\ttransform:rotate(45deg) translate(-4px,-6px);\n}\n.change .bar1 {\n\t-webkit-transform:rotate(0deg) translate(0px,0px);\n\ttransform:rotate(0deg) translate(0px,0px);\n}\n.change .bar2 {\n\topacity:1;\n}\n.change .bar3 {\n\t-webkit-transform:rotate(0deg) translate(0px,0px);\n\ttransform:rotate(0deg) translate(0px,0px);\n}\n/*stylesheet for hide the left panel end*/\n```\n\n2.go to ` /themes/yilia/layout/layout.ejs ` add before `  <div class=\"left-col\"  ` \n\n```html\n<div class=\"mymenucontainer\" onclick=\"myFunction(this)\">\n  <div class=\"bar1\"></div>\n  <div class=\"bar2\"></div>\n  <div class=\"bar3\"></div>\n</div>\n```\n\n3.add between ` </body> ` and ` </html> ` \n\n```js\n<script>\n    var hide = false;\n    function myFunction(x) {\n        x.classList.toggle(\"change\");\n        if(hide == false){\n            $(\".left-col\").css('display', 'none');\n            $(\".mid-col\").css(\"left\", 6);\n            $(\".tools-col\").css('display', 'none');\n            $(\".tools-col.hide\").css('display', 'none');\n            hide = true;\n        }else{\n            $(\".left-col\").css('display', '');\n            $(\".mid-col\").css(\"left\", 300);\n            $(\".tools-col\").css('display', '');\n            $(\".tools-col.hide\").css('display', '');\n            hide = false;\n        }\n    }\n</script>\n```\n\n\n\n\n\n### Beautiful contents navigation in articles\n\nDefault navigator is kind of ugly so found a more beautiful version, to use default version, simply change `toc: 2` in file `themes/yilia/_config.yml`\n\n1.add this block at the end of `themes/yilia/source/main.0cf68a.css`\n\n```css\n/* navigator */\n#container .show-toc-btn,#container .toc-article{display:block}\n.toc-article{z-index:100;background:#fff;border:1px solid #ccc;max-width:250px;min-width:150px;max-height:500px;overflow-y:auto;-webkit-box-shadow:5px 5px 2px #ccc;box-shadow:5px 5px 2px #ccc;font-size:12px;padding:10px;position:fixed;right:35px;top:129px}.toc-article .toc-close{font-weight:700;font-size:20px;cursor:pointer;float:right;color:#ccc}.toc-article .toc-close:hover{color:#000}.toc-article .toc{font-size:12px;padding:0;line-height:20px}.toc-article .toc .toc-number{color:#333}.toc-article .toc .toc-text:hover{text-decoration:underline;color:#2a6496}.toc-article li{list-style-type:none}.toc-article .toc-level-1{margin:4px 0}.toc-article .toc-child{}@-moz-keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-webkit-keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-o-keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}.show-toc-btn{display:none;z-index:10;width:30px;min-height:14px;overflow:hidden;padding:4px 6px 8px 5px;border:1px solid #ddd;border-right:none;position:fixed;right:40px;text-align:center;background-color:#f9f9f9}.show-toc-btn .btn-bg{margin-top:2px;display:block;width:16px;height:14px;background:url(http://7xtawy.com1.z0.glb.clouddn.com/show.png) no-repeat;-webkit-background-size:100%;-moz-background-size:100%;background-size:100%}.show-toc-btn .btn-text{color:#999;font-size:12px}.show-toc-btn:hover{cursor:pointer}.show-toc-btn:hover .btn-bg{background-position:0 -16px}.show-toc-btn:hover .btn-text{font-size:12px;color:#ea8010}\n.toc-article li ol, .toc-article li ul {\n    margin-left: 30px;\n}\n.toc-article ol, .toc-article ul {\n    margin: 10px 0;\n}\n```\n\n2.after `</header><% } %>` in file `themes/yilia/layout/_partial/article.ejs` add\n\n```html\n    <!-- navigator -->\n    <% if (!index && post.toc){ %>\n      <p class=\"show-toc-btn\" id=\"show-toc-btn\" onclick=\"showToc();\" style=\"display:none\">\n            <span class=\"btn-bg\"></span>\n            <span class=\"btn-text\">...</span>\n            </p>\n      <div id=\"toc-article\" class=\"toc-article\">\n          <span id=\"toc-close\" class=\"toc-close\" title=\"hide navigator\" onclick=\"showBtn();\">×</span>\n          <strong class=\"toc-title\">navigator</strong>\n            <%- toc(post.content) %>\n          </div>\n    <script type=\"text/javascript\">\n      function showToc(){\n          var toc_article = document.getElementById(\"toc-article\");\n          var show_toc_btn = document.getElementById(\"show-toc-btn\");\n          toc_article.setAttribute(\"style\",\"display:block\");\n          show_toc_btn.setAttribute(\"style\",\"display:none\");\n          };\n      function showBtn(){\n          var toc_article = document.getElementById(\"toc-article\");\n          var show_toc_btn = document.getElementById(\"show-toc-btn\");\n          toc_article.setAttribute(\"style\",\"display:none\");\n          show_toc_btn.setAttribute(\"style\",\"display:block\");\n          };\n    </script>\n        <% } %>\n    <!-- navigator end -->\n```\n\n3.add `toc:true` to the articles that need the navigator.\n\n### Add custormize header to articles\n\nwhen run `hexo new` to initiate a new blog, a defaul head would generate, change it by\n\nchange the `scaffolds/post.md` in the `root` directory\n\n```txt\n---\ntitle: {{ title }}\ndate: {{ date }}\nauthor: daydreamatnight\ntoc: true\ndeclare: true\ntags:\n---\n```\n\n#### more headers to choose when writing a blog\n\nbefore a blog, more paras can be chosen to add\n\n```txt\n--- \ntitle: #你的博客文章名 \ntoc: ture #toc \ndate: 2020-09-07 09:25:00 #文章时间 \nauthor: GavenLee #作者 \nimg: /source/images/xxx.jpg #图片 \ntop: true #是否顶置 \ncover: true #是否在引导页轮播 \ncoverImg: /images/1.jpg #轮播图片 \npassword: #阅读密码这里被加密 \nmathjax: false #mathjax \nsummary: 这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要 \ncategories: Markdown #分类 \ntags: #标签 \nabbrlink: HexoLearn #链接 \n---\n```\n\n### Disable auto wrap in code block\n\nlocate and delete `white-space:pre-wrap` in file `themes/yilia/source/main.0cf68a.css` \n\n### Add copy button to code block\n\n1.create a `clipboard_use.js` file in directory `themes/yilia/source` \n\n```js\n$(\".highlight\").wrap(\"<div class='code-wrapper' style='position:relative'></div>\");\n/*create copy button after page loaded*/\n!function (e, t, a) {\n    /* code */\n    var initCopyCode = function () {\n        var copyHtml = '';\n        copyHtml += '<button class=\"btn-copy\" data-clipboard-snippet=\"\">';\n        copyHtml += '  <i class=\"fa fa-clipboard\"></i><span>copy</span>';\n        copyHtml += '</button>';\n        $(\".highlight .code\").before(copyHtml);\n        var clipboard = new ClipboardJS('.btn-copy', {\n            target: function (trigger) {\n                return trigger.nextElementSibling;\n            }\n        });\n        clipboard.on('success', function (e) {\n            e.trigger.innerHTML = \"<i class='fa fa-check' style='color:green'></i><span style='color:green'>copy success</span>\"\n            setTimeout(function () {\n                e.trigger.innerHTML = \"<i class='fa fa-clipboard'></i><span>copy</span>\"\n            }, 1000)\n            e.clearSelection();\n        });\n        clipboard.on('error', function (e) {\n            e.trigger.innerHTML = \"<i class='fa fa-exclamation' style='color:red'></i><span style='color:red'>copy success</span>\"\n            setTimeout(function () {\n                e.trigger.innerHTML = \"<i class='fa fa-clipboard'></i><span>copy</span>\"\n            }, 1000)\n            e.clearSelection();\n        });\n    }\n    initCopyCode();\n}(window, document);\n```\n\n2.load .js file, edit `themes/yilia/layout/layout.ejs` file, add before `</body>`. \n\n```html\n<!-- copy button in code block-->\n<script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js\"></script>\n<script type=\"text/javascript\" src=\"https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"/clipboard_use.js\"></script>\n```\n\n3.add stylesheet the end of `themes/yilia/source/main.0cf68a.css`\n\n```css\n/* code copy button */\n.btn-copy {\n  display: inline-block;\n  cursor: pointer;\n  background-color: #eee;\n  background-image: linear-gradient(#fcfcfc, #eee);\n  border: 1px solid #d5d5d5;\n  border-radius: 3px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-appearance: none;\n  font-size: 13px;\n  font-weight: 700;\n  line-height: 20px;\n  color: #333;\n  -webkit-transition: opacity .3s ease-in-out;\n  -o-transition: opacity .3s ease-in-out;\n  transition: opacity .3s ease-in-out;\n  padding: 2px 6px;\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  opacity: 0;\n}\n.btn-copy span {\n  margin-left: 5px;\n}\n.highlight:hover .btn-copy {\n  opacity: 1;\n}\n/* code copy button end */\n```\n\n4.add copy button icon, edit `themes/yilia/layout/_partia/head.ejs` add before `</head>` \n\n```html\n<!-- copy button icon -->\n<link rel=\"stylesheet\" type=\"text/css\" href=\"//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css\">\n```\n\n### Allow search engines to index this Blog\n\n#### index Google to this Blog\n\ncheck if google can find you, enter `site:daydreamatnight.github.io` to see\n\n<img src=\"check google search.png\" alt=\"check google search\" style=\"zoom:50%;\" />\n\n##### Add url to goole search console\n\n1.open [google console](https://search.google.com/search-console/welcome) , add URL link of the blog (https://daydreamatnight.github.io), in the `URL prefix` block, click `CONTINUE`\n\n<img src=\"google search console.png\" alt=\"google console\" style=\"zoom:50%;\" />\n\n2.upload the html file to the blog `root` directory and deploy the website, then clicke verify.\n\n<img src=\"google console varification.png\" alt=\"google console varification\" style=\"zoom:50%;\" />\n\nlittle buggy here, see [**don’t upload** the file **using hexo** command](https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/)\n\n##### add sitemap for google\n\nadd sitemap for google and baidu together\n\n> A *sitemap* is a file where you provide information about the pages, videos, and other files on your site, and the relationships between them. Search engines like Google read this file to more intelligently crawl your site. A sitemap tells Google which pages and files you think are important in your site, and also provides valuable information about these files: for example, for pages, when the page was last updated, how often the page is changed, and any alternate language versions of a page.\n\n1.install sitemap plugins\t\n\n```shell\n$ npm install hexo-generator-sitemap --save\n$ npm install hexo-generator-baidu-sitemap --save\n```\n\n2.add to the `_config.yml` in the blog `root` \n\n```yml\n# hexo sitemap\nsitemap:\n  path: sitemap.xml\nbaidusitemap:\n  path: baidusitemap.xml\n```\n\n3.Deploy the blog, go to  https://daydreamatnight.github.io/sitemap.xml and https://daydreamatnight.github.io/baidusitemap.xml to see if sitemaps are uploaded\n\n4.Go to Google Search Console, in the left panel, click `Sitemaps`, enter your sitemap URL `sitemap.xml` \n\n<img src=\"can't fetch sitemap.png\" alt=\"can't fetch sitemap\" style=\"zoom:50%;\" />\n\nGooglebot won't download the sitemap immediately. Give it time. \n\n##### add robots.txt\n\n> A robots.txt file tells search engine crawlers which URLs the crawler can access on your site. This is used mainly to avoid overloading your site with requests; **it is not a mechanism for keeping a web page out of Google**. To keep a web page out of Google, [block indexing with `noindex`](https://developers.google.com/search/docs/advanced/crawling/block-indexing) or password-protect the page.\n>\n> A robots.txt file is used primarily to manage crawler traffic to your site, and *usually* to keep a file off Google, depending on the file type:\n\n```txt\nUser-agent: *\nAllow: /\nAllow: /archives/\nAllow: /tags/\nAllow: /categories/\nAllow: /about/\nAllow: /guestbook/\nAllow: /others/\n\n\nDisallow: /js/\nDisallow: /css/\nDisallow: /lib/\n\nSitemap: https://daydreamatnight.github.io/sitemap.xml\nSitemap: https://daydreamatnight.github.io/baidusitemap.xml\n```\n\ndeploy the blog and wait.\n\n##### check if sitemap is available\n\nAfter uploaded several updates, my sitemap still didn't fetched by google. So I went to check, it turns out my url setting in `_config.yml` is wrong.  So I changed it to be my home url. And check it with  [URL Inspection Tool](https://www.jcchouinard.com/url-inspection-tool/). \n\n1.Open [google search console](https://search.google.com/search-console), add the url of sitemap in the upper url inspecting box.\n\n<img src=\"Google%20sitemap%20inspect.png\" alt=\"Google sitemap inspect URL is not on Google \" style=\"zoom:22%;\" />\n\n<img src=\"Google%20sitemap%20inspect%202.png\" alt=\"Google sitemap inspect 2\" style=\"zoom:22%;\" />\n\nIt's normal it shows `URL is not on Google` because it shouldn't as a sitemap.\n\n2.click `live test` to check the availability.\n\n<img src=\"Google%20sitemap%20inspect%203.png\" alt=\"Google sitemap inspect 3\" style=\"zoom:75%;\" />\n\nIt should be available, then just wait.\n\n#### index Bing to this Blog\n\n1.go to [Bing webmaster](https://www.bing.com/webmasters/) and login\n\n2.connect with google webmaster.\n\n<img src=\"bing%20sitemap.png\" alt=\"bing sitemap\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"being%20sitemap%20connect%20google.png\" alt=\"being sitemap connect google\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"bing%20search%20console%20success.png\" alt=\"bing search console success\" style=\"zoom:75%;\" />\n\n#### index baidu to this Blog(not possibly working)\n\ngo to the [baidu search console](https://ziyuan.baidu.com/site/index) , \n\n<img src=\"baidu console.png\" alt=\"baidu console\" style=\"zoom:50%;\" />\n\nClick `添加网站` and input every thing, do similar thing\n\n<img src=\"baidu console varification.png\" alt=\"baidu console varification\" style=\"zoom:50%;\" />\n\nadd sitemap\n\n<img src=\"baidu console sitemap.png\" alt=\"baidu console sitemap\" style=\"zoom:50%;\" />\n\njust wait forever, this could take 2000 years, so give up\n\n### Add copyright statement\n\n1.open file `themes/yilia/layout/_partial/article.ejs` add before `<% if ((theme.reward_type === 2 || (theme.reward_type === 1 && post.reward)) && !index){ %>`\n\n```html\n<!-- add copyright statement -->\n<% if(theme.declare){%>\n    <%- partial('post/declare') %>\n<% } %>\n<!-- end -->\n```\n\n2.create new file `declare.ejs` under `themes/yilia/layout/_partial/post/` with:\n\n```html\n<!--add copyright statement https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/c1215e132f6d5621c5fea83d3c4f7ccbcca074a3-->\n<%\n  var sUrl = url.replace(/index\\.html$/, '');\n  sUrl = /^(http:|https:)\\/\\//.test(sUrl) ? sUrl : 'https:' + sUrl;\n%>\n\n<!-- #copyright setting：0-close statement; 1-declare statement if declare: true in the article header; 2-always declare the copyright -->\n<% if ((theme.declare.declare_type === 2 || (theme.declare.declare_type === 1 && post.declare)) && !index){ %>\n  <div class=\"declare\">\n    <strong class=\"author\">author: </strong>\n    <% if(config.author != undefined){ %>\n      <%= config.author%>\n    <% }else{%>\n      <font color=\"red\">please add right \"author\" name in \"_config.yml\" in the blog root</font>\n    <%}%>\n    <br>\n    <strong class=\"create-time\">posting date: </strong>\n    <%- date(post.date, 'YYYY-MM-DD HH:MM:SS') %>\n    <br>\n    <strong class=\"update-time\">last update: </strong>\n    <%- date(post.updated, 'YYYY-MM-DD HH:MM:SS') %>\n    <br>\n    <strong class=\"article-titles\">article title: </strong>\n    <a href=\"<%= config.url %>/<%= post.path %>\" title=\"<%= post.title %>\" target=\"_blank\"><%= post.title %></a>\n    <br>\n    <strong class=\"article-url\">article link: </strong>\n    <a href=\"<%= config.url %>/<%= post.path %>\" title=\"<%= post.title %>\" target=\"_blank\"><%= config.url %>/<%= post.path %></a>\n    <br>\n    <strong class=\"copyright\">copyright:</strong>\n    This work is licensed under a\n    <a rel=\"license\" href=\"<%= theme.declare.licensee_url%>\" title=\"<%= theme.declare.licensee_alias %>\"><%= theme.declare.licensee_name%></a>\n    licience \n    <% if(theme.declare.licensee_img != undefined){ %>\n      <a rel=\"license\" href=\"<%= theme.declare.licensee_url%>\"><img alt=\"知识共享许可协议\" style=\"border-width:0\" src=\"<%= theme.declare.licensee_img%>\"/></a>\n    <% } %>\n  </div>\n<% } else {%>\n  <div class=\"declare\" hidden=\"hidden\"></div>\n<% } %>\n<!-- add copyright statement -->\n```\n\n3.add stylesheet the end of `themes/yilia/source/main.0cf68a.css` \n\n```css\n/*stylesheet for the delcare*/\n.declare {\n  background-color: #eaeaea;\n  margin-top: 2em;\n  border-left: 3px solid #ff1700;\n  padding: .5em 1em; \n}\n/*stylesheet for the delcare end*/\n```\n\n4.add at the end of `themes/yilia/_config.yml` file:\n\n```\ndeclare:\n  declare_type: 1\n  licensee_url: http://creativecommons.org/licenses/by-nc-sa/4.0/      \n  licensee_name: 'CC BY-NC-SA 4.0'                              \n  licensee_alias: 'CC BY-NC-SA 4.0'     \n  licensee_img: https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png\n```\n\n## Reference\n\nhttps://flatironschool.com/blog/the-benefits-of-blogging-how-and-why-to-keep-a-technical-blog/\n\nhttps://weblog.masukomi.org/2015/10/18/static-vs-dynamic-blogging/\n\nhttps://www.cnblogs.com/aoguai/p/11781505.html\n\nhttps://www.kblog.top/post/30452.html\n\nhttps://wkzqn.gitee.io/2020/02/16/typora%E7%BC%96%E5%86%99hexo%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/\n\nhttps://segmentfault.com/a/1190000009478837#articleHeader5\n\nhttps://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/\n\nhttps://busuanzi.ibruce.info/\n\nhttps://creativecommons.org/choose/results-one?license_code=by-nc-sa&amp;jurisdiction=&amp;version=4.0&amp;lang=en\n\nhttps://www.jcchouinard.com/sitemap-could-not-be-read-couldnt-fetch-in-google-search-console/\n\nhttps://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/","source":"_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia.md","raw":"---\ntitle: Build and configure a personal blog via hexo and yilia on github\ndate: 2022-02-22 16:15:03\ntoc: true\ndeclare: true\ntags: \n  - learn \n  - hexo\n  - git\n---\n> Keep updating...\n\n\n> Technical blog has a hundred benefits and no harm\n>\n> This blog records the process of building and customizing this personal blog from 0 to 1\n\n<!-- more -->\n\n## Preliminary\n\n### Why personal blog\n\n> Keeping a technical blog can be **a great way of documenting your growth as a developer**. This documentation can be particularly useful on a professional level. All software companies want to hire smart, thoughtful, communicative developers who can easily assimilate into a team, and who are ready to both teach and learn\n\n### Static vs dynamic blog\n\nthere are 2 types of mainstream personal blog: static and dynamic.\n\nStatic is recommended considering its simplicity, 0 maintenance and 0 safety worry. \n\n|              | Static blog                                                  | Dynamic blog                                                 |\n| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |\n| Price        | low, 0 cost when the traffic is relatively low               | High, server is needed, cloud server of  high performance is usually very expensive. |\n| Features     | Limited, only third-party services can be used to complete certain \"dynamic\" functions, such as comments | Rich, in WordPress for example, basically any kind of plugins can be found. Featuers such as auto-resizing, media players, multiple authors, scheduled posts, user analysis can be easily realize. |\n| Speed        | Fast                                                         | Slow                                                         |\n| Maintainance | 0                                                            | Need to care about the sever                                 |\n| Markdown     | Supported yet it's the only choice                           | not supported                                                |\n| Geeky        | YES                                                          | No                                                           |\n\nAnd I also chose static because I'm geeky (poor of money) and results-driven (lazy to spend time on maintaining).\n\n## Build a static blog via hexo\n\n### Set environment\n\n1.check machine information: macOS on M1 MacBook\n\n2.Install Nodejs, including node and npm\n\nopen  https://nodejs.org/en/download/ and click download\n\n<img src=\"node js install.png\" alt=\"node js install\" style=\"zoom:50%;\" />\n\n3.Install Git\n\nAready installed\n\n4.Open terminal, check node, npm and git versions\n\n```shell\n$ npm -v\n$ node -v\n$ git --version\n8.3.1\nv16.14.0\ngit version 2.32.0 (Apple Git-132)\n```\n\n### Initialize blog\n\n1.install hexo via npm\n\n```shell\n$ sudo npm install -g hexo-cli\n$ hexo -v\nINFO  Validating config\nhexo: 6.0.0\nhexo-cli: 4.3.0\nos: darwin 21.2.0 12.1\n\nnode: 16.14.0\nv8: 9.4.146.24-node.20\nuv: 1.43.0\nzlib: 1.2.11\nbrotli: 1.0.9\nares: 1.18.1\nmodules: 93\nnghttp2: 1.45.1\nnapi: 8\nllhttp: 6.0.4\nopenssl: 1.1.1m+quic\ncldr: 40.0\nicu: 70.1\ntz: 2021a3\nunicode: 14.0\nngtcp2: 0.1.0-DEV\nnghttp3: 0.1.0-DEV\n```\n\n2.create a new folder in terminal and initialize the blog\n\n```shell\n$ cd ~/Documents/\n$ makedir self_blog\n$ cd self_blog/\n$ hexo init\nINFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitINFO  Install dependencies⸨#########⠂⠂⠂⠂⠂⠂⠂⠂⠂⸩ ⠹ idealTree:hexo-front-matter: timing idealTree:node_modules/hexo-front-matter Completed in 212msINFO  Start blogging with Hexo! \n```\n\n3.view the blog on localhost, s for start\n\n```shell\n$ hexo s\nINFO  Validating config\nINFO  Start processing\nINFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.\n```\n\n\n### Write first blog\n\n1.write a new blog, n for new\n\n```shell\n$ hexo n 'Hello ShouRou'\nINFO  Validating config\nINFO  Created: ~/Documents/self_blog/source/_posts/Hello-ShouRou.md\n```\n\nthe blog can be written on any editor, Typora in use.\n\n```shell\nopen ~/Documents/self_blog/source/_posts/Hello-ShouRou.md\n```\n\n2.clean cache(not necessary)\n\n```shell\n$ hexo clean\n```\n\n3.generate the blog, g for generate\n\n```shell\n$ hexo g\nINFO  Validating config\nINFO  Start processing\nINFO  Files loaded in 61 ms\n(node:10719) Warning: Accessing non-existent property 'lineno' of module exports inside circular dependency\n(Use `node --trace-warnings ...` to show where the warning was created)\n(node:10719) Warning: Accessing non-existent property 'column' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'filename' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'lineno' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'column' of module exports inside circular dependency\n(node:10719) Warning: Accessing non-existent property 'filename' of module exports inside circular dependency\nINFO  Generated: archives/2022/index.html\nINFO  Generated: archives/index.html\nINFO  Generated: js/script.js\nINFO  Generated: fancybox/jquery.fancybox.min.css\nINFO  Generated: index.html\nINFO  Generated: css/style.css\nINFO  Generated: css/fonts/fontawesome-webfont.woff2\nINFO  Generated: fancybox/jquery.fancybox.min.js\nINFO  Generated: js/jquery-3.4.1.min.js\nINFO  Generated: archives/2022/02/index.html\nINFO  Generated: css/fonts/FontAwesome.otf\nINFO  Generated: css/fonts/fontawesome-webfont.woff\nINFO  Generated: css/fonts/fontawesome-webfont.eot\nINFO  Generated: css/fonts/fontawesome-webfont.ttf\nINFO  Generated: css/images/banner.jpg\nINFO  Generated: 2022/02/22/hello-world/index.html\nINFO  Generated: css/fonts/fontawesome-webfont.svg\nINFO  Generated: 2022/02/22/Hello-ShouRou/index.html\nINFO  18 files generated in 161 ms\n```\n\n### Deploy to remote (GitHub)\n\n1.Create a new repository with the name of $username.github.io\n\n<img src=\"github page.png\" alt=\"github page\" style=\"zoom:50%;\" />\n\nuse default setting\n\n2.open terminal, install plugin of deploying to git\n\n```shell\n$ npm install --save hexo-deployer-git\n```\n\n3.Open the `_config.yml` file in the blog `root` directory, add these lines afterwards\n\n```yml\ndeploy:\n type: git\n repo: git@github.com:DaydreamAtNight/DaydreamAtNight.github.io.git\n branch: master\n```\n\n4.Go to the blog `root`, deploy the blog to remote, d for deploy\n\n```shell\n$ hexo clean\n$ hexo g\n$ hexo d\n```\n\nOpen https://daydreamatnight.github.io/ to see if it works\n\n## Change theme to yilia\n\ndefault theme of hexo is called landscape and it's not beautiful enough to most of the people. Yilia is a fast, simple, elegant and popular theme. Thought it has not been updated since Nov 2017, it still a good choice for fresh bloggers.\n\n### Download and deploy yilia\n\n1.go to the blog `root`\n\n``` shell\n$ git clone https://github.com/litten/hexo-theme-yilia theme/yilia\n```\n\n2.eidt the `_config.yml` file, add\n\n```yml\ntheme: yilia\n```\n\n3.clean and deploy hexo\n\n```shell\n$ hexo clean\n$ hexo g\n$ hexo d\n```\n\n### Basic customize yillia\n\n#### Activate `aboutme` ‘left slider’ button\n\n1.go to terminal run\n\n```shell\n$ npm i hexo-generator-json-content --save\n```\n\n2.go to the blog `root` directory, add these lines to the `_config.yml` file\n\n```yml\njsonContent:\n    meta: false\n    pages: false\n    posts:\n      title: true\n      date: true\n      path: true\n      text: false\n      raw: false\n      content: false\n      slug: false\n      updated: false\n      comments: false\n      link: false\n      permalink: false\n      excerpt: false\n      categories: false\n      tags: true\n```\n\n#### Customize avatar\n\nput the avatar file in directory  `themes/yilia/source/img`\n\n> do not add to the public repository directly, or the img get cleaned every time running `hexo clean` , need to upload to the same dir again after this command.\n\n#### Set favicon (icon on the tab of website)\n\nput the favicon img in directory `themes/yilia/source/img`\n\n[Bitbug](https://www.bitbug.net/) is a way of converting image into .ico file.\n\n#### Other configuration\n\nSet file of yillia is in `themes/yilia/_config.yml` as:\n\n```yml\n# Header\nauthor: Ryan LI\nsubtitle: 'Daydreaming at night'\nmenu:\n  main: /\n  archives: /archives/index.html\n  learn: /tags/learn/\n\n# SubNav\nsubnav:\n  github: \"https://github.com/DaydreamAtNight\"\n  # weibo: \"#\"\n  # rss: \"#\"\n  # zhihu: \"#\"\n  #qq: \"#\"\n  #weixin: \"#\"\n  #jianshu: \"#\"\n  #douban: \"#\"\n  #segmentfault: \"#\"\n  #bilibili: \"#\"\n  #acfun: \"#\"\n  mail: \"mailto:lishoushou2019@gmail.com\"\n  #facebook: \"#\"\n  #google: \"#\"\n  #twitter: \"#\"\n  #linkedin: \"#\"\n\nrss: /atom.xml\n\n# 是否需要修改 root 路径\n# 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，\n# 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。\nroot: /\n\n# Content\n\n# 文章太长，截断按钮文字\n# excerpt_link: more\n# 文章卡片右下角常驻链接，不需要请设置为false\nshow_all_link: 'show all'\n# 数学公式\nmathjax: false\n# 是否在新窗口打开链接\nopen_in_new: false\n\n# 打赏\n# 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏\nreward_type: 0\n# # 打赏wording\n# reward_wording: '谢谢你请我吃糖果'\n# # 支二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg\n# alipay: \n# # 微信二维码图片地址\n# weixin: \n\n# 目录\n# 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录\ntoc: 1\n# 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false\ntoc_hide_index: true\n# 目录为空时的提示\ntoc_empty_wording: 'directery none exist'\n\n# 是否有快速回到顶部的按钮\ntop: true\n\n# Miscellaneous\nbaidu_analytics: ''\ngoogle_analytics: ''\nfavicon: /img/favicon.ico\n\n#你的头像url\navatar: /img/avatar.jpeg\n\n#是否开启分享\n# share_jia: true\n\n# #评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment\n# #不需要使用某项，直接设置值为false，或注释掉\n# #具体请参考wiki：https://github.com/litten/hexo-theme-yilia/wiki/\n\n# #1、多说\n# duoshuo: false\n\n# #2、网易云跟帖\n# wangyiyun: false\n\n# #3、畅言\n# changyan_appid: false\n# changyan_conf: false\n\n# #4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的\n# disqus: false\n\n# #5、Gitment\n# gitment_owner: false      #你的 GitHub ID\n# gitment_repo: ''          #存储评论的 repo\n# gitment_oauth:\n#   client_id: ''           #client ID\n#   client_secret: ''       #client secret\n\n# 样式定制 - 一般不需要修改，除非有很强的定制欲望…\nstyle:\n  # 头像上面的背景颜色\n  header: '#ece0cf'\n  # 右滑板块背景\n  slider: 'linear-gradient(45deg,#b4a698,#ece0cf)'\n\n# slider的设置\nslider:\n  # 是否默认展开tags板块\n  showTags: false\n\n# 智能菜单\n# 如不需要，将该对应项置为false\n# 比如\n#smart_menu:\n#  friends: false\nsmart_menu:\n  innerArchive: 'All articles'\n  # friends: '友链'\n  aboutme: 'About me'\n\n# friends:\n#   友情链接1: http://localhost:4000/\n#   友情链接2: http://localhost:4000/\n#   友情链接3: http://localhost:4000/\n#   友情链接4: http://localhost:4000/\n#   友情链接5: http://localhost:4000/\n#   友情链接6: http://localhost:4000/\n\naboutme: Stay hungry, stay fullish\n```\n\n## Advance customize\n\n### Stop visit litten.me:9005\n\nSometimes the user's client information is collected, see [here](https://github.com/litten/hexo-theme-yilia/issues/528) for details. \n\nStop reporting by clear the contents in `themes/yilia/source-src/js/report.js`\n\n### Limit display numbers on the main page\n\nSimply insert `<! -- more -->` to show only what comes before it while collapse the afterwards,  click on the article title to read it in full.\n\n### Easily add pics to blogs via hexo-renderer-marked plugin\n\n1.find `post_asset_folder ` in `_config.yml` file in the blog `root` directory, set to be true\n\n```yml\npost_asset_folder:true\n```\n\n2.Install plugin\n\n```shell\nnpm install hexo-renderer-marked --save\n```\n\n3.change `_config.yml` in blog `root` directory as\n\n```yml\npost_asset_folder: true\nmarked:\n  prependRoot: true\n  postAsset: true\n```\n\nthen img can be easily add with `![img description](img.png)` after add the image to the folder with the same name as the article in `/source/_posts/`\n\n4.change Typora pereference as\n\n<img src=\"typora setting.png\" alt=\"typora setting\" style=\"zoom:50%;\" />\n\nimg can drag into typro, yet blogname need to be deleted before deploying\n\n### Show number of articles and words on the left panel\n\n1.add wordcount plugin in terminal\n\n```shell\nnpm i --save hexo-wordcount\n```\n\n2.change `themes/yilia/layout/_partial/left-col.ejs` \n\nafter\n\n```html\n<nav class=\"header-menu\">\n  <ul>\n    <% for (var i in theme.menu){ %>\n      <li><a href=\"<%- url_for(theme.menu[i]) %>\"><%= i %></a></li>\n    <%}%>\n  </ul>\n</nav>\n```\n\nadd\n\n```html\n<span class=\"post-count\"><%=site.posts.length%> articles\n\t\t\t<span><%= totalcount(site, '0,0.0a') %></span> words</span>\n```\n\nadd style sheet in `themes/yilia/source/main.0cf68a.css`\n\n```\n.post-count{\n  font-size: 12px;\n  color: #696969;\n}\n```\n\n### Show number of visits in the footer\n\n[busuanzi](https://busuanzi.ibruce.info/) is in use, which is super easy to deploy\n\nchange `themes/yilia/layout/_partial/footer.ejs` as\n\n```html\n<footer id=\"footer\">\n  <div class=\"outer\">\n    <div id=\"footer-info\">\n    \t<div class=\"footer-left\">\n    \t\t<!-- total visits number -->\n          <% if (theme.busuanzi && theme.busuanzi.enable){ %>\n            <!-- busuanzi statistics -->\n            <span id=\"busuanzi_value_site_pv\"></span>&nbsp;visits in total\n            <script async src=\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n          <% } %>\n        <!-- end -->\n    \t</div>\n      \t<div class=\"footer-right\">\n      \t\t&copy; <%= date(new Date(), 'YYYY') %> <%= config.author || config.title %>\n      \t</div>\n    </div>\n  </div>\n</footer>\n```\n\nand add \n\n```yml\nbusuanzi:\n  enable: true\n```\n\n### Add button of hiding the left panel\n\nRefer to  [hexo yilia主题添加隐藏左边栏目按钮](https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/ )  \n\n1.add style list to file ` /themes/yilia/source/main.0cf68a.css `\n\n```css\n/*stylesheet for hide the left panel*/\n.mymenucontainer {\n\tdisplay:block;\n\tcursor:pointer;\n\tleft:0;\n\ttop:0;\n\twidth:35px;\n\theight:35px;\n\tz-index:9999;\n\tposition:fixed;\n}\n.bar1 {\n\twidth:35px;\n\theight:3px;\n\tborder-radius:3px;\n\tbackground-color:#8E6D51;\n\tmargin:6px 0;\n\ttransition:0.1s;\n\t-webkit-transform:rotate(-45deg) translate(-8px,8px);\n\ttransform:rotate(-45deg) translate(-8px,8px);\n}\n.bar2 {\n\twidth:35px;\n\theight:3px;\n\tborder-radius:3px;\n\tbackground-color:#8E6D51;\n\tmargin:6px 0;\n\ttransition:0.1s;\n\topacity:0;\n}\n.bar3 {\n\twidth:35px;\n\theight:3px;\n\tborder-radius:3px;\n\tbackground-color:#8E6D51;\n\tmargin:6px 0;\n\ttransition:0.1s;\n\t-webkit-transform:rotate(45deg) translate(-4px,-6px);\n\ttransform:rotate(45deg) translate(-4px,-6px);\n}\n.change .bar1 {\n\t-webkit-transform:rotate(0deg) translate(0px,0px);\n\ttransform:rotate(0deg) translate(0px,0px);\n}\n.change .bar2 {\n\topacity:1;\n}\n.change .bar3 {\n\t-webkit-transform:rotate(0deg) translate(0px,0px);\n\ttransform:rotate(0deg) translate(0px,0px);\n}\n/*stylesheet for hide the left panel end*/\n```\n\n2.go to ` /themes/yilia/layout/layout.ejs ` add before `  <div class=\"left-col\"  ` \n\n```html\n<div class=\"mymenucontainer\" onclick=\"myFunction(this)\">\n  <div class=\"bar1\"></div>\n  <div class=\"bar2\"></div>\n  <div class=\"bar3\"></div>\n</div>\n```\n\n3.add between ` </body> ` and ` </html> ` \n\n```js\n<script>\n    var hide = false;\n    function myFunction(x) {\n        x.classList.toggle(\"change\");\n        if(hide == false){\n            $(\".left-col\").css('display', 'none');\n            $(\".mid-col\").css(\"left\", 6);\n            $(\".tools-col\").css('display', 'none');\n            $(\".tools-col.hide\").css('display', 'none');\n            hide = true;\n        }else{\n            $(\".left-col\").css('display', '');\n            $(\".mid-col\").css(\"left\", 300);\n            $(\".tools-col\").css('display', '');\n            $(\".tools-col.hide\").css('display', '');\n            hide = false;\n        }\n    }\n</script>\n```\n\n\n\n\n\n### Beautiful contents navigation in articles\n\nDefault navigator is kind of ugly so found a more beautiful version, to use default version, simply change `toc: 2` in file `themes/yilia/_config.yml`\n\n1.add this block at the end of `themes/yilia/source/main.0cf68a.css`\n\n```css\n/* navigator */\n#container .show-toc-btn,#container .toc-article{display:block}\n.toc-article{z-index:100;background:#fff;border:1px solid #ccc;max-width:250px;min-width:150px;max-height:500px;overflow-y:auto;-webkit-box-shadow:5px 5px 2px #ccc;box-shadow:5px 5px 2px #ccc;font-size:12px;padding:10px;position:fixed;right:35px;top:129px}.toc-article .toc-close{font-weight:700;font-size:20px;cursor:pointer;float:right;color:#ccc}.toc-article .toc-close:hover{color:#000}.toc-article .toc{font-size:12px;padding:0;line-height:20px}.toc-article .toc .toc-number{color:#333}.toc-article .toc .toc-text:hover{text-decoration:underline;color:#2a6496}.toc-article li{list-style-type:none}.toc-article .toc-level-1{margin:4px 0}.toc-article .toc-child{}@-moz-keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-webkit-keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-o-keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@keyframes cd-bounce-1{0%{opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}60%{opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)}100%{-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}.show-toc-btn{display:none;z-index:10;width:30px;min-height:14px;overflow:hidden;padding:4px 6px 8px 5px;border:1px solid #ddd;border-right:none;position:fixed;right:40px;text-align:center;background-color:#f9f9f9}.show-toc-btn .btn-bg{margin-top:2px;display:block;width:16px;height:14px;background:url(http://7xtawy.com1.z0.glb.clouddn.com/show.png) no-repeat;-webkit-background-size:100%;-moz-background-size:100%;background-size:100%}.show-toc-btn .btn-text{color:#999;font-size:12px}.show-toc-btn:hover{cursor:pointer}.show-toc-btn:hover .btn-bg{background-position:0 -16px}.show-toc-btn:hover .btn-text{font-size:12px;color:#ea8010}\n.toc-article li ol, .toc-article li ul {\n    margin-left: 30px;\n}\n.toc-article ol, .toc-article ul {\n    margin: 10px 0;\n}\n```\n\n2.after `</header><% } %>` in file `themes/yilia/layout/_partial/article.ejs` add\n\n```html\n    <!-- navigator -->\n    <% if (!index && post.toc){ %>\n      <p class=\"show-toc-btn\" id=\"show-toc-btn\" onclick=\"showToc();\" style=\"display:none\">\n            <span class=\"btn-bg\"></span>\n            <span class=\"btn-text\">...</span>\n            </p>\n      <div id=\"toc-article\" class=\"toc-article\">\n          <span id=\"toc-close\" class=\"toc-close\" title=\"hide navigator\" onclick=\"showBtn();\">×</span>\n          <strong class=\"toc-title\">navigator</strong>\n            <%- toc(post.content) %>\n          </div>\n    <script type=\"text/javascript\">\n      function showToc(){\n          var toc_article = document.getElementById(\"toc-article\");\n          var show_toc_btn = document.getElementById(\"show-toc-btn\");\n          toc_article.setAttribute(\"style\",\"display:block\");\n          show_toc_btn.setAttribute(\"style\",\"display:none\");\n          };\n      function showBtn(){\n          var toc_article = document.getElementById(\"toc-article\");\n          var show_toc_btn = document.getElementById(\"show-toc-btn\");\n          toc_article.setAttribute(\"style\",\"display:none\");\n          show_toc_btn.setAttribute(\"style\",\"display:block\");\n          };\n    </script>\n        <% } %>\n    <!-- navigator end -->\n```\n\n3.add `toc:true` to the articles that need the navigator.\n\n### Add custormize header to articles\n\nwhen run `hexo new` to initiate a new blog, a defaul head would generate, change it by\n\nchange the `scaffolds/post.md` in the `root` directory\n\n```txt\n---\ntitle: {{ title }}\ndate: {{ date }}\nauthor: daydreamatnight\ntoc: true\ndeclare: true\ntags:\n---\n```\n\n#### more headers to choose when writing a blog\n\nbefore a blog, more paras can be chosen to add\n\n```txt\n--- \ntitle: #你的博客文章名 \ntoc: ture #toc \ndate: 2020-09-07 09:25:00 #文章时间 \nauthor: GavenLee #作者 \nimg: /source/images/xxx.jpg #图片 \ntop: true #是否顶置 \ncover: true #是否在引导页轮播 \ncoverImg: /images/1.jpg #轮播图片 \npassword: #阅读密码这里被加密 \nmathjax: false #mathjax \nsummary: 这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要 \ncategories: Markdown #分类 \ntags: #标签 \nabbrlink: HexoLearn #链接 \n---\n```\n\n### Disable auto wrap in code block\n\nlocate and delete `white-space:pre-wrap` in file `themes/yilia/source/main.0cf68a.css` \n\n### Add copy button to code block\n\n1.create a `clipboard_use.js` file in directory `themes/yilia/source` \n\n```js\n$(\".highlight\").wrap(\"<div class='code-wrapper' style='position:relative'></div>\");\n/*create copy button after page loaded*/\n!function (e, t, a) {\n    /* code */\n    var initCopyCode = function () {\n        var copyHtml = '';\n        copyHtml += '<button class=\"btn-copy\" data-clipboard-snippet=\"\">';\n        copyHtml += '  <i class=\"fa fa-clipboard\"></i><span>copy</span>';\n        copyHtml += '</button>';\n        $(\".highlight .code\").before(copyHtml);\n        var clipboard = new ClipboardJS('.btn-copy', {\n            target: function (trigger) {\n                return trigger.nextElementSibling;\n            }\n        });\n        clipboard.on('success', function (e) {\n            e.trigger.innerHTML = \"<i class='fa fa-check' style='color:green'></i><span style='color:green'>copy success</span>\"\n            setTimeout(function () {\n                e.trigger.innerHTML = \"<i class='fa fa-clipboard'></i><span>copy</span>\"\n            }, 1000)\n            e.clearSelection();\n        });\n        clipboard.on('error', function (e) {\n            e.trigger.innerHTML = \"<i class='fa fa-exclamation' style='color:red'></i><span style='color:red'>copy success</span>\"\n            setTimeout(function () {\n                e.trigger.innerHTML = \"<i class='fa fa-clipboard'></i><span>copy</span>\"\n            }, 1000)\n            e.clearSelection();\n        });\n    }\n    initCopyCode();\n}(window, document);\n```\n\n2.load .js file, edit `themes/yilia/layout/layout.ejs` file, add before `</body>`. \n\n```html\n<!-- copy button in code block-->\n<script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js\"></script>\n<script type=\"text/javascript\" src=\"https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"/clipboard_use.js\"></script>\n```\n\n3.add stylesheet the end of `themes/yilia/source/main.0cf68a.css`\n\n```css\n/* code copy button */\n.btn-copy {\n  display: inline-block;\n  cursor: pointer;\n  background-color: #eee;\n  background-image: linear-gradient(#fcfcfc, #eee);\n  border: 1px solid #d5d5d5;\n  border-radius: 3px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-appearance: none;\n  font-size: 13px;\n  font-weight: 700;\n  line-height: 20px;\n  color: #333;\n  -webkit-transition: opacity .3s ease-in-out;\n  -o-transition: opacity .3s ease-in-out;\n  transition: opacity .3s ease-in-out;\n  padding: 2px 6px;\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  opacity: 0;\n}\n.btn-copy span {\n  margin-left: 5px;\n}\n.highlight:hover .btn-copy {\n  opacity: 1;\n}\n/* code copy button end */\n```\n\n4.add copy button icon, edit `themes/yilia/layout/_partia/head.ejs` add before `</head>` \n\n```html\n<!-- copy button icon -->\n<link rel=\"stylesheet\" type=\"text/css\" href=\"//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css\">\n```\n\n### Allow search engines to index this Blog\n\n#### index Google to this Blog\n\ncheck if google can find you, enter `site:daydreamatnight.github.io` to see\n\n<img src=\"check google search.png\" alt=\"check google search\" style=\"zoom:50%;\" />\n\n##### Add url to goole search console\n\n1.open [google console](https://search.google.com/search-console/welcome) , add URL link of the blog (https://daydreamatnight.github.io), in the `URL prefix` block, click `CONTINUE`\n\n<img src=\"google search console.png\" alt=\"google console\" style=\"zoom:50%;\" />\n\n2.upload the html file to the blog `root` directory and deploy the website, then clicke verify.\n\n<img src=\"google console varification.png\" alt=\"google console varification\" style=\"zoom:50%;\" />\n\nlittle buggy here, see [**don’t upload** the file **using hexo** command](https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/)\n\n##### add sitemap for google\n\nadd sitemap for google and baidu together\n\n> A *sitemap* is a file where you provide information about the pages, videos, and other files on your site, and the relationships between them. Search engines like Google read this file to more intelligently crawl your site. A sitemap tells Google which pages and files you think are important in your site, and also provides valuable information about these files: for example, for pages, when the page was last updated, how often the page is changed, and any alternate language versions of a page.\n\n1.install sitemap plugins\t\n\n```shell\n$ npm install hexo-generator-sitemap --save\n$ npm install hexo-generator-baidu-sitemap --save\n```\n\n2.add to the `_config.yml` in the blog `root` \n\n```yml\n# hexo sitemap\nsitemap:\n  path: sitemap.xml\nbaidusitemap:\n  path: baidusitemap.xml\n```\n\n3.Deploy the blog, go to  https://daydreamatnight.github.io/sitemap.xml and https://daydreamatnight.github.io/baidusitemap.xml to see if sitemaps are uploaded\n\n4.Go to Google Search Console, in the left panel, click `Sitemaps`, enter your sitemap URL `sitemap.xml` \n\n<img src=\"can't fetch sitemap.png\" alt=\"can't fetch sitemap\" style=\"zoom:50%;\" />\n\nGooglebot won't download the sitemap immediately. Give it time. \n\n##### add robots.txt\n\n> A robots.txt file tells search engine crawlers which URLs the crawler can access on your site. This is used mainly to avoid overloading your site with requests; **it is not a mechanism for keeping a web page out of Google**. To keep a web page out of Google, [block indexing with `noindex`](https://developers.google.com/search/docs/advanced/crawling/block-indexing) or password-protect the page.\n>\n> A robots.txt file is used primarily to manage crawler traffic to your site, and *usually* to keep a file off Google, depending on the file type:\n\n```txt\nUser-agent: *\nAllow: /\nAllow: /archives/\nAllow: /tags/\nAllow: /categories/\nAllow: /about/\nAllow: /guestbook/\nAllow: /others/\n\n\nDisallow: /js/\nDisallow: /css/\nDisallow: /lib/\n\nSitemap: https://daydreamatnight.github.io/sitemap.xml\nSitemap: https://daydreamatnight.github.io/baidusitemap.xml\n```\n\ndeploy the blog and wait.\n\n##### check if sitemap is available\n\nAfter uploaded several updates, my sitemap still didn't fetched by google. So I went to check, it turns out my url setting in `_config.yml` is wrong.  So I changed it to be my home url. And check it with  [URL Inspection Tool](https://www.jcchouinard.com/url-inspection-tool/). \n\n1.Open [google search console](https://search.google.com/search-console), add the url of sitemap in the upper url inspecting box.\n\n<img src=\"Google%20sitemap%20inspect.png\" alt=\"Google sitemap inspect URL is not on Google \" style=\"zoom:22%;\" />\n\n<img src=\"Google%20sitemap%20inspect%202.png\" alt=\"Google sitemap inspect 2\" style=\"zoom:22%;\" />\n\nIt's normal it shows `URL is not on Google` because it shouldn't as a sitemap.\n\n2.click `live test` to check the availability.\n\n<img src=\"Google%20sitemap%20inspect%203.png\" alt=\"Google sitemap inspect 3\" style=\"zoom:75%;\" />\n\nIt should be available, then just wait.\n\n#### index Bing to this Blog\n\n1.go to [Bing webmaster](https://www.bing.com/webmasters/) and login\n\n2.connect with google webmaster.\n\n<img src=\"bing%20sitemap.png\" alt=\"bing sitemap\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"being%20sitemap%20connect%20google.png\" alt=\"being sitemap connect google\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"bing%20search%20console%20success.png\" alt=\"bing search console success\" style=\"zoom:75%;\" />\n\n#### index baidu to this Blog(not possibly working)\n\ngo to the [baidu search console](https://ziyuan.baidu.com/site/index) , \n\n<img src=\"baidu console.png\" alt=\"baidu console\" style=\"zoom:50%;\" />\n\nClick `添加网站` and input every thing, do similar thing\n\n<img src=\"baidu console varification.png\" alt=\"baidu console varification\" style=\"zoom:50%;\" />\n\nadd sitemap\n\n<img src=\"baidu console sitemap.png\" alt=\"baidu console sitemap\" style=\"zoom:50%;\" />\n\njust wait forever, this could take 2000 years, so give up\n\n### Add copyright statement\n\n1.open file `themes/yilia/layout/_partial/article.ejs` add before `<% if ((theme.reward_type === 2 || (theme.reward_type === 1 && post.reward)) && !index){ %>`\n\n```html\n<!-- add copyright statement -->\n<% if(theme.declare){%>\n    <%- partial('post/declare') %>\n<% } %>\n<!-- end -->\n```\n\n2.create new file `declare.ejs` under `themes/yilia/layout/_partial/post/` with:\n\n```html\n<!--add copyright statement https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/c1215e132f6d5621c5fea83d3c4f7ccbcca074a3-->\n<%\n  var sUrl = url.replace(/index\\.html$/, '');\n  sUrl = /^(http:|https:)\\/\\//.test(sUrl) ? sUrl : 'https:' + sUrl;\n%>\n\n<!-- #copyright setting：0-close statement; 1-declare statement if declare: true in the article header; 2-always declare the copyright -->\n<% if ((theme.declare.declare_type === 2 || (theme.declare.declare_type === 1 && post.declare)) && !index){ %>\n  <div class=\"declare\">\n    <strong class=\"author\">author: </strong>\n    <% if(config.author != undefined){ %>\n      <%= config.author%>\n    <% }else{%>\n      <font color=\"red\">please add right \"author\" name in \"_config.yml\" in the blog root</font>\n    <%}%>\n    <br>\n    <strong class=\"create-time\">posting date: </strong>\n    <%- date(post.date, 'YYYY-MM-DD HH:MM:SS') %>\n    <br>\n    <strong class=\"update-time\">last update: </strong>\n    <%- date(post.updated, 'YYYY-MM-DD HH:MM:SS') %>\n    <br>\n    <strong class=\"article-titles\">article title: </strong>\n    <a href=\"<%= config.url %>/<%= post.path %>\" title=\"<%= post.title %>\" target=\"_blank\"><%= post.title %></a>\n    <br>\n    <strong class=\"article-url\">article link: </strong>\n    <a href=\"<%= config.url %>/<%= post.path %>\" title=\"<%= post.title %>\" target=\"_blank\"><%= config.url %>/<%= post.path %></a>\n    <br>\n    <strong class=\"copyright\">copyright:</strong>\n    This work is licensed under a\n    <a rel=\"license\" href=\"<%= theme.declare.licensee_url%>\" title=\"<%= theme.declare.licensee_alias %>\"><%= theme.declare.licensee_name%></a>\n    licience \n    <% if(theme.declare.licensee_img != undefined){ %>\n      <a rel=\"license\" href=\"<%= theme.declare.licensee_url%>\"><img alt=\"知识共享许可协议\" style=\"border-width:0\" src=\"<%= theme.declare.licensee_img%>\"/></a>\n    <% } %>\n  </div>\n<% } else {%>\n  <div class=\"declare\" hidden=\"hidden\"></div>\n<% } %>\n<!-- add copyright statement -->\n```\n\n3.add stylesheet the end of `themes/yilia/source/main.0cf68a.css` \n\n```css\n/*stylesheet for the delcare*/\n.declare {\n  background-color: #eaeaea;\n  margin-top: 2em;\n  border-left: 3px solid #ff1700;\n  padding: .5em 1em; \n}\n/*stylesheet for the delcare end*/\n```\n\n4.add at the end of `themes/yilia/_config.yml` file:\n\n```\ndeclare:\n  declare_type: 1\n  licensee_url: http://creativecommons.org/licenses/by-nc-sa/4.0/      \n  licensee_name: 'CC BY-NC-SA 4.0'                              \n  licensee_alias: 'CC BY-NC-SA 4.0'     \n  licensee_img: https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png\n```\n\n## Reference\n\nhttps://flatironschool.com/blog/the-benefits-of-blogging-how-and-why-to-keep-a-technical-blog/\n\nhttps://weblog.masukomi.org/2015/10/18/static-vs-dynamic-blogging/\n\nhttps://www.cnblogs.com/aoguai/p/11781505.html\n\nhttps://www.kblog.top/post/30452.html\n\nhttps://wkzqn.gitee.io/2020/02/16/typora%E7%BC%96%E5%86%99hexo%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/\n\nhttps://segmentfault.com/a/1190000009478837#articleHeader5\n\nhttps://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/\n\nhttps://busuanzi.ibruce.info/\n\nhttps://creativecommons.org/choose/results-one?license_code=by-nc-sa&amp;jurisdiction=&amp;version=4.0&amp;lang=en\n\nhttps://www.jcchouinard.com/sitemap-could-not-be-read-couldnt-fetch-in-google-search-console/\n\nhttps://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/","slug":"Build-and-configure-a-personal-blog-via-hexo-and-yilia","published":1,"updated":"2022-03-01T06:02:34.926Z","_id":"ckzzbfat10001miyb9ll22vr2","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>Keep updating…</p>\n</blockquote>\n<blockquote>\n<p>Technical blog has a hundred benefits and no harm</p>\n<p>This blog records the process of building and customizing this personal blog from 0 to 1</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h2 id=\"Preliminary\"><a href=\"#Preliminary\" class=\"headerlink\" title=\"Preliminary\"></a>Preliminary</h2><h3 id=\"Why-personal-blog\"><a href=\"#Why-personal-blog\" class=\"headerlink\" title=\"Why personal blog\"></a>Why personal blog</h3><blockquote>\n<p>Keeping a technical blog can be <strong>a great way of documenting your growth as a developer</strong>. This documentation can be particularly useful on a professional level. All software companies want to hire smart, thoughtful, communicative developers who can easily assimilate into a team, and who are ready to both teach and learn</p>\n</blockquote>\n<h3 id=\"Static-vs-dynamic-blog\"><a href=\"#Static-vs-dynamic-blog\" class=\"headerlink\" title=\"Static vs dynamic blog\"></a>Static vs dynamic blog</h3><p>there are 2 types of mainstream personal blog: static and dynamic.</p>\n<p>Static is recommended considering its simplicity, 0 maintenance and 0 safety worry. </p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">Static blog</th>\n<th align=\"left\">Dynamic blog</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Price</td>\n<td align=\"left\">low, 0 cost when the traffic is relatively low</td>\n<td align=\"left\">High, server is needed, cloud server of  high performance is usually very expensive.</td>\n</tr>\n<tr>\n<td align=\"left\">Features</td>\n<td align=\"left\">Limited, only third-party services can be used to complete certain “dynamic” functions, such as comments</td>\n<td align=\"left\">Rich, in WordPress for example, basically any kind of plugins can be found. Featuers such as auto-resizing, media players, multiple authors, scheduled posts, user analysis can be easily realize.</td>\n</tr>\n<tr>\n<td align=\"left\">Speed</td>\n<td align=\"left\">Fast</td>\n<td align=\"left\">Slow</td>\n</tr>\n<tr>\n<td align=\"left\">Maintainance</td>\n<td align=\"left\">0</td>\n<td align=\"left\">Need to care about the sever</td>\n</tr>\n<tr>\n<td align=\"left\">Markdown</td>\n<td align=\"left\">Supported yet it’s the only choice</td>\n<td align=\"left\">not supported</td>\n</tr>\n<tr>\n<td align=\"left\">Geeky</td>\n<td align=\"left\">YES</td>\n<td align=\"left\">No</td>\n</tr>\n</tbody></table>\n<p>And I also chose static because I’m geeky (poor of money) and results-driven (lazy to spend time on maintaining).</p>\n<h2 id=\"Build-a-static-blog-via-hexo\"><a href=\"#Build-a-static-blog-via-hexo\" class=\"headerlink\" title=\"Build a static blog via hexo\"></a>Build a static blog via hexo</h2><h3 id=\"Set-environment\"><a href=\"#Set-environment\" class=\"headerlink\" title=\"Set environment\"></a>Set environment</h3><p>1.check machine information: macOS on M1 MacBook</p>\n<p>2.Install Nodejs, including node and npm</p>\n<p>open  <a href=\"https://nodejs.org/en/download/\">https://nodejs.org/en/download/</a> and click download</p>\n<img src=\"node js install.png\" alt=\"node js install\" style=\"zoom:50%;\" />\n\n<p>3.Install Git</p>\n<p>Aready installed</p>\n<p>4.Open terminal, check node, npm and git versions</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm -v</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">node -v</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">git --version</span></span><br><span class=\"line\">8.3.1</span><br><span class=\"line\">v16.14.0</span><br><span class=\"line\">git version 2.32.0 (Apple Git-132)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Initialize-blog\"><a href=\"#Initialize-blog\" class=\"headerlink\" title=\"Initialize blog\"></a>Initialize blog</h3><p>1.install hexo via npm</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">sudo npm install -g hexo-cli</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo -v</span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">hexo: 6.0.0</span><br><span class=\"line\">hexo-cli: 4.3.0</span><br><span class=\"line\">os: darwin 21.2.0 12.1</span><br><span class=\"line\"></span><br><span class=\"line\">node: 16.14.0</span><br><span class=\"line\">v8: 9.4.146.24-node.20</span><br><span class=\"line\">uv: 1.43.0</span><br><span class=\"line\">zlib: 1.2.11</span><br><span class=\"line\">brotli: 1.0.9</span><br><span class=\"line\">ares: 1.18.1</span><br><span class=\"line\">modules: 93</span><br><span class=\"line\">nghttp2: 1.45.1</span><br><span class=\"line\">napi: 8</span><br><span class=\"line\">llhttp: 6.0.4</span><br><span class=\"line\">openssl: 1.1.1m+quic</span><br><span class=\"line\">cldr: 40.0</span><br><span class=\"line\">icu: 70.1</span><br><span class=\"line\">tz: 2021a3</span><br><span class=\"line\">unicode: 14.0</span><br><span class=\"line\">ngtcp2: 0.1.0-DEV</span><br><span class=\"line\">nghttp3: 0.1.0-DEV</span><br></pre></td></tr></table></figure>\n\n<p>2.create a new folder in terminal and initialize the blog</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\"><span class=\"built_in\">cd</span> ~/Documents/</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">makedir self_blog</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\"><span class=\"built_in\">cd</span> self_blog/</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo init</span></span><br><span class=\"line\">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitINFO  Install dependencies⸨#########⠂⠂⠂⠂⠂⠂⠂⠂⠂⸩ ⠹ idealTree:hexo-front-matter: timing idealTree:node_modules/hexo-front-matter Completed in 212msINFO  Start blogging with Hexo! </span><br></pre></td></tr></table></figure>\n\n<p>3.view the blog on localhost, s for start</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo s</span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Start processing</span><br><span class=\"line\">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Write-first-blog\"><a href=\"#Write-first-blog\" class=\"headerlink\" title=\"Write first blog\"></a>Write first blog</h3><p>1.write a new blog, n for new</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo n <span class=\"string\">&#x27;Hello ShouRou&#x27;</span></span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Created: ~/Documents/self_blog/source/_posts/Hello-ShouRou.md</span><br></pre></td></tr></table></figure>\n\n<p>the blog can be written on any editor, Typora in use.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">open ~/Documents/self_blog/source/_posts/Hello-ShouRou.md</span><br></pre></td></tr></table></figure>\n\n<p>2.clean cache(not necessary)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo clean</span></span><br></pre></td></tr></table></figure>\n\n<p>3.generate the blog, g for generate</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo g</span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Start processing</span><br><span class=\"line\">INFO  Files loaded in 61 ms</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(Use `node --trace-warnings ...` to show where the warning was created)</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br><span class=\"line\">INFO  Generated: archives/2022/index.html</span><br><span class=\"line\">INFO  Generated: archives/index.html</span><br><span class=\"line\">INFO  Generated: js/script.js</span><br><span class=\"line\">INFO  Generated: fancybox/jquery.fancybox.min.css</span><br><span class=\"line\">INFO  Generated: index.html</span><br><span class=\"line\">INFO  Generated: css/style.css</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.woff2</span><br><span class=\"line\">INFO  Generated: fancybox/jquery.fancybox.min.js</span><br><span class=\"line\">INFO  Generated: js/jquery-3.4.1.min.js</span><br><span class=\"line\">INFO  Generated: archives/2022/02/index.html</span><br><span class=\"line\">INFO  Generated: css/fonts/FontAwesome.otf</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.woff</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.eot</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.ttf</span><br><span class=\"line\">INFO  Generated: css/images/banner.jpg</span><br><span class=\"line\">INFO  Generated: 2022/02/22/hello-world/index.html</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.svg</span><br><span class=\"line\">INFO  Generated: 2022/02/22/Hello-ShouRou/index.html</span><br><span class=\"line\">INFO  18 files generated in 161 ms</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Deploy-to-remote-GitHub\"><a href=\"#Deploy-to-remote-GitHub\" class=\"headerlink\" title=\"Deploy to remote (GitHub)\"></a>Deploy to remote (GitHub)</h3><p>1.Create a new repository with the name of $username.github.io</p>\n<img src=\"github page.png\" alt=\"github page\" style=\"zoom:50%;\" />\n\n<p>use default setting</p>\n<p>2.open terminal, install plugin of deploying to git</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm install --save hexo-deployer-git</span></span><br></pre></td></tr></table></figure>\n\n<p>3.Open the <code>_config.yml</code> file in the blog <code>root</code> directory, add these lines afterwards</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"> <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\"> <span class=\"attr\">repo:</span> <span class=\"string\">git@github.com:DaydreamAtNight/DaydreamAtNight.github.io.git</span></span><br><span class=\"line\"> <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n\n<p>4.Go to the blog <code>root</code>, deploy the blog to remote, d for deploy</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo clean</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo g</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo d</span></span><br></pre></td></tr></table></figure>\n\n<p>Open <a href=\"https://daydreamatnight.github.io/\">https://daydreamatnight.github.io/</a> to see if it works</p>\n<h2 id=\"Change-theme-to-yilia\"><a href=\"#Change-theme-to-yilia\" class=\"headerlink\" title=\"Change theme to yilia\"></a>Change theme to yilia</h2><p>default theme of hexo is called landscape and it’s not beautiful enough to most of the people. Yilia is a fast, simple, elegant and popular theme. Thought it has not been updated since Nov 2017, it still a good choice for fresh bloggers.</p>\n<h3 id=\"Download-and-deploy-yilia\"><a href=\"#Download-and-deploy-yilia\" class=\"headerlink\" title=\"Download and deploy yilia\"></a>Download and deploy yilia</h3><p>1.go to the blog <code>root</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">git <span class=\"built_in\">clone</span> https://github.com/litten/hexo-theme-yilia theme/yilia</span></span><br></pre></td></tr></table></figure>\n\n<p>2.eidt the <code>_config.yml</code> file, add</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">yilia</span></span><br></pre></td></tr></table></figure>\n\n<p>3.clean and deploy hexo</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo clean</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo g</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo d</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Basic-customize-yillia\"><a href=\"#Basic-customize-yillia\" class=\"headerlink\" title=\"Basic customize yillia\"></a>Basic customize yillia</h3><h4 id=\"Activate-aboutme-‘left-slider’-button\"><a href=\"#Activate-aboutme-‘left-slider’-button\" class=\"headerlink\" title=\"Activate aboutme ‘left slider’ button\"></a>Activate <code>aboutme</code> ‘left slider’ button</h4><p>1.go to terminal run</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm i hexo-generator-json-content --save</span></span><br></pre></td></tr></table></figure>\n\n<p>2.go to the blog <code>root</code> directory, add these lines to the <code>_config.yml</code> file</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">jsonContent:</span></span><br><span class=\"line\">    <span class=\"attr\">meta:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"attr\">pages:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"attr\">posts:</span></span><br><span class=\"line\">      <span class=\"attr\">title:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">date:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">path:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">text:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">raw:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">content:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">slug:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">updated:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">comments:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">link:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">permalink:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">excerpt:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">categories:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">tags:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Customize-avatar\"><a href=\"#Customize-avatar\" class=\"headerlink\" title=\"Customize avatar\"></a>Customize avatar</h4><p>put the avatar file in directory  <code>themes/yilia/source/img</code></p>\n<blockquote>\n<p>do not add to the public repository directly, or the img get cleaned every time running <code>hexo clean</code> , need to upload to the same dir again after this command.</p>\n</blockquote>\n<h4 id=\"Set-favicon-icon-on-the-tab-of-website\"><a href=\"#Set-favicon-icon-on-the-tab-of-website\" class=\"headerlink\" title=\"Set favicon (icon on the tab of website)\"></a>Set favicon (icon on the tab of website)</h4><p>put the favicon img in directory <code>themes/yilia/source/img</code></p>\n<p><a href=\"https://www.bitbug.net/\">Bitbug</a> is a way of converting image into .ico file.</p>\n<h4 id=\"Other-configuration\"><a href=\"#Other-configuration\" class=\"headerlink\" title=\"Other configuration\"></a>Other configuration</h4><p>Set file of yillia is in <code>themes/yilia/_config.yml</code> as:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Header</span></span><br><span class=\"line\"><span class=\"attr\">author:</span> <span class=\"string\">Ryan</span> <span class=\"string\">LI</span></span><br><span class=\"line\"><span class=\"attr\">subtitle:</span> <span class=\"string\">&#x27;Daydreaming at night&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\">  <span class=\"attr\">main:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"attr\">archives:</span> <span class=\"string\">/archives/index.html</span></span><br><span class=\"line\">  <span class=\"attr\">learn:</span> <span class=\"string\">/tags/learn/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># SubNav</span></span><br><span class=\"line\"><span class=\"attr\">subnav:</span></span><br><span class=\"line\">  <span class=\"attr\">github:</span> <span class=\"string\">&quot;https://github.com/DaydreamAtNight&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># weibo: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># rss: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># zhihu: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#qq: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#weixin: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#jianshu: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#douban: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#segmentfault: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#bilibili: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#acfun: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"attr\">mail:</span> <span class=\"string\">&quot;mailto:lishoushou2019@gmail.com&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#facebook: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#google: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#twitter: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#linkedin: &quot;#&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">rss:</span> <span class=\"string\">/atom.xml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否需要修改 root 路径</span></span><br><span class=\"line\"><span class=\"comment\"># 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，</span></span><br><span class=\"line\"><span class=\"comment\"># 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。</span></span><br><span class=\"line\"><span class=\"attr\">root:</span> <span class=\"string\">/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Content</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 文章太长，截断按钮文字</span></span><br><span class=\"line\"><span class=\"comment\"># excerpt_link: more</span></span><br><span class=\"line\"><span class=\"comment\"># 文章卡片右下角常驻链接，不需要请设置为false</span></span><br><span class=\"line\"><span class=\"attr\">show_all_link:</span> <span class=\"string\">&#x27;show all&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 数学公式</span></span><br><span class=\"line\"><span class=\"attr\">mathjax:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\"># 是否在新窗口打开链接</span></span><br><span class=\"line\"><span class=\"attr\">open_in_new:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 打赏</span></span><br><span class=\"line\"><span class=\"comment\"># 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span></span><br><span class=\"line\"><span class=\"attr\">reward_type:</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># # 打赏wording</span></span><br><span class=\"line\"><span class=\"comment\"># reward_wording: &#x27;谢谢你请我吃糖果&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># # 支二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span></span><br><span class=\"line\"><span class=\"comment\"># alipay: </span></span><br><span class=\"line\"><span class=\"comment\"># # 微信二维码图片地址</span></span><br><span class=\"line\"><span class=\"comment\"># weixin: </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 目录</span></span><br><span class=\"line\"><span class=\"comment\"># 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录</span></span><br><span class=\"line\"><span class=\"attr\">toc:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\"># 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false</span></span><br><span class=\"line\"><span class=\"attr\">toc_hide_index:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># 目录为空时的提示</span></span><br><span class=\"line\"><span class=\"attr\">toc_empty_wording:</span> <span class=\"string\">&#x27;directery none exist&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否有快速回到顶部的按钮</span></span><br><span class=\"line\"><span class=\"attr\">top:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Miscellaneous</span></span><br><span class=\"line\"><span class=\"attr\">baidu_analytics:</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">google_analytics:</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">favicon:</span> <span class=\"string\">/img/favicon.ico</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#你的头像url</span></span><br><span class=\"line\"><span class=\"attr\">avatar:</span> <span class=\"string\">/img/avatar.jpeg</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#是否开启分享</span></span><br><span class=\"line\"><span class=\"comment\"># share_jia: true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment</span></span><br><span class=\"line\"><span class=\"comment\"># #不需要使用某项，直接设置值为false，或注释掉</span></span><br><span class=\"line\"><span class=\"comment\"># #具体请参考wiki：https://github.com/litten/hexo-theme-yilia/wiki/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #1、多说</span></span><br><span class=\"line\"><span class=\"comment\"># duoshuo: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #2、网易云跟帖</span></span><br><span class=\"line\"><span class=\"comment\"># wangyiyun: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #3、畅言</span></span><br><span class=\"line\"><span class=\"comment\"># changyan_appid: false</span></span><br><span class=\"line\"><span class=\"comment\"># changyan_conf: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的</span></span><br><span class=\"line\"><span class=\"comment\"># disqus: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #5、Gitment</span></span><br><span class=\"line\"><span class=\"comment\"># gitment_owner: false      #你的 GitHub ID</span></span><br><span class=\"line\"><span class=\"comment\"># gitment_repo: &#x27;&#x27;          #存储评论的 repo</span></span><br><span class=\"line\"><span class=\"comment\"># gitment_oauth:</span></span><br><span class=\"line\"><span class=\"comment\">#   client_id: &#x27;&#x27;           #client ID</span></span><br><span class=\"line\"><span class=\"comment\">#   client_secret: &#x27;&#x27;       #client secret</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 样式定制 - 一般不需要修改，除非有很强的定制欲望…</span></span><br><span class=\"line\"><span class=\"attr\">style:</span></span><br><span class=\"line\">  <span class=\"comment\"># 头像上面的背景颜色</span></span><br><span class=\"line\">  <span class=\"attr\">header:</span> <span class=\"string\">&#x27;#ece0cf&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\"># 右滑板块背景</span></span><br><span class=\"line\">  <span class=\"attr\">slider:</span> <span class=\"string\">&#x27;linear-gradient(45deg,#b4a698,#ece0cf)&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># slider的设置</span></span><br><span class=\"line\"><span class=\"attr\">slider:</span></span><br><span class=\"line\">  <span class=\"comment\"># 是否默认展开tags板块</span></span><br><span class=\"line\">  <span class=\"attr\">showTags:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 智能菜单</span></span><br><span class=\"line\"><span class=\"comment\"># 如不需要，将该对应项置为false</span></span><br><span class=\"line\"><span class=\"comment\"># 比如</span></span><br><span class=\"line\"><span class=\"comment\">#smart_menu:</span></span><br><span class=\"line\"><span class=\"comment\">#  friends: false</span></span><br><span class=\"line\"><span class=\"attr\">smart_menu:</span></span><br><span class=\"line\">  <span class=\"attr\">innerArchive:</span> <span class=\"string\">&#x27;All articles&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\"># friends: &#x27;友链&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">aboutme:</span> <span class=\"string\">&#x27;About me&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># friends:</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接1: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接2: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接3: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接4: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接5: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接6: http://localhost:4000/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">aboutme:</span> <span class=\"string\">Stay</span> <span class=\"string\">hungry,</span> <span class=\"string\">stay</span> <span class=\"string\">fullish</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Advance-customize\"><a href=\"#Advance-customize\" class=\"headerlink\" title=\"Advance customize\"></a>Advance customize</h2><h3 id=\"Stop-visit-litten-me-9005\"><a href=\"#Stop-visit-litten-me-9005\" class=\"headerlink\" title=\"Stop visit litten.me:9005\"></a>Stop visit litten.me:9005</h3><p>Sometimes the user’s client information is collected, see <a href=\"https://github.com/litten/hexo-theme-yilia/issues/528\">here</a> for details. </p>\n<p>Stop reporting by clear the contents in <code>themes/yilia/source-src/js/report.js</code></p>\n<h3 id=\"Limit-display-numbers-on-the-main-page\"><a href=\"#Limit-display-numbers-on-the-main-page\" class=\"headerlink\" title=\"Limit display numbers on the main page\"></a>Limit display numbers on the main page</h3><p>Simply insert <code>&lt;! -- more --&gt;</code> to show only what comes before it while collapse the afterwards,  click on the article title to read it in full.</p>\n<h3 id=\"Easily-add-pics-to-blogs-via-hexo-renderer-marked-plugin\"><a href=\"#Easily-add-pics-to-blogs-via-hexo-renderer-marked-plugin\" class=\"headerlink\" title=\"Easily add pics to blogs via hexo-renderer-marked plugin\"></a>Easily add pics to blogs via hexo-renderer-marked plugin</h3><p>1.find <code>post_asset_folder </code> in <code>_config.yml</code> file in the blog <code>root</code> directory, set to be true</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">post_asset_folder:true</span></span><br></pre></td></tr></table></figure>\n\n<p>2.Install plugin</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-renderer-marked --save</span><br></pre></td></tr></table></figure>\n\n<p>3.change <code>_config.yml</code> in blog <code>root</code> directory as</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">marked:</span></span><br><span class=\"line\">  <span class=\"attr\">prependRoot:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">postAsset:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>then img can be easily add with <code>![img description](img.png)</code> after add the image to the folder with the same name as the article in <code>/source/_posts/</code></p>\n<p>4.change Typora pereference as</p>\n<img src=\"typora setting.png\" alt=\"typora setting\" style=\"zoom:50%;\" />\n\n<p>img can drag into typro, yet blogname need to be deleted before deploying</p>\n<h3 id=\"Show-number-of-articles-and-words-on-the-left-panel\"><a href=\"#Show-number-of-articles-and-words-on-the-left-panel\" class=\"headerlink\" title=\"Show number of articles and words on the left panel\"></a>Show number of articles and words on the left panel</h3><p>1.add wordcount plugin in terminal</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i --save hexo-wordcount</span><br></pre></td></tr></table></figure>\n\n<p>2.change <code>themes/yilia/layout/_partial/left-col.ejs</code> </p>\n<p>after</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;header-menu&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    &lt;% for (var i in theme.menu)&#123; %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%- url_for(theme.menu[i]) %&gt;&quot;</span>&gt;</span>&lt;%= i %&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    &lt;%&#125;%&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>add</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;post-count&quot;</span>&gt;</span>&lt;%=site.posts.length%&gt; articles</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&lt;%= totalcount(site, &#x27;0,0.0a&#x27;) %&gt;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> words<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>add style sheet in <code>themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.post-count&#123;</span><br><span class=\"line\">  font-size: 12px;</span><br><span class=\"line\">  color: #696969;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Show-number-of-visits-in-the-footer\"><a href=\"#Show-number-of-visits-in-the-footer\" class=\"headerlink\" title=\"Show number of visits in the footer\"></a>Show number of visits in the footer</h3><p><a href=\"https://busuanzi.ibruce.info/\">busuanzi</a> is in use, which is super easy to deploy</p>\n<p>change <code>themes/yilia/layout/_partial/footer.ejs</code> as</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">footer</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;footer&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;footer-info&quot;</span>&gt;</span></span><br><span class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;footer-left&quot;</span>&gt;</span></span><br><span class=\"line\">    \t\t<span class=\"comment\">&lt;!-- total visits number --&gt;</span></span><br><span class=\"line\">          &lt;% if (theme.busuanzi &amp;&amp; theme.busuanzi.enable)&#123; %&gt;</span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- busuanzi statistics --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"symbol\">&amp;nbsp;</span>visits in total</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">          &lt;% &#125; %&gt;</span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- end --&gt;</span></span><br><span class=\"line\">    \t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      \t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;footer-right&quot;</span>&gt;</span></span><br><span class=\"line\">      \t\t<span class=\"symbol\">&amp;copy;</span> &lt;%= date(new Date(), &#x27;YYYY&#x27;) %&gt; &lt;%= config.author || config.title %&gt;</span><br><span class=\"line\">      \t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>and add </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">busuanzi:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Add-button-of-hiding-the-left-panel\"><a href=\"#Add-button-of-hiding-the-left-panel\" class=\"headerlink\" title=\"Add button of hiding the left panel\"></a>Add button of hiding the left panel</h3><p>Refer to  <a href=\"https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/\">hexo yilia主题添加隐藏左边栏目按钮</a>  </p>\n<p>1.add style list to file <code>/themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*stylesheet for hide the left panel*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.mymenucontainer</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>:block;</span><br><span class=\"line\">\t<span class=\"attribute\">cursor</span>:pointer;</span><br><span class=\"line\">\t<span class=\"attribute\">left</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">top</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">z-index</span>:<span class=\"number\">9999</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">position</span>:fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bar1</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>:<span class=\"number\">#8E6D51</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">6px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">transition</span>:<span class=\"number\">0.1s</span>;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(-<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">8px</span>,<span class=\"number\">8px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(-<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">8px</span>,<span class=\"number\">8px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bar2</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>:<span class=\"number\">#8E6D51</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">6px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">transition</span>:<span class=\"number\">0.1s</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bar3</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>:<span class=\"number\">#8E6D51</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">6px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">transition</span>:<span class=\"number\">0.1s</span>;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">4px</span>,-<span class=\"number\">6px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">4px</span>,-<span class=\"number\">6px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.change</span> <span class=\"selector-class\">.bar1</span> &#123;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.change</span> <span class=\"selector-class\">.bar2</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.change</span> <span class=\"selector-class\">.bar3</span> &#123;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*stylesheet for hide the left panel end*/</span></span><br></pre></td></tr></table></figure>\n\n<p>2.go to <code>/themes/yilia/layout/layout.ejs</code> add before <code> &lt;div class=&quot;left-col&quot; </code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mymenucontainer&quot;</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;myFunction(this)&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bar1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bar2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bar3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add between <code>&lt;/body&gt;</code> and <code>&lt;/html&gt;</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> hide = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">myFunction</span>(<span class=\"params\">x</span>) &#123;</span><br><span class=\"line\">        x.<span class=\"property\">classList</span>.<span class=\"title function_\">toggle</span>(<span class=\"string\">&quot;change&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(hide == <span class=\"literal\">false</span>)&#123;</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.left-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;none&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.mid-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&quot;left&quot;</span>, <span class=\"number\">6</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;none&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col.hide&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;none&#x27;</span>);</span><br><span class=\"line\">            hide = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.left-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.mid-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&quot;left&quot;</span>, <span class=\"number\">300</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col.hide&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">            hide = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"Beautiful-contents-navigation-in-articles\"><a href=\"#Beautiful-contents-navigation-in-articles\" class=\"headerlink\" title=\"Beautiful contents navigation in articles\"></a>Beautiful contents navigation in articles</h3><p>Default navigator is kind of ugly so found a more beautiful version, to use default version, simply change <code>toc: 2</code> in file <code>themes/yilia/_config.yml</code></p>\n<p>1.add this block at the end of <code>themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* navigator */</span></span><br><span class=\"line\"><span class=\"selector-id\">#container</span> <span class=\"selector-class\">.show-toc-btn</span>,<span class=\"selector-id\">#container</span> <span class=\"selector-class\">.toc-article</span>&#123;<span class=\"attribute\">display</span>:block&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.toc-article</span>&#123;<span class=\"attribute\">z-index</span>:<span class=\"number\">100</span>;<span class=\"attribute\">background</span>:<span class=\"number\">#fff</span>;<span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;<span class=\"attribute\">max-width</span>:<span class=\"number\">250px</span>;<span class=\"attribute\">min-width</span>:<span class=\"number\">150px</span>;<span class=\"attribute\">max-height</span>:<span class=\"number\">500px</span>;<span class=\"attribute\">overflow-y</span>:auto;-webkit-<span class=\"attribute\">box-shadow</span>:<span class=\"number\">5px</span> <span class=\"number\">5px</span> <span class=\"number\">2px</span> <span class=\"number\">#ccc</span>;<span class=\"attribute\">box-shadow</span>:<span class=\"number\">5px</span> <span class=\"number\">5px</span> <span class=\"number\">2px</span> <span class=\"number\">#ccc</span>;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>;<span class=\"attribute\">padding</span>:<span class=\"number\">10px</span>;<span class=\"attribute\">position</span>:fixed;<span class=\"attribute\">right</span>:<span class=\"number\">35px</span>;<span class=\"attribute\">top</span>:<span class=\"number\">129px</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-close</span>&#123;<span class=\"attribute\">font-weight</span>:<span class=\"number\">700</span>;<span class=\"attribute\">font-size</span>:<span class=\"number\">20px</span>;<span class=\"attribute\">cursor</span>:pointer;<span class=\"attribute\">float</span><span class=\"selector-pseudo\">:right</span>;<span class=\"attribute\">color</span>:<span class=\"number\">#ccc</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-close</span><span class=\"selector-pseudo\">:hover</span>&#123;<span class=\"attribute\">color</span>:<span class=\"number\">#000</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc</span>&#123;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>;<span class=\"attribute\">padding</span>:<span class=\"number\">0</span>;<span class=\"attribute\">line-height</span>:<span class=\"number\">20px</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc</span> <span class=\"selector-class\">.toc-number</span>&#123;<span class=\"attribute\">color</span>:<span class=\"number\">#333</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc</span> <span class=\"selector-class\">.toc-text</span><span class=\"selector-pseudo\">:hover</span>&#123;<span class=\"attribute\">text-decoration</span>:underline;<span class=\"attribute\">color</span>:<span class=\"number\">#2a6496</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">li</span>&#123;<span class=\"attribute\">list-style-type</span>:none&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-level-1</span>&#123;<span class=\"attribute\">margin</span>:<span class=\"number\">4px</span> <span class=\"number\">0</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-child</span>&#123;&#125;<span class=\"keyword\">@-moz-keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"keyword\">@-webkit-keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"keyword\">@-o-keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"keyword\">@keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"selector-class\">.show-toc-btn</span>&#123;<span class=\"attribute\">display</span>:none;<span class=\"attribute\">z-index</span>:<span class=\"number\">10</span>;<span class=\"attribute\">width</span>:<span class=\"number\">30px</span>;<span class=\"attribute\">min-height</span>:<span class=\"number\">14px</span>;<span class=\"attribute\">overflow</span>:hidden;<span class=\"attribute\">padding</span>:<span class=\"number\">4px</span> <span class=\"number\">6px</span> <span class=\"number\">8px</span> <span class=\"number\">5px</span>;<span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid <span class=\"number\">#ddd</span>;<span class=\"attribute\">border-right</span>:none;<span class=\"attribute\">position</span>:fixed;<span class=\"attribute\">right</span>:<span class=\"number\">40px</span>;<span class=\"attribute\">text-align</span>:center;<span class=\"attribute\">background-color</span>:<span class=\"number\">#f9f9f9</span>&#125;<span class=\"selector-class\">.show-toc-btn</span> <span class=\"selector-class\">.btn-bg</span>&#123;<span class=\"attribute\">margin-top</span>:<span class=\"number\">2px</span>;<span class=\"attribute\">display</span>:block;<span class=\"attribute\">width</span>:<span class=\"number\">16px</span>;<span class=\"attribute\">height</span>:<span class=\"number\">14px</span>;<span class=\"attribute\">background</span>:<span class=\"built_in\">url</span>(<span class=\"string\">http://7xtawy.com1.z0.glb.clouddn.com/show.png</span>) no-repeat;-webkit-<span class=\"attribute\">background-size</span>:<span class=\"number\">100%</span>;-moz-<span class=\"attribute\">background-size</span>:<span class=\"number\">100%</span>;<span class=\"attribute\">background-size</span>:<span class=\"number\">100%</span>&#125;<span class=\"selector-class\">.show-toc-btn</span> <span class=\"selector-class\">.btn-text</span>&#123;<span class=\"attribute\">color</span>:<span class=\"number\">#999</span>;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>&#125;<span class=\"selector-class\">.show-toc-btn</span><span class=\"selector-pseudo\">:hover</span>&#123;<span class=\"attribute\">cursor</span>:pointer&#125;<span class=\"selector-class\">.show-toc-btn</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-bg</span>&#123;<span class=\"attribute\">background-position</span>:<span class=\"number\">0</span> -<span class=\"number\">16px</span>&#125;<span class=\"selector-class\">.show-toc-btn</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-text</span>&#123;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>;<span class=\"attribute\">color</span>:<span class=\"number\">#ea8010</span>&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">li</span> <span class=\"selector-tag\">ol</span>, <span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">li</span> <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">ol</span>, <span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2.after <code>&lt;/header&gt;&lt;% &#125; %&gt;</code> in file <code>themes/yilia/layout/_partial/article.ejs</code> add</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- navigator --&gt;</span></span><br><span class=\"line\">&lt;% if (!index &amp;&amp; post.toc)&#123; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;show-toc-btn&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;show-toc-btn&quot;</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;showToc();&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;display:none&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-bg&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-text&quot;</span>&gt;</span>...<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;toc-article&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;toc-article&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;toc-close&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;toc-close&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;hide navigator&quot;</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;showBtn();&quot;</span>&gt;</span>×<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;toc-title&quot;</span>&gt;</span>navigator<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">        &lt;%- toc(post.content) %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">function</span> <span class=\"title function_\">showToc</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> toc_article = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;toc-article&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> show_toc_btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;show-toc-btn&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      toc_article.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:block&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      show_toc_btn.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:none&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">function</span> <span class=\"title function_\">showBtn</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> toc_article = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;toc-article&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> show_toc_btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;show-toc-btn&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      toc_article.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:none&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      show_toc_btn.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:block&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    &lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- navigator end --&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add <code>toc:true</code> to the articles that need the navigator.</p>\n<h3 id=\"Add-custormize-header-to-articles\"><a href=\"#Add-custormize-header-to-articles\" class=\"headerlink\" title=\"Add custormize header to articles\"></a>Add custormize header to articles</h3><p>when run <code>hexo new</code> to initiate a new blog, a defaul head would generate, change it by</p>\n<p>change the <code>scaffolds/post.md</code> in the <code>root</code> directory</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: &#123;&#123; title &#125;&#125;</span><br><span class=\"line\">date: &#123;&#123; date &#125;&#125;</span><br><span class=\"line\">author: daydreamatnight</span><br><span class=\"line\">toc: true</span><br><span class=\"line\">declare: true</span><br><span class=\"line\">tags:</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"more-headers-to-choose-when-writing-a-blog\"><a href=\"#more-headers-to-choose-when-writing-a-blog\" class=\"headerlink\" title=\"more headers to choose when writing a blog\"></a>more headers to choose when writing a blog</h4><p>before a blog, more paras can be chosen to add</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--- </span><br><span class=\"line\">title: #你的博客文章名 </span><br><span class=\"line\">toc: ture #toc </span><br><span class=\"line\">date: 2020-09-07 09:25:00 #文章时间 </span><br><span class=\"line\">author: GavenLee #作者 </span><br><span class=\"line\">img: /source/images/xxx.jpg #图片 </span><br><span class=\"line\">top: true #是否顶置 </span><br><span class=\"line\">cover: true #是否在引导页轮播 </span><br><span class=\"line\">coverImg: /images/1.jpg #轮播图片 </span><br><span class=\"line\">password: #阅读密码这里被加密 </span><br><span class=\"line\">mathjax: false #mathjax </span><br><span class=\"line\">summary: 这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要 </span><br><span class=\"line\">categories: Markdown #分类 </span><br><span class=\"line\">tags: #标签 </span><br><span class=\"line\">abbrlink: HexoLearn #链接 </span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Disable-auto-wrap-in-code-block\"><a href=\"#Disable-auto-wrap-in-code-block\" class=\"headerlink\" title=\"Disable auto wrap in code block\"></a>Disable auto wrap in code block</h3><p>locate and delete <code>white-space:pre-wrap</code> in file <code>themes/yilia/source/main.0cf68a.css</code> </p>\n<h3 id=\"Add-copy-button-to-code-block\"><a href=\"#Add-copy-button-to-code-block\" class=\"headerlink\" title=\"Add copy button to code block\"></a>Add copy button to code block</h3><p>1.create a <code>clipboard_use.js</code> file in directory <code>themes/yilia/source</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&quot;.highlight&quot;</span>).<span class=\"title function_\">wrap</span>(<span class=\"string\">&quot;&lt;div class=&#x27;code-wrapper&#x27; style=&#x27;position:relative&#x27;&gt;&lt;/div&gt;&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">/*create copy button after page loaded*/</span></span><br><span class=\"line\">!<span class=\"keyword\">function</span> (<span class=\"params\">e, t, a</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* code */</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> initCopyCode = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> copyHtml = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        copyHtml += <span class=\"string\">&#x27;&lt;button class=&quot;btn-copy&quot; data-clipboard-snippet=&quot;&quot;&gt;&#x27;</span>;</span><br><span class=\"line\">        copyHtml += <span class=\"string\">&#x27;  &lt;i class=&quot;fa fa-clipboard&quot;&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;&#x27;</span>;</span><br><span class=\"line\">        copyHtml += <span class=\"string\">&#x27;&lt;/button&gt;&#x27;</span>;</span><br><span class=\"line\">        $(<span class=\"string\">&quot;.highlight .code&quot;</span>).<span class=\"title function_\">before</span>(copyHtml);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> clipboard = <span class=\"keyword\">new</span> <span class=\"title class_\">ClipboardJS</span>(<span class=\"string\">&#x27;.btn-copy&#x27;</span>, &#123;</span><br><span class=\"line\">            <span class=\"attr\">target</span>: <span class=\"keyword\">function</span> (<span class=\"params\">trigger</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> trigger.<span class=\"property\">nextElementSibling</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        clipboard.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;success&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">            e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-check&#x27; style=&#x27;color:green&#x27;&gt;&lt;/i&gt;&lt;span style=&#x27;color:green&#x27;&gt;copy success&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">            e.<span class=\"title function_\">clearSelection</span>();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        clipboard.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;error&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">            e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-exclamation&#x27; style=&#x27;color:red&#x27;&gt;&lt;/i&gt;&lt;span style=&#x27;color:red&#x27;&gt;copy success&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">            e.<span class=\"title function_\">clearSelection</span>();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">initCopyCode</span>();</span><br><span class=\"line\">&#125;(<span class=\"variable language_\">window</span>, <span class=\"variable language_\">document</span>);</span><br></pre></td></tr></table></figure>\n\n<p>2.load .js file, edit <code>themes/yilia/layout/layout.ejs</code> file, add before <code>&lt;/body&gt;</code>. </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- copy button in code block--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/clipboard_use.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add stylesheet the end of <code>themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* code copy button */</span></span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#eee</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">linear-gradient</span>(<span class=\"number\">#fcfcfc</span>, <span class=\"number\">#eee</span>);</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d5d5d5</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">  -webkit-user-select: none;</span><br><span class=\"line\">  -moz-user-select: none;</span><br><span class=\"line\">  -ms-user-select: none;</span><br><span class=\"line\">  user-select: none;</span><br><span class=\"line\">  -webkit-appearance: none;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">13px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: <span class=\"number\">700</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transition</span>: opacity .<span class=\"number\">3s</span> ease-in-out;</span><br><span class=\"line\">  -o-<span class=\"attribute\">transition</span>: opacity .<span class=\"number\">3s</span> ease-in-out;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: opacity .<span class=\"number\">3s</span> ease-in-out;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">2px</span> <span class=\"number\">6px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.highlight</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* code copy button end */</span></span><br></pre></td></tr></table></figure>\n\n<p>4.add copy button icon, edit <code>themes/yilia/layout/_partia/head.ejs</code> add before <code>&lt;/head&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- copy button icon --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/css&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Allow-search-engines-to-index-this-Blog\"><a href=\"#Allow-search-engines-to-index-this-Blog\" class=\"headerlink\" title=\"Allow search engines to index this Blog\"></a>Allow search engines to index this Blog</h3><h4 id=\"index-Google-to-this-Blog\"><a href=\"#index-Google-to-this-Blog\" class=\"headerlink\" title=\"index Google to this Blog\"></a>index Google to this Blog</h4><p>check if google can find you, enter <code>site:daydreamatnight.github.io</code> to see</p>\n<img src=\"check google search.png\" alt=\"check google search\" style=\"zoom:50%;\" />\n\n<h5 id=\"Add-url-to-goole-search-console\"><a href=\"#Add-url-to-goole-search-console\" class=\"headerlink\" title=\"Add url to goole search console\"></a>Add url to goole search console</h5><p>1.open <a href=\"https://search.google.com/search-console/welcome\">google console</a> , add URL link of the blog (<a href=\"https://daydreamatnight.github.io/\">https://daydreamatnight.github.io</a>), in the <code>URL prefix</code> block, click <code>CONTINUE</code></p>\n<img src=\"google search console.png\" alt=\"google console\" style=\"zoom:50%;\" />\n\n<p>2.upload the html file to the blog <code>root</code> directory and deploy the website, then clicke verify.</p>\n<img src=\"google console varification.png\" alt=\"google console varification\" style=\"zoom:50%;\" />\n\n<p>little buggy here, see <a href=\"https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/\"><strong>don’t upload</strong> the file <strong>using hexo</strong> command</a></p>\n<h5 id=\"add-sitemap-for-google\"><a href=\"#add-sitemap-for-google\" class=\"headerlink\" title=\"add sitemap for google\"></a>add sitemap for google</h5><p>add sitemap for google and baidu together</p>\n<blockquote>\n<p>A <em>sitemap</em> is a file where you provide information about the pages, videos, and other files on your site, and the relationships between them. Search engines like Google read this file to more intelligently crawl your site. A sitemap tells Google which pages and files you think are important in your site, and also provides valuable information about these files: for example, for pages, when the page was last updated, how often the page is changed, and any alternate language versions of a page.</p>\n</blockquote>\n<p>1.install sitemap plugins    </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm install hexo-generator-sitemap --save</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm install hexo-generator-baidu-sitemap --save</span></span><br></pre></td></tr></table></figure>\n\n<p>2.add to the <code>_config.yml</code> in the blog <code>root</code> </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># hexo sitemap</span></span><br><span class=\"line\"><span class=\"attr\">sitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">sitemap.xml</span></span><br><span class=\"line\"><span class=\"attr\">baidusitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">baidusitemap.xml</span></span><br></pre></td></tr></table></figure>\n\n<p>3.Deploy the blog, go to  <a href=\"https://daydreamatnight.github.io/sitemap.xml\">https://daydreamatnight.github.io/sitemap.xml</a> and <a href=\"https://daydreamatnight.github.io/baidusitemap.xml\">https://daydreamatnight.github.io/baidusitemap.xml</a> to see if sitemaps are uploaded</p>\n<p>4.Go to Google Search Console, in the left panel, click <code>Sitemaps</code>, enter your sitemap URL <code>sitemap.xml</code> </p>\n<img src=\"can't fetch sitemap.png\" alt=\"can't fetch sitemap\" style=\"zoom:50%;\" />\n\n<p>Googlebot won’t download the sitemap immediately. Give it time. </p>\n<h5 id=\"add-robots-txt\"><a href=\"#add-robots-txt\" class=\"headerlink\" title=\"add robots.txt\"></a>add robots.txt</h5><blockquote>\n<p>A robots.txt file tells search engine crawlers which URLs the crawler can access on your site. This is used mainly to avoid overloading your site with requests; <strong>it is not a mechanism for keeping a web page out of Google</strong>. To keep a web page out of Google, <a href=\"https://developers.google.com/search/docs/advanced/crawling/block-indexing\">block indexing with <code>noindex</code></a> or password-protect the page.</p>\n<p>A robots.txt file is used primarily to manage crawler traffic to your site, and <em>usually</em> to keep a file off Google, depending on the file type:</p>\n</blockquote>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User-agent: *</span><br><span class=\"line\">Allow: /</span><br><span class=\"line\">Allow: /archives/</span><br><span class=\"line\">Allow: /tags/</span><br><span class=\"line\">Allow: /categories/</span><br><span class=\"line\">Allow: /about/</span><br><span class=\"line\">Allow: /guestbook/</span><br><span class=\"line\">Allow: /others/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Disallow: /js/</span><br><span class=\"line\">Disallow: /css/</span><br><span class=\"line\">Disallow: /lib/</span><br><span class=\"line\"></span><br><span class=\"line\">Sitemap: https://daydreamatnight.github.io/sitemap.xml</span><br><span class=\"line\">Sitemap: https://daydreamatnight.github.io/baidusitemap.xml</span><br></pre></td></tr></table></figure>\n\n<p>deploy the blog and wait.</p>\n<h5 id=\"check-if-sitemap-is-available\"><a href=\"#check-if-sitemap-is-available\" class=\"headerlink\" title=\"check if sitemap is available\"></a>check if sitemap is available</h5><p>After uploaded several updates, my sitemap still didn’t fetched by google. So I went to check, it turns out my url setting in <code>_config.yml</code> is wrong.  So I changed it to be my home url. And check it with  <a href=\"https://www.jcchouinard.com/url-inspection-tool/\">URL Inspection Tool</a>. </p>\n<p>1.Open <a href=\"https://search.google.com/search-console\">google search console</a>, add the url of sitemap in the upper url inspecting box.</p>\n<img src=\"Google%20sitemap%20inspect.png\" alt=\"Google sitemap inspect URL is not on Google \" style=\"zoom:22%;\" />\n\n<img src=\"Google%20sitemap%20inspect%202.png\" alt=\"Google sitemap inspect 2\" style=\"zoom:22%;\" />\n\n<p>It’s normal it shows <code>URL is not on Google</code> because it shouldn’t as a sitemap.</p>\n<p>2.click <code>live test</code> to check the availability.</p>\n<img src=\"Google%20sitemap%20inspect%203.png\" alt=\"Google sitemap inspect 3\" style=\"zoom:75%;\" />\n\n<p>It should be available, then just wait.</p>\n<h4 id=\"index-Bing-to-this-Blog\"><a href=\"#index-Bing-to-this-Blog\" class=\"headerlink\" title=\"index Bing to this Blog\"></a>index Bing to this Blog</h4><p>1.go to <a href=\"https://www.bing.com/webmasters/\">Bing webmaster</a> and login</p>\n<p>2.connect with google webmaster.</p>\n<img src=\"bing%20sitemap.png\" alt=\"bing sitemap\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"being%20sitemap%20connect%20google.png\" alt=\"being sitemap connect google\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"bing%20search%20console%20success.png\" alt=\"bing search console success\" style=\"zoom:75%;\" />\n\n<h4 id=\"index-baidu-to-this-Blog-not-possibly-working\"><a href=\"#index-baidu-to-this-Blog-not-possibly-working\" class=\"headerlink\" title=\"index baidu to this Blog(not possibly working)\"></a>index baidu to this Blog(not possibly working)</h4><p>go to the <a href=\"https://ziyuan.baidu.com/site/index\">baidu search console</a> , </p>\n<img src=\"baidu console.png\" alt=\"baidu console\" style=\"zoom:50%;\" />\n\n<p>Click <code>添加网站</code> and input every thing, do similar thing</p>\n<img src=\"baidu console varification.png\" alt=\"baidu console varification\" style=\"zoom:50%;\" />\n\n<p>add sitemap</p>\n<img src=\"baidu console sitemap.png\" alt=\"baidu console sitemap\" style=\"zoom:50%;\" />\n\n<p>just wait forever, this could take 2000 years, so give up</p>\n<h3 id=\"Add-copyright-statement\"><a href=\"#Add-copyright-statement\" class=\"headerlink\" title=\"Add copyright statement\"></a>Add copyright statement</h3><p>1.open file <code>themes/yilia/layout/_partial/article.ejs</code> add before <code>&lt;% if ((theme.reward_type === 2 || (theme.reward_type === 1 &amp;&amp; post.reward)) &amp;&amp; !index)&#123; %&gt;</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- add copyright statement --&gt;</span></span><br><span class=\"line\">&lt;% if(theme.declare)&#123;%&gt;</span><br><span class=\"line\">    &lt;%- partial(&#x27;post/declare&#x27;) %&gt;</span><br><span class=\"line\">&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- end --&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>2.create new file <code>declare.ejs</code> under <code>themes/yilia/layout/_partial/post/</code> with:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--add copyright statement https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/c1215e132f6d5621c5fea83d3c4f7ccbcca074a3--&gt;</span></span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  var sUrl = url.replace(/index\\.html$/, &#x27;&#x27;);</span><br><span class=\"line\">  sUrl = /^(http:|https:)\\/\\//.test(sUrl) ? sUrl : &#x27;https:&#x27; + sUrl;</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- #copyright setting：0-close statement; 1-declare statement if declare: true in the article header; 2-always declare the copyright --&gt;</span></span><br><span class=\"line\">&lt;% if ((theme.declare.declare_type === 2 || (theme.declare.declare_type === 1 &amp;&amp; post.declare)) &amp;&amp; !index)&#123; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;declare&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;author&quot;</span>&gt;</span>author: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    &lt;% if(config.author != undefined)&#123; %&gt;</span><br><span class=\"line\">      &lt;%= config.author%&gt;</span><br><span class=\"line\">    &lt;% &#125;else&#123;%&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">&quot;red&quot;</span>&gt;</span>please add right &quot;author&quot; name in &quot;_config.yml&quot; in the blog root<span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></span><br><span class=\"line\">    &lt;%&#125;%&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;create-time&quot;</span>&gt;</span>posting date: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    &lt;%- date(post.date, &#x27;YYYY-MM-DD HH:MM:SS&#x27;) %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;update-time&quot;</span>&gt;</span>last update: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    &lt;%- date(post.updated, &#x27;YYYY-MM-DD HH:MM:SS&#x27;) %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;article-titles&quot;</span>&gt;</span>article title: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= config.url %&gt;/&lt;%= post.path %&gt;&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;&lt;%= post.title %&gt;&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span>&gt;</span>&lt;%= post.title %&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;article-url&quot;</span>&gt;</span>article link: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= config.url %&gt;/&lt;%= post.path %&gt;&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;&lt;%= post.title %&gt;&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span>&gt;</span>&lt;%= config.url %&gt;/&lt;%= post.path %&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;copyright&quot;</span>&gt;</span>copyright:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    This work is licensed under a</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;license&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_url%&gt;&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_alias %&gt;&quot;</span>&gt;</span>&lt;%= theme.declare.licensee_name%&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    licience </span><br><span class=\"line\">    &lt;% if(theme.declare.licensee_img != undefined)&#123; %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;license&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_url%&gt;&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;知识共享许可协议&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;border-width:0&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_img%&gt;&quot;</span>/&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    &lt;% &#125; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; else &#123;%&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;declare&quot;</span> <span class=\"attr\">hidden</span>=<span class=\"string\">&quot;hidden&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- add copyright statement --&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add stylesheet the end of <code>themes/yilia/source/main.0cf68a.css</code> </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*stylesheet for the delcare*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.declare</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#eaeaea</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">2em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-left</span>: <span class=\"number\">3px</span> solid <span class=\"number\">#ff1700</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: .<span class=\"number\">5em</span> <span class=\"number\">1em</span>; </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*stylesheet for the delcare end*/</span></span><br></pre></td></tr></table></figure>\n\n<p>4.add at the end of <code>themes/yilia/_config.yml</code> file:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare:</span><br><span class=\"line\">  declare_type: 1</span><br><span class=\"line\">  licensee_url: http://creativecommons.org/licenses/by-nc-sa/4.0/      </span><br><span class=\"line\">  licensee_name: &#x27;CC BY-NC-SA 4.0&#x27;                              </span><br><span class=\"line\">  licensee_alias: &#x27;CC BY-NC-SA 4.0&#x27;     </span><br><span class=\"line\">  licensee_img: https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p><a href=\"https://flatironschool.com/blog/the-benefits-of-blogging-how-and-why-to-keep-a-technical-blog/\">https://flatironschool.com/blog/the-benefits-of-blogging-how-and-why-to-keep-a-technical-blog/</a></p>\n<p><a href=\"https://weblog.masukomi.org/2015/10/18/static-vs-dynamic-blogging/\">https://weblog.masukomi.org/2015/10/18/static-vs-dynamic-blogging/</a></p>\n<p><a href=\"https://www.cnblogs.com/aoguai/p/11781505.html\">https://www.cnblogs.com/aoguai/p/11781505.html</a></p>\n<p><a href=\"https://www.kblog.top/post/30452.html\">https://www.kblog.top/post/30452.html</a></p>\n<p><a href=\"https://wkzqn.gitee.io/2020/02/16/typora%E7%BC%96%E5%86%99hexo%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/\">https://wkzqn.gitee.io/2020/02/16/typora%E7%BC%96%E5%86%99hexo%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000009478837#articleHeader5\">https://segmentfault.com/a/1190000009478837#articleHeader5</a></p>\n<p><a href=\"https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/\">https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/</a></p>\n<p><a href=\"https://busuanzi.ibruce.info/\">https://busuanzi.ibruce.info/</a></p>\n<p><a href=\"https://creativecommons.org/choose/results-one?license_code=by-nc-sa&amp;jurisdiction=&amp;version=4.0&amp;lang=en\">https://creativecommons.org/choose/results-one?license_code=by-nc-sa&amp;jurisdiction=&amp;version=4.0&amp;lang=en</a></p>\n<p><a href=\"https://www.jcchouinard.com/sitemap-could-not-be-read-couldnt-fetch-in-google-search-console/\">https://www.jcchouinard.com/sitemap-could-not-be-read-couldnt-fetch-in-google-search-console/</a></p>\n<p><a href=\"https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/\">https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>Keep updating…</p>\n</blockquote>\n<blockquote>\n<p>Technical blog has a hundred benefits and no harm</p>\n<p>This blog records the process of building and customizing this personal blog from 0 to 1</p>\n</blockquote>","more":"<h2 id=\"Preliminary\"><a href=\"#Preliminary\" class=\"headerlink\" title=\"Preliminary\"></a>Preliminary</h2><h3 id=\"Why-personal-blog\"><a href=\"#Why-personal-blog\" class=\"headerlink\" title=\"Why personal blog\"></a>Why personal blog</h3><blockquote>\n<p>Keeping a technical blog can be <strong>a great way of documenting your growth as a developer</strong>. This documentation can be particularly useful on a professional level. All software companies want to hire smart, thoughtful, communicative developers who can easily assimilate into a team, and who are ready to both teach and learn</p>\n</blockquote>\n<h3 id=\"Static-vs-dynamic-blog\"><a href=\"#Static-vs-dynamic-blog\" class=\"headerlink\" title=\"Static vs dynamic blog\"></a>Static vs dynamic blog</h3><p>there are 2 types of mainstream personal blog: static and dynamic.</p>\n<p>Static is recommended considering its simplicity, 0 maintenance and 0 safety worry. </p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">Static blog</th>\n<th align=\"left\">Dynamic blog</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Price</td>\n<td align=\"left\">low, 0 cost when the traffic is relatively low</td>\n<td align=\"left\">High, server is needed, cloud server of  high performance is usually very expensive.</td>\n</tr>\n<tr>\n<td align=\"left\">Features</td>\n<td align=\"left\">Limited, only third-party services can be used to complete certain “dynamic” functions, such as comments</td>\n<td align=\"left\">Rich, in WordPress for example, basically any kind of plugins can be found. Featuers such as auto-resizing, media players, multiple authors, scheduled posts, user analysis can be easily realize.</td>\n</tr>\n<tr>\n<td align=\"left\">Speed</td>\n<td align=\"left\">Fast</td>\n<td align=\"left\">Slow</td>\n</tr>\n<tr>\n<td align=\"left\">Maintainance</td>\n<td align=\"left\">0</td>\n<td align=\"left\">Need to care about the sever</td>\n</tr>\n<tr>\n<td align=\"left\">Markdown</td>\n<td align=\"left\">Supported yet it’s the only choice</td>\n<td align=\"left\">not supported</td>\n</tr>\n<tr>\n<td align=\"left\">Geeky</td>\n<td align=\"left\">YES</td>\n<td align=\"left\">No</td>\n</tr>\n</tbody></table>\n<p>And I also chose static because I’m geeky (poor of money) and results-driven (lazy to spend time on maintaining).</p>\n<h2 id=\"Build-a-static-blog-via-hexo\"><a href=\"#Build-a-static-blog-via-hexo\" class=\"headerlink\" title=\"Build a static blog via hexo\"></a>Build a static blog via hexo</h2><h3 id=\"Set-environment\"><a href=\"#Set-environment\" class=\"headerlink\" title=\"Set environment\"></a>Set environment</h3><p>1.check machine information: macOS on M1 MacBook</p>\n<p>2.Install Nodejs, including node and npm</p>\n<p>open  <a href=\"https://nodejs.org/en/download/\">https://nodejs.org/en/download/</a> and click download</p>\n<img src=\"node js install.png\" alt=\"node js install\" style=\"zoom:50%;\" />\n\n<p>3.Install Git</p>\n<p>Aready installed</p>\n<p>4.Open terminal, check node, npm and git versions</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm -v</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">node -v</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">git --version</span></span><br><span class=\"line\">8.3.1</span><br><span class=\"line\">v16.14.0</span><br><span class=\"line\">git version 2.32.0 (Apple Git-132)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Initialize-blog\"><a href=\"#Initialize-blog\" class=\"headerlink\" title=\"Initialize blog\"></a>Initialize blog</h3><p>1.install hexo via npm</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">sudo npm install -g hexo-cli</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo -v</span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">hexo: 6.0.0</span><br><span class=\"line\">hexo-cli: 4.3.0</span><br><span class=\"line\">os: darwin 21.2.0 12.1</span><br><span class=\"line\"></span><br><span class=\"line\">node: 16.14.0</span><br><span class=\"line\">v8: 9.4.146.24-node.20</span><br><span class=\"line\">uv: 1.43.0</span><br><span class=\"line\">zlib: 1.2.11</span><br><span class=\"line\">brotli: 1.0.9</span><br><span class=\"line\">ares: 1.18.1</span><br><span class=\"line\">modules: 93</span><br><span class=\"line\">nghttp2: 1.45.1</span><br><span class=\"line\">napi: 8</span><br><span class=\"line\">llhttp: 6.0.4</span><br><span class=\"line\">openssl: 1.1.1m+quic</span><br><span class=\"line\">cldr: 40.0</span><br><span class=\"line\">icu: 70.1</span><br><span class=\"line\">tz: 2021a3</span><br><span class=\"line\">unicode: 14.0</span><br><span class=\"line\">ngtcp2: 0.1.0-DEV</span><br><span class=\"line\">nghttp3: 0.1.0-DEV</span><br></pre></td></tr></table></figure>\n\n<p>2.create a new folder in terminal and initialize the blog</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\"><span class=\"built_in\">cd</span> ~/Documents/</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">makedir self_blog</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\"><span class=\"built_in\">cd</span> self_blog/</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo init</span></span><br><span class=\"line\">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitINFO  Install dependencies⸨#########⠂⠂⠂⠂⠂⠂⠂⠂⠂⸩ ⠹ idealTree:hexo-front-matter: timing idealTree:node_modules/hexo-front-matter Completed in 212msINFO  Start blogging with Hexo! </span><br></pre></td></tr></table></figure>\n\n<p>3.view the blog on localhost, s for start</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo s</span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Start processing</span><br><span class=\"line\">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Write-first-blog\"><a href=\"#Write-first-blog\" class=\"headerlink\" title=\"Write first blog\"></a>Write first blog</h3><p>1.write a new blog, n for new</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo n <span class=\"string\">&#x27;Hello ShouRou&#x27;</span></span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Created: ~/Documents/self_blog/source/_posts/Hello-ShouRou.md</span><br></pre></td></tr></table></figure>\n\n<p>the blog can be written on any editor, Typora in use.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">open ~/Documents/self_blog/source/_posts/Hello-ShouRou.md</span><br></pre></td></tr></table></figure>\n\n<p>2.clean cache(not necessary)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo clean</span></span><br></pre></td></tr></table></figure>\n\n<p>3.generate the blog, g for generate</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo g</span></span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">INFO  Start processing</span><br><span class=\"line\">INFO  Files loaded in 61 ms</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(Use `node --trace-warnings ...` to show where the warning was created)</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;lineno&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;column&#x27; of module exports inside circular dependency</span><br><span class=\"line\">(node:10719) Warning: Accessing non-existent property &#x27;filename&#x27; of module exports inside circular dependency</span><br><span class=\"line\">INFO  Generated: archives/2022/index.html</span><br><span class=\"line\">INFO  Generated: archives/index.html</span><br><span class=\"line\">INFO  Generated: js/script.js</span><br><span class=\"line\">INFO  Generated: fancybox/jquery.fancybox.min.css</span><br><span class=\"line\">INFO  Generated: index.html</span><br><span class=\"line\">INFO  Generated: css/style.css</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.woff2</span><br><span class=\"line\">INFO  Generated: fancybox/jquery.fancybox.min.js</span><br><span class=\"line\">INFO  Generated: js/jquery-3.4.1.min.js</span><br><span class=\"line\">INFO  Generated: archives/2022/02/index.html</span><br><span class=\"line\">INFO  Generated: css/fonts/FontAwesome.otf</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.woff</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.eot</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.ttf</span><br><span class=\"line\">INFO  Generated: css/images/banner.jpg</span><br><span class=\"line\">INFO  Generated: 2022/02/22/hello-world/index.html</span><br><span class=\"line\">INFO  Generated: css/fonts/fontawesome-webfont.svg</span><br><span class=\"line\">INFO  Generated: 2022/02/22/Hello-ShouRou/index.html</span><br><span class=\"line\">INFO  18 files generated in 161 ms</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Deploy-to-remote-GitHub\"><a href=\"#Deploy-to-remote-GitHub\" class=\"headerlink\" title=\"Deploy to remote (GitHub)\"></a>Deploy to remote (GitHub)</h3><p>1.Create a new repository with the name of $username.github.io</p>\n<img src=\"github page.png\" alt=\"github page\" style=\"zoom:50%;\" />\n\n<p>use default setting</p>\n<p>2.open terminal, install plugin of deploying to git</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm install --save hexo-deployer-git</span></span><br></pre></td></tr></table></figure>\n\n<p>3.Open the <code>_config.yml</code> file in the blog <code>root</code> directory, add these lines afterwards</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"> <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\"> <span class=\"attr\">repo:</span> <span class=\"string\">git@github.com:DaydreamAtNight/DaydreamAtNight.github.io.git</span></span><br><span class=\"line\"> <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n\n<p>4.Go to the blog <code>root</code>, deploy the blog to remote, d for deploy</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo clean</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo g</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo d</span></span><br></pre></td></tr></table></figure>\n\n<p>Open <a href=\"https://daydreamatnight.github.io/\">https://daydreamatnight.github.io/</a> to see if it works</p>\n<h2 id=\"Change-theme-to-yilia\"><a href=\"#Change-theme-to-yilia\" class=\"headerlink\" title=\"Change theme to yilia\"></a>Change theme to yilia</h2><p>default theme of hexo is called landscape and it’s not beautiful enough to most of the people. Yilia is a fast, simple, elegant and popular theme. Thought it has not been updated since Nov 2017, it still a good choice for fresh bloggers.</p>\n<h3 id=\"Download-and-deploy-yilia\"><a href=\"#Download-and-deploy-yilia\" class=\"headerlink\" title=\"Download and deploy yilia\"></a>Download and deploy yilia</h3><p>1.go to the blog <code>root</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">git <span class=\"built_in\">clone</span> https://github.com/litten/hexo-theme-yilia theme/yilia</span></span><br></pre></td></tr></table></figure>\n\n<p>2.eidt the <code>_config.yml</code> file, add</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">yilia</span></span><br></pre></td></tr></table></figure>\n\n<p>3.clean and deploy hexo</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo clean</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo g</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">hexo d</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Basic-customize-yillia\"><a href=\"#Basic-customize-yillia\" class=\"headerlink\" title=\"Basic customize yillia\"></a>Basic customize yillia</h3><h4 id=\"Activate-aboutme-‘left-slider’-button\"><a href=\"#Activate-aboutme-‘left-slider’-button\" class=\"headerlink\" title=\"Activate aboutme ‘left slider’ button\"></a>Activate <code>aboutme</code> ‘left slider’ button</h4><p>1.go to terminal run</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm i hexo-generator-json-content --save</span></span><br></pre></td></tr></table></figure>\n\n<p>2.go to the blog <code>root</code> directory, add these lines to the <code>_config.yml</code> file</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">jsonContent:</span></span><br><span class=\"line\">    <span class=\"attr\">meta:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"attr\">pages:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"attr\">posts:</span></span><br><span class=\"line\">      <span class=\"attr\">title:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">date:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">path:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">text:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">raw:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">content:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">slug:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">updated:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">comments:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">link:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">permalink:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">excerpt:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">categories:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">tags:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Customize-avatar\"><a href=\"#Customize-avatar\" class=\"headerlink\" title=\"Customize avatar\"></a>Customize avatar</h4><p>put the avatar file in directory  <code>themes/yilia/source/img</code></p>\n<blockquote>\n<p>do not add to the public repository directly, or the img get cleaned every time running <code>hexo clean</code> , need to upload to the same dir again after this command.</p>\n</blockquote>\n<h4 id=\"Set-favicon-icon-on-the-tab-of-website\"><a href=\"#Set-favicon-icon-on-the-tab-of-website\" class=\"headerlink\" title=\"Set favicon (icon on the tab of website)\"></a>Set favicon (icon on the tab of website)</h4><p>put the favicon img in directory <code>themes/yilia/source/img</code></p>\n<p><a href=\"https://www.bitbug.net/\">Bitbug</a> is a way of converting image into .ico file.</p>\n<h4 id=\"Other-configuration\"><a href=\"#Other-configuration\" class=\"headerlink\" title=\"Other configuration\"></a>Other configuration</h4><p>Set file of yillia is in <code>themes/yilia/_config.yml</code> as:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Header</span></span><br><span class=\"line\"><span class=\"attr\">author:</span> <span class=\"string\">Ryan</span> <span class=\"string\">LI</span></span><br><span class=\"line\"><span class=\"attr\">subtitle:</span> <span class=\"string\">&#x27;Daydreaming at night&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\">  <span class=\"attr\">main:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"attr\">archives:</span> <span class=\"string\">/archives/index.html</span></span><br><span class=\"line\">  <span class=\"attr\">learn:</span> <span class=\"string\">/tags/learn/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># SubNav</span></span><br><span class=\"line\"><span class=\"attr\">subnav:</span></span><br><span class=\"line\">  <span class=\"attr\">github:</span> <span class=\"string\">&quot;https://github.com/DaydreamAtNight&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># weibo: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># rss: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># zhihu: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#qq: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#weixin: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#jianshu: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#douban: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#segmentfault: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#bilibili: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#acfun: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"attr\">mail:</span> <span class=\"string\">&quot;mailto:lishoushou2019@gmail.com&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#facebook: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#google: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#twitter: &quot;#&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">#linkedin: &quot;#&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">rss:</span> <span class=\"string\">/atom.xml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否需要修改 root 路径</span></span><br><span class=\"line\"><span class=\"comment\"># 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，</span></span><br><span class=\"line\"><span class=\"comment\"># 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。</span></span><br><span class=\"line\"><span class=\"attr\">root:</span> <span class=\"string\">/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Content</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 文章太长，截断按钮文字</span></span><br><span class=\"line\"><span class=\"comment\"># excerpt_link: more</span></span><br><span class=\"line\"><span class=\"comment\"># 文章卡片右下角常驻链接，不需要请设置为false</span></span><br><span class=\"line\"><span class=\"attr\">show_all_link:</span> <span class=\"string\">&#x27;show all&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 数学公式</span></span><br><span class=\"line\"><span class=\"attr\">mathjax:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\"># 是否在新窗口打开链接</span></span><br><span class=\"line\"><span class=\"attr\">open_in_new:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 打赏</span></span><br><span class=\"line\"><span class=\"comment\"># 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span></span><br><span class=\"line\"><span class=\"attr\">reward_type:</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># # 打赏wording</span></span><br><span class=\"line\"><span class=\"comment\"># reward_wording: &#x27;谢谢你请我吃糖果&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># # 支二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span></span><br><span class=\"line\"><span class=\"comment\"># alipay: </span></span><br><span class=\"line\"><span class=\"comment\"># # 微信二维码图片地址</span></span><br><span class=\"line\"><span class=\"comment\"># weixin: </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 目录</span></span><br><span class=\"line\"><span class=\"comment\"># 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录</span></span><br><span class=\"line\"><span class=\"attr\">toc:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\"># 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false</span></span><br><span class=\"line\"><span class=\"attr\">toc_hide_index:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># 目录为空时的提示</span></span><br><span class=\"line\"><span class=\"attr\">toc_empty_wording:</span> <span class=\"string\">&#x27;directery none exist&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否有快速回到顶部的按钮</span></span><br><span class=\"line\"><span class=\"attr\">top:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Miscellaneous</span></span><br><span class=\"line\"><span class=\"attr\">baidu_analytics:</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">google_analytics:</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">favicon:</span> <span class=\"string\">/img/favicon.ico</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#你的头像url</span></span><br><span class=\"line\"><span class=\"attr\">avatar:</span> <span class=\"string\">/img/avatar.jpeg</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#是否开启分享</span></span><br><span class=\"line\"><span class=\"comment\"># share_jia: true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment</span></span><br><span class=\"line\"><span class=\"comment\"># #不需要使用某项，直接设置值为false，或注释掉</span></span><br><span class=\"line\"><span class=\"comment\"># #具体请参考wiki：https://github.com/litten/hexo-theme-yilia/wiki/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #1、多说</span></span><br><span class=\"line\"><span class=\"comment\"># duoshuo: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #2、网易云跟帖</span></span><br><span class=\"line\"><span class=\"comment\"># wangyiyun: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #3、畅言</span></span><br><span class=\"line\"><span class=\"comment\"># changyan_appid: false</span></span><br><span class=\"line\"><span class=\"comment\"># changyan_conf: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的</span></span><br><span class=\"line\"><span class=\"comment\"># disqus: false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># #5、Gitment</span></span><br><span class=\"line\"><span class=\"comment\"># gitment_owner: false      #你的 GitHub ID</span></span><br><span class=\"line\"><span class=\"comment\"># gitment_repo: &#x27;&#x27;          #存储评论的 repo</span></span><br><span class=\"line\"><span class=\"comment\"># gitment_oauth:</span></span><br><span class=\"line\"><span class=\"comment\">#   client_id: &#x27;&#x27;           #client ID</span></span><br><span class=\"line\"><span class=\"comment\">#   client_secret: &#x27;&#x27;       #client secret</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 样式定制 - 一般不需要修改，除非有很强的定制欲望…</span></span><br><span class=\"line\"><span class=\"attr\">style:</span></span><br><span class=\"line\">  <span class=\"comment\"># 头像上面的背景颜色</span></span><br><span class=\"line\">  <span class=\"attr\">header:</span> <span class=\"string\">&#x27;#ece0cf&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\"># 右滑板块背景</span></span><br><span class=\"line\">  <span class=\"attr\">slider:</span> <span class=\"string\">&#x27;linear-gradient(45deg,#b4a698,#ece0cf)&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># slider的设置</span></span><br><span class=\"line\"><span class=\"attr\">slider:</span></span><br><span class=\"line\">  <span class=\"comment\"># 是否默认展开tags板块</span></span><br><span class=\"line\">  <span class=\"attr\">showTags:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 智能菜单</span></span><br><span class=\"line\"><span class=\"comment\"># 如不需要，将该对应项置为false</span></span><br><span class=\"line\"><span class=\"comment\"># 比如</span></span><br><span class=\"line\"><span class=\"comment\">#smart_menu:</span></span><br><span class=\"line\"><span class=\"comment\">#  friends: false</span></span><br><span class=\"line\"><span class=\"attr\">smart_menu:</span></span><br><span class=\"line\">  <span class=\"attr\">innerArchive:</span> <span class=\"string\">&#x27;All articles&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\"># friends: &#x27;友链&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">aboutme:</span> <span class=\"string\">&#x27;About me&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># friends:</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接1: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接2: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接3: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接4: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接5: http://localhost:4000/</span></span><br><span class=\"line\"><span class=\"comment\">#   友情链接6: http://localhost:4000/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">aboutme:</span> <span class=\"string\">Stay</span> <span class=\"string\">hungry,</span> <span class=\"string\">stay</span> <span class=\"string\">fullish</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Advance-customize\"><a href=\"#Advance-customize\" class=\"headerlink\" title=\"Advance customize\"></a>Advance customize</h2><h3 id=\"Stop-visit-litten-me-9005\"><a href=\"#Stop-visit-litten-me-9005\" class=\"headerlink\" title=\"Stop visit litten.me:9005\"></a>Stop visit litten.me:9005</h3><p>Sometimes the user’s client information is collected, see <a href=\"https://github.com/litten/hexo-theme-yilia/issues/528\">here</a> for details. </p>\n<p>Stop reporting by clear the contents in <code>themes/yilia/source-src/js/report.js</code></p>\n<h3 id=\"Limit-display-numbers-on-the-main-page\"><a href=\"#Limit-display-numbers-on-the-main-page\" class=\"headerlink\" title=\"Limit display numbers on the main page\"></a>Limit display numbers on the main page</h3><p>Simply insert <code>&lt;! -- more --&gt;</code> to show only what comes before it while collapse the afterwards,  click on the article title to read it in full.</p>\n<h3 id=\"Easily-add-pics-to-blogs-via-hexo-renderer-marked-plugin\"><a href=\"#Easily-add-pics-to-blogs-via-hexo-renderer-marked-plugin\" class=\"headerlink\" title=\"Easily add pics to blogs via hexo-renderer-marked plugin\"></a>Easily add pics to blogs via hexo-renderer-marked plugin</h3><p>1.find <code>post_asset_folder </code> in <code>_config.yml</code> file in the blog <code>root</code> directory, set to be true</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">post_asset_folder:true</span></span><br></pre></td></tr></table></figure>\n\n<p>2.Install plugin</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-renderer-marked --save</span><br></pre></td></tr></table></figure>\n\n<p>3.change <code>_config.yml</code> in blog <code>root</code> directory as</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">marked:</span></span><br><span class=\"line\">  <span class=\"attr\">prependRoot:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">postAsset:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>then img can be easily add with <code>![img description](img.png)</code> after add the image to the folder with the same name as the article in <code>/source/_posts/</code></p>\n<p>4.change Typora pereference as</p>\n<img src=\"typora setting.png\" alt=\"typora setting\" style=\"zoom:50%;\" />\n\n<p>img can drag into typro, yet blogname need to be deleted before deploying</p>\n<h3 id=\"Show-number-of-articles-and-words-on-the-left-panel\"><a href=\"#Show-number-of-articles-and-words-on-the-left-panel\" class=\"headerlink\" title=\"Show number of articles and words on the left panel\"></a>Show number of articles and words on the left panel</h3><p>1.add wordcount plugin in terminal</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i --save hexo-wordcount</span><br></pre></td></tr></table></figure>\n\n<p>2.change <code>themes/yilia/layout/_partial/left-col.ejs</code> </p>\n<p>after</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;header-menu&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    &lt;% for (var i in theme.menu)&#123; %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%- url_for(theme.menu[i]) %&gt;&quot;</span>&gt;</span>&lt;%= i %&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    &lt;%&#125;%&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>add</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;post-count&quot;</span>&gt;</span>&lt;%=site.posts.length%&gt; articles</span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&lt;%= totalcount(site, &#x27;0,0.0a&#x27;) %&gt;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> words<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>add style sheet in <code>themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.post-count&#123;</span><br><span class=\"line\">  font-size: 12px;</span><br><span class=\"line\">  color: #696969;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Show-number-of-visits-in-the-footer\"><a href=\"#Show-number-of-visits-in-the-footer\" class=\"headerlink\" title=\"Show number of visits in the footer\"></a>Show number of visits in the footer</h3><p><a href=\"https://busuanzi.ibruce.info/\">busuanzi</a> is in use, which is super easy to deploy</p>\n<p>change <code>themes/yilia/layout/_partial/footer.ejs</code> as</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">footer</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;footer&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;outer&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;footer-info&quot;</span>&gt;</span></span><br><span class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;footer-left&quot;</span>&gt;</span></span><br><span class=\"line\">    \t\t<span class=\"comment\">&lt;!-- total visits number --&gt;</span></span><br><span class=\"line\">          &lt;% if (theme.busuanzi &amp;&amp; theme.busuanzi.enable)&#123; %&gt;</span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- busuanzi statistics --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"symbol\">&amp;nbsp;</span>visits in total</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">          &lt;% &#125; %&gt;</span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- end --&gt;</span></span><br><span class=\"line\">    \t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      \t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;footer-right&quot;</span>&gt;</span></span><br><span class=\"line\">      \t\t<span class=\"symbol\">&amp;copy;</span> &lt;%= date(new Date(), &#x27;YYYY&#x27;) %&gt; &lt;%= config.author || config.title %&gt;</span><br><span class=\"line\">      \t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>and add </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">busuanzi:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Add-button-of-hiding-the-left-panel\"><a href=\"#Add-button-of-hiding-the-left-panel\" class=\"headerlink\" title=\"Add button of hiding the left panel\"></a>Add button of hiding the left panel</h3><p>Refer to  <a href=\"https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/\">hexo yilia主题添加隐藏左边栏目按钮</a>  </p>\n<p>1.add style list to file <code>/themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*stylesheet for hide the left panel*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.mymenucontainer</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>:block;</span><br><span class=\"line\">\t<span class=\"attribute\">cursor</span>:pointer;</span><br><span class=\"line\">\t<span class=\"attribute\">left</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">top</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">z-index</span>:<span class=\"number\">9999</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">position</span>:fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bar1</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>:<span class=\"number\">#8E6D51</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">6px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">transition</span>:<span class=\"number\">0.1s</span>;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(-<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">8px</span>,<span class=\"number\">8px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(-<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">8px</span>,<span class=\"number\">8px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bar2</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>:<span class=\"number\">#8E6D51</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">6px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">transition</span>:<span class=\"number\">0.1s</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bar3</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>:<span class=\"number\">35px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border-radius</span>:<span class=\"number\">3px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>:<span class=\"number\">#8E6D51</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">6px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">transition</span>:<span class=\"number\">0.1s</span>;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">4px</span>,-<span class=\"number\">6px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">45deg</span>) <span class=\"built_in\">translate</span>(-<span class=\"number\">4px</span>,-<span class=\"number\">6px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.change</span> <span class=\"selector-class\">.bar1</span> &#123;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.change</span> <span class=\"selector-class\">.bar2</span> &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.change</span> <span class=\"selector-class\">.bar3</span> &#123;</span><br><span class=\"line\">\t-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">\t<span class=\"attribute\">transform</span>:<span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>) <span class=\"built_in\">translate</span>(<span class=\"number\">0px</span>,<span class=\"number\">0px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*stylesheet for hide the left panel end*/</span></span><br></pre></td></tr></table></figure>\n\n<p>2.go to <code>/themes/yilia/layout/layout.ejs</code> add before <code> &lt;div class=&quot;left-col&quot; </code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;mymenucontainer&quot;</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;myFunction(this)&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bar1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bar2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bar3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add between <code>&lt;/body&gt;</code> and <code>&lt;/html&gt;</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> hide = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">myFunction</span>(<span class=\"params\">x</span>) &#123;</span><br><span class=\"line\">        x.<span class=\"property\">classList</span>.<span class=\"title function_\">toggle</span>(<span class=\"string\">&quot;change&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(hide == <span class=\"literal\">false</span>)&#123;</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.left-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;none&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.mid-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&quot;left&quot;</span>, <span class=\"number\">6</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;none&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col.hide&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;none&#x27;</span>);</span><br><span class=\"line\">            hide = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.left-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.mid-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&quot;left&quot;</span>, <span class=\"number\">300</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.tools-col.hide&quot;</span>).<span class=\"title function_\">css</span>(<span class=\"string\">&#x27;display&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">            hide = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"Beautiful-contents-navigation-in-articles\"><a href=\"#Beautiful-contents-navigation-in-articles\" class=\"headerlink\" title=\"Beautiful contents navigation in articles\"></a>Beautiful contents navigation in articles</h3><p>Default navigator is kind of ugly so found a more beautiful version, to use default version, simply change <code>toc: 2</code> in file <code>themes/yilia/_config.yml</code></p>\n<p>1.add this block at the end of <code>themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* navigator */</span></span><br><span class=\"line\"><span class=\"selector-id\">#container</span> <span class=\"selector-class\">.show-toc-btn</span>,<span class=\"selector-id\">#container</span> <span class=\"selector-class\">.toc-article</span>&#123;<span class=\"attribute\">display</span>:block&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.toc-article</span>&#123;<span class=\"attribute\">z-index</span>:<span class=\"number\">100</span>;<span class=\"attribute\">background</span>:<span class=\"number\">#fff</span>;<span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;<span class=\"attribute\">max-width</span>:<span class=\"number\">250px</span>;<span class=\"attribute\">min-width</span>:<span class=\"number\">150px</span>;<span class=\"attribute\">max-height</span>:<span class=\"number\">500px</span>;<span class=\"attribute\">overflow-y</span>:auto;-webkit-<span class=\"attribute\">box-shadow</span>:<span class=\"number\">5px</span> <span class=\"number\">5px</span> <span class=\"number\">2px</span> <span class=\"number\">#ccc</span>;<span class=\"attribute\">box-shadow</span>:<span class=\"number\">5px</span> <span class=\"number\">5px</span> <span class=\"number\">2px</span> <span class=\"number\">#ccc</span>;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>;<span class=\"attribute\">padding</span>:<span class=\"number\">10px</span>;<span class=\"attribute\">position</span>:fixed;<span class=\"attribute\">right</span>:<span class=\"number\">35px</span>;<span class=\"attribute\">top</span>:<span class=\"number\">129px</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-close</span>&#123;<span class=\"attribute\">font-weight</span>:<span class=\"number\">700</span>;<span class=\"attribute\">font-size</span>:<span class=\"number\">20px</span>;<span class=\"attribute\">cursor</span>:pointer;<span class=\"attribute\">float</span><span class=\"selector-pseudo\">:right</span>;<span class=\"attribute\">color</span>:<span class=\"number\">#ccc</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-close</span><span class=\"selector-pseudo\">:hover</span>&#123;<span class=\"attribute\">color</span>:<span class=\"number\">#000</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc</span>&#123;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>;<span class=\"attribute\">padding</span>:<span class=\"number\">0</span>;<span class=\"attribute\">line-height</span>:<span class=\"number\">20px</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc</span> <span class=\"selector-class\">.toc-number</span>&#123;<span class=\"attribute\">color</span>:<span class=\"number\">#333</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc</span> <span class=\"selector-class\">.toc-text</span><span class=\"selector-pseudo\">:hover</span>&#123;<span class=\"attribute\">text-decoration</span>:underline;<span class=\"attribute\">color</span>:<span class=\"number\">#2a6496</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">li</span>&#123;<span class=\"attribute\">list-style-type</span>:none&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-level-1</span>&#123;<span class=\"attribute\">margin</span>:<span class=\"number\">4px</span> <span class=\"number\">0</span>&#125;<span class=\"selector-class\">.toc-article</span> <span class=\"selector-class\">.toc-child</span>&#123;&#125;<span class=\"keyword\">@-moz-keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"keyword\">@-webkit-keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"keyword\">@-o-keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"keyword\">@keyframes</span> cd-bounce-<span class=\"number\">1</span>&#123;<span class=\"number\">0%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">0</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;<span class=\"number\">60%</span>&#123;<span class=\"attribute\">opacity</span>:<span class=\"number\">1</span>;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1.01</span>)&#125;<span class=\"number\">100%</span>&#123;-o-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-webkit-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-moz-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);-ms-<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(<span class=\"number\">1</span>)&#125;&#125;<span class=\"selector-class\">.show-toc-btn</span>&#123;<span class=\"attribute\">display</span>:none;<span class=\"attribute\">z-index</span>:<span class=\"number\">10</span>;<span class=\"attribute\">width</span>:<span class=\"number\">30px</span>;<span class=\"attribute\">min-height</span>:<span class=\"number\">14px</span>;<span class=\"attribute\">overflow</span>:hidden;<span class=\"attribute\">padding</span>:<span class=\"number\">4px</span> <span class=\"number\">6px</span> <span class=\"number\">8px</span> <span class=\"number\">5px</span>;<span class=\"attribute\">border</span>:<span class=\"number\">1px</span> solid <span class=\"number\">#ddd</span>;<span class=\"attribute\">border-right</span>:none;<span class=\"attribute\">position</span>:fixed;<span class=\"attribute\">right</span>:<span class=\"number\">40px</span>;<span class=\"attribute\">text-align</span>:center;<span class=\"attribute\">background-color</span>:<span class=\"number\">#f9f9f9</span>&#125;<span class=\"selector-class\">.show-toc-btn</span> <span class=\"selector-class\">.btn-bg</span>&#123;<span class=\"attribute\">margin-top</span>:<span class=\"number\">2px</span>;<span class=\"attribute\">display</span>:block;<span class=\"attribute\">width</span>:<span class=\"number\">16px</span>;<span class=\"attribute\">height</span>:<span class=\"number\">14px</span>;<span class=\"attribute\">background</span>:<span class=\"built_in\">url</span>(<span class=\"string\">http://7xtawy.com1.z0.glb.clouddn.com/show.png</span>) no-repeat;-webkit-<span class=\"attribute\">background-size</span>:<span class=\"number\">100%</span>;-moz-<span class=\"attribute\">background-size</span>:<span class=\"number\">100%</span>;<span class=\"attribute\">background-size</span>:<span class=\"number\">100%</span>&#125;<span class=\"selector-class\">.show-toc-btn</span> <span class=\"selector-class\">.btn-text</span>&#123;<span class=\"attribute\">color</span>:<span class=\"number\">#999</span>;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>&#125;<span class=\"selector-class\">.show-toc-btn</span><span class=\"selector-pseudo\">:hover</span>&#123;<span class=\"attribute\">cursor</span>:pointer&#125;<span class=\"selector-class\">.show-toc-btn</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-bg</span>&#123;<span class=\"attribute\">background-position</span>:<span class=\"number\">0</span> -<span class=\"number\">16px</span>&#125;<span class=\"selector-class\">.show-toc-btn</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-text</span>&#123;<span class=\"attribute\">font-size</span>:<span class=\"number\">12px</span>;<span class=\"attribute\">color</span>:<span class=\"number\">#ea8010</span>&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">li</span> <span class=\"selector-tag\">ol</span>, <span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">li</span> <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">ol</span>, <span class=\"selector-class\">.toc-article</span> <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2.after <code>&lt;/header&gt;&lt;% &#125; %&gt;</code> in file <code>themes/yilia/layout/_partial/article.ejs</code> add</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- navigator --&gt;</span></span><br><span class=\"line\">&lt;% if (!index &amp;&amp; post.toc)&#123; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;show-toc-btn&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;show-toc-btn&quot;</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;showToc();&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;display:none&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-bg&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn-text&quot;</span>&gt;</span>...<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;toc-article&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;toc-article&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;toc-close&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;toc-close&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;hide navigator&quot;</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;showBtn();&quot;</span>&gt;</span>×<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;toc-title&quot;</span>&gt;</span>navigator<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">        &lt;%- toc(post.content) %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">function</span> <span class=\"title function_\">showToc</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> toc_article = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;toc-article&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> show_toc_btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;show-toc-btn&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      toc_article.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:block&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      show_toc_btn.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:none&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">function</span> <span class=\"title function_\">showBtn</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> toc_article = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;toc-article&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">var</span> show_toc_btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;show-toc-btn&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      toc_article.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:none&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      show_toc_btn.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:block&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    &lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- navigator end --&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add <code>toc:true</code> to the articles that need the navigator.</p>\n<h3 id=\"Add-custormize-header-to-articles\"><a href=\"#Add-custormize-header-to-articles\" class=\"headerlink\" title=\"Add custormize header to articles\"></a>Add custormize header to articles</h3><p>when run <code>hexo new</code> to initiate a new blog, a defaul head would generate, change it by</p>\n<p>change the <code>scaffolds/post.md</code> in the <code>root</code> directory</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: &#123;&#123; title &#125;&#125;</span><br><span class=\"line\">date: &#123;&#123; date &#125;&#125;</span><br><span class=\"line\">author: daydreamatnight</span><br><span class=\"line\">toc: true</span><br><span class=\"line\">declare: true</span><br><span class=\"line\">tags:</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"more-headers-to-choose-when-writing-a-blog\"><a href=\"#more-headers-to-choose-when-writing-a-blog\" class=\"headerlink\" title=\"more headers to choose when writing a blog\"></a>more headers to choose when writing a blog</h4><p>before a blog, more paras can be chosen to add</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--- </span><br><span class=\"line\">title: #你的博客文章名 </span><br><span class=\"line\">toc: ture #toc </span><br><span class=\"line\">date: 2020-09-07 09:25:00 #文章时间 </span><br><span class=\"line\">author: GavenLee #作者 </span><br><span class=\"line\">img: /source/images/xxx.jpg #图片 </span><br><span class=\"line\">top: true #是否顶置 </span><br><span class=\"line\">cover: true #是否在引导页轮播 </span><br><span class=\"line\">coverImg: /images/1.jpg #轮播图片 </span><br><span class=\"line\">password: #阅读密码这里被加密 </span><br><span class=\"line\">mathjax: false #mathjax </span><br><span class=\"line\">summary: 这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要 </span><br><span class=\"line\">categories: Markdown #分类 </span><br><span class=\"line\">tags: #标签 </span><br><span class=\"line\">abbrlink: HexoLearn #链接 </span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Disable-auto-wrap-in-code-block\"><a href=\"#Disable-auto-wrap-in-code-block\" class=\"headerlink\" title=\"Disable auto wrap in code block\"></a>Disable auto wrap in code block</h3><p>locate and delete <code>white-space:pre-wrap</code> in file <code>themes/yilia/source/main.0cf68a.css</code> </p>\n<h3 id=\"Add-copy-button-to-code-block\"><a href=\"#Add-copy-button-to-code-block\" class=\"headerlink\" title=\"Add copy button to code block\"></a>Add copy button to code block</h3><p>1.create a <code>clipboard_use.js</code> file in directory <code>themes/yilia/source</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&quot;.highlight&quot;</span>).<span class=\"title function_\">wrap</span>(<span class=\"string\">&quot;&lt;div class=&#x27;code-wrapper&#x27; style=&#x27;position:relative&#x27;&gt;&lt;/div&gt;&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">/*create copy button after page loaded*/</span></span><br><span class=\"line\">!<span class=\"keyword\">function</span> (<span class=\"params\">e, t, a</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* code */</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> initCopyCode = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> copyHtml = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        copyHtml += <span class=\"string\">&#x27;&lt;button class=&quot;btn-copy&quot; data-clipboard-snippet=&quot;&quot;&gt;&#x27;</span>;</span><br><span class=\"line\">        copyHtml += <span class=\"string\">&#x27;  &lt;i class=&quot;fa fa-clipboard&quot;&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;&#x27;</span>;</span><br><span class=\"line\">        copyHtml += <span class=\"string\">&#x27;&lt;/button&gt;&#x27;</span>;</span><br><span class=\"line\">        $(<span class=\"string\">&quot;.highlight .code&quot;</span>).<span class=\"title function_\">before</span>(copyHtml);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> clipboard = <span class=\"keyword\">new</span> <span class=\"title class_\">ClipboardJS</span>(<span class=\"string\">&#x27;.btn-copy&#x27;</span>, &#123;</span><br><span class=\"line\">            <span class=\"attr\">target</span>: <span class=\"keyword\">function</span> (<span class=\"params\">trigger</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> trigger.<span class=\"property\">nextElementSibling</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        clipboard.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;success&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">            e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-check&#x27; style=&#x27;color:green&#x27;&gt;&lt;/i&gt;&lt;span style=&#x27;color:green&#x27;&gt;copy success&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">            e.<span class=\"title function_\">clearSelection</span>();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        clipboard.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;error&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">            e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-exclamation&#x27; style=&#x27;color:red&#x27;&gt;&lt;/i&gt;&lt;span style=&#x27;color:red&#x27;&gt;copy success&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                e.<span class=\"property\">trigger</span>.<span class=\"property\">innerHTML</span> = <span class=\"string\">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;&quot;</span></span><br><span class=\"line\">            &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">            e.<span class=\"title function_\">clearSelection</span>();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">initCopyCode</span>();</span><br><span class=\"line\">&#125;(<span class=\"variable language_\">window</span>, <span class=\"variable language_\">document</span>);</span><br></pre></td></tr></table></figure>\n\n<p>2.load .js file, edit <code>themes/yilia/layout/layout.ejs</code> file, add before <code>&lt;/body&gt;</code>. </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- copy button in code block--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/clipboard_use.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add stylesheet the end of <code>themes/yilia/source/main.0cf68a.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* code copy button */</span></span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#eee</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">linear-gradient</span>(<span class=\"number\">#fcfcfc</span>, <span class=\"number\">#eee</span>);</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d5d5d5</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">  -webkit-user-select: none;</span><br><span class=\"line\">  -moz-user-select: none;</span><br><span class=\"line\">  -ms-user-select: none;</span><br><span class=\"line\">  user-select: none;</span><br><span class=\"line\">  -webkit-appearance: none;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">13px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: <span class=\"number\">700</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transition</span>: opacity .<span class=\"number\">3s</span> ease-in-out;</span><br><span class=\"line\">  -o-<span class=\"attribute\">transition</span>: opacity .<span class=\"number\">3s</span> ease-in-out;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: opacity .<span class=\"number\">3s</span> ease-in-out;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">2px</span> <span class=\"number\">6px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.highlight</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* code copy button end */</span></span><br></pre></td></tr></table></figure>\n\n<p>4.add copy button icon, edit <code>themes/yilia/layout/_partia/head.ejs</code> add before <code>&lt;/head&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- copy button icon --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/css&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Allow-search-engines-to-index-this-Blog\"><a href=\"#Allow-search-engines-to-index-this-Blog\" class=\"headerlink\" title=\"Allow search engines to index this Blog\"></a>Allow search engines to index this Blog</h3><h4 id=\"index-Google-to-this-Blog\"><a href=\"#index-Google-to-this-Blog\" class=\"headerlink\" title=\"index Google to this Blog\"></a>index Google to this Blog</h4><p>check if google can find you, enter <code>site:daydreamatnight.github.io</code> to see</p>\n<img src=\"check google search.png\" alt=\"check google search\" style=\"zoom:50%;\" />\n\n<h5 id=\"Add-url-to-goole-search-console\"><a href=\"#Add-url-to-goole-search-console\" class=\"headerlink\" title=\"Add url to goole search console\"></a>Add url to goole search console</h5><p>1.open <a href=\"https://search.google.com/search-console/welcome\">google console</a> , add URL link of the blog (<a href=\"https://daydreamatnight.github.io/\">https://daydreamatnight.github.io</a>), in the <code>URL prefix</code> block, click <code>CONTINUE</code></p>\n<img src=\"google search console.png\" alt=\"google console\" style=\"zoom:50%;\" />\n\n<p>2.upload the html file to the blog <code>root</code> directory and deploy the website, then clicke verify.</p>\n<img src=\"google console varification.png\" alt=\"google console varification\" style=\"zoom:50%;\" />\n\n<p>little buggy here, see <a href=\"https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/\"><strong>don’t upload</strong> the file <strong>using hexo</strong> command</a></p>\n<h5 id=\"add-sitemap-for-google\"><a href=\"#add-sitemap-for-google\" class=\"headerlink\" title=\"add sitemap for google\"></a>add sitemap for google</h5><p>add sitemap for google and baidu together</p>\n<blockquote>\n<p>A <em>sitemap</em> is a file where you provide information about the pages, videos, and other files on your site, and the relationships between them. Search engines like Google read this file to more intelligently crawl your site. A sitemap tells Google which pages and files you think are important in your site, and also provides valuable information about these files: for example, for pages, when the page was last updated, how often the page is changed, and any alternate language versions of a page.</p>\n</blockquote>\n<p>1.install sitemap plugins    </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm install hexo-generator-sitemap --save</span></span><br><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">npm install hexo-generator-baidu-sitemap --save</span></span><br></pre></td></tr></table></figure>\n\n<p>2.add to the <code>_config.yml</code> in the blog <code>root</code> </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># hexo sitemap</span></span><br><span class=\"line\"><span class=\"attr\">sitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">sitemap.xml</span></span><br><span class=\"line\"><span class=\"attr\">baidusitemap:</span></span><br><span class=\"line\">  <span class=\"attr\">path:</span> <span class=\"string\">baidusitemap.xml</span></span><br></pre></td></tr></table></figure>\n\n<p>3.Deploy the blog, go to  <a href=\"https://daydreamatnight.github.io/sitemap.xml\">https://daydreamatnight.github.io/sitemap.xml</a> and <a href=\"https://daydreamatnight.github.io/baidusitemap.xml\">https://daydreamatnight.github.io/baidusitemap.xml</a> to see if sitemaps are uploaded</p>\n<p>4.Go to Google Search Console, in the left panel, click <code>Sitemaps</code>, enter your sitemap URL <code>sitemap.xml</code> </p>\n<img src=\"can't fetch sitemap.png\" alt=\"can't fetch sitemap\" style=\"zoom:50%;\" />\n\n<p>Googlebot won’t download the sitemap immediately. Give it time. </p>\n<h5 id=\"add-robots-txt\"><a href=\"#add-robots-txt\" class=\"headerlink\" title=\"add robots.txt\"></a>add robots.txt</h5><blockquote>\n<p>A robots.txt file tells search engine crawlers which URLs the crawler can access on your site. This is used mainly to avoid overloading your site with requests; <strong>it is not a mechanism for keeping a web page out of Google</strong>. To keep a web page out of Google, <a href=\"https://developers.google.com/search/docs/advanced/crawling/block-indexing\">block indexing with <code>noindex</code></a> or password-protect the page.</p>\n<p>A robots.txt file is used primarily to manage crawler traffic to your site, and <em>usually</em> to keep a file off Google, depending on the file type:</p>\n</blockquote>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User-agent: *</span><br><span class=\"line\">Allow: /</span><br><span class=\"line\">Allow: /archives/</span><br><span class=\"line\">Allow: /tags/</span><br><span class=\"line\">Allow: /categories/</span><br><span class=\"line\">Allow: /about/</span><br><span class=\"line\">Allow: /guestbook/</span><br><span class=\"line\">Allow: /others/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Disallow: /js/</span><br><span class=\"line\">Disallow: /css/</span><br><span class=\"line\">Disallow: /lib/</span><br><span class=\"line\"></span><br><span class=\"line\">Sitemap: https://daydreamatnight.github.io/sitemap.xml</span><br><span class=\"line\">Sitemap: https://daydreamatnight.github.io/baidusitemap.xml</span><br></pre></td></tr></table></figure>\n\n<p>deploy the blog and wait.</p>\n<h5 id=\"check-if-sitemap-is-available\"><a href=\"#check-if-sitemap-is-available\" class=\"headerlink\" title=\"check if sitemap is available\"></a>check if sitemap is available</h5><p>After uploaded several updates, my sitemap still didn’t fetched by google. So I went to check, it turns out my url setting in <code>_config.yml</code> is wrong.  So I changed it to be my home url. And check it with  <a href=\"https://www.jcchouinard.com/url-inspection-tool/\">URL Inspection Tool</a>. </p>\n<p>1.Open <a href=\"https://search.google.com/search-console\">google search console</a>, add the url of sitemap in the upper url inspecting box.</p>\n<img src=\"Google%20sitemap%20inspect.png\" alt=\"Google sitemap inspect URL is not on Google \" style=\"zoom:22%;\" />\n\n<img src=\"Google%20sitemap%20inspect%202.png\" alt=\"Google sitemap inspect 2\" style=\"zoom:22%;\" />\n\n<p>It’s normal it shows <code>URL is not on Google</code> because it shouldn’t as a sitemap.</p>\n<p>2.click <code>live test</code> to check the availability.</p>\n<img src=\"Google%20sitemap%20inspect%203.png\" alt=\"Google sitemap inspect 3\" style=\"zoom:75%;\" />\n\n<p>It should be available, then just wait.</p>\n<h4 id=\"index-Bing-to-this-Blog\"><a href=\"#index-Bing-to-this-Blog\" class=\"headerlink\" title=\"index Bing to this Blog\"></a>index Bing to this Blog</h4><p>1.go to <a href=\"https://www.bing.com/webmasters/\">Bing webmaster</a> and login</p>\n<p>2.connect with google webmaster.</p>\n<img src=\"bing%20sitemap.png\" alt=\"bing sitemap\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"being%20sitemap%20connect%20google.png\" alt=\"being sitemap connect google\" style=\"zoom:75%;\" />\n\n  \n\n<img src=\"bing%20search%20console%20success.png\" alt=\"bing search console success\" style=\"zoom:75%;\" />\n\n<h4 id=\"index-baidu-to-this-Blog-not-possibly-working\"><a href=\"#index-baidu-to-this-Blog-not-possibly-working\" class=\"headerlink\" title=\"index baidu to this Blog(not possibly working)\"></a>index baidu to this Blog(not possibly working)</h4><p>go to the <a href=\"https://ziyuan.baidu.com/site/index\">baidu search console</a> , </p>\n<img src=\"baidu console.png\" alt=\"baidu console\" style=\"zoom:50%;\" />\n\n<p>Click <code>添加网站</code> and input every thing, do similar thing</p>\n<img src=\"baidu console varification.png\" alt=\"baidu console varification\" style=\"zoom:50%;\" />\n\n<p>add sitemap</p>\n<img src=\"baidu console sitemap.png\" alt=\"baidu console sitemap\" style=\"zoom:50%;\" />\n\n<p>just wait forever, this could take 2000 years, so give up</p>\n<h3 id=\"Add-copyright-statement\"><a href=\"#Add-copyright-statement\" class=\"headerlink\" title=\"Add copyright statement\"></a>Add copyright statement</h3><p>1.open file <code>themes/yilia/layout/_partial/article.ejs</code> add before <code>&lt;% if ((theme.reward_type === 2 || (theme.reward_type === 1 &amp;&amp; post.reward)) &amp;&amp; !index)&#123; %&gt;</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- add copyright statement --&gt;</span></span><br><span class=\"line\">&lt;% if(theme.declare)&#123;%&gt;</span><br><span class=\"line\">    &lt;%- partial(&#x27;post/declare&#x27;) %&gt;</span><br><span class=\"line\">&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- end --&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>2.create new file <code>declare.ejs</code> under <code>themes/yilia/layout/_partial/post/</code> with:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--add copyright statement https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/c1215e132f6d5621c5fea83d3c4f7ccbcca074a3--&gt;</span></span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">  var sUrl = url.replace(/index\\.html$/, &#x27;&#x27;);</span><br><span class=\"line\">  sUrl = /^(http:|https:)\\/\\//.test(sUrl) ? sUrl : &#x27;https:&#x27; + sUrl;</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- #copyright setting：0-close statement; 1-declare statement if declare: true in the article header; 2-always declare the copyright --&gt;</span></span><br><span class=\"line\">&lt;% if ((theme.declare.declare_type === 2 || (theme.declare.declare_type === 1 &amp;&amp; post.declare)) &amp;&amp; !index)&#123; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;declare&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;author&quot;</span>&gt;</span>author: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    &lt;% if(config.author != undefined)&#123; %&gt;</span><br><span class=\"line\">      &lt;%= config.author%&gt;</span><br><span class=\"line\">    &lt;% &#125;else&#123;%&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">&quot;red&quot;</span>&gt;</span>please add right &quot;author&quot; name in &quot;_config.yml&quot; in the blog root<span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></span><br><span class=\"line\">    &lt;%&#125;%&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;create-time&quot;</span>&gt;</span>posting date: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    &lt;%- date(post.date, &#x27;YYYY-MM-DD HH:MM:SS&#x27;) %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;update-time&quot;</span>&gt;</span>last update: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    &lt;%- date(post.updated, &#x27;YYYY-MM-DD HH:MM:SS&#x27;) %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;article-titles&quot;</span>&gt;</span>article title: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= config.url %&gt;/&lt;%= post.path %&gt;&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;&lt;%= post.title %&gt;&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span>&gt;</span>&lt;%= post.title %&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;article-url&quot;</span>&gt;</span>article link: <span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= config.url %&gt;/&lt;%= post.path %&gt;&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;&lt;%= post.title %&gt;&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span>&gt;</span>&lt;%= config.url %&gt;/&lt;%= post.path %&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">strong</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;copyright&quot;</span>&gt;</span>copyright:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    This work is licensed under a</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;license&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_url%&gt;&quot;</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_alias %&gt;&quot;</span>&gt;</span>&lt;%= theme.declare.licensee_name%&gt;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    licience </span><br><span class=\"line\">    &lt;% if(theme.declare.licensee_img != undefined)&#123; %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;license&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_url%&gt;&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;知识共享许可协议&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;border-width:0&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&lt;%= theme.declare.licensee_img%&gt;&quot;</span>/&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    &lt;% &#125; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; else &#123;%&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;declare&quot;</span> <span class=\"attr\">hidden</span>=<span class=\"string\">&quot;hidden&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&lt;% &#125; %&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- add copyright statement --&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.add stylesheet the end of <code>themes/yilia/source/main.0cf68a.css</code> </p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*stylesheet for the delcare*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.declare</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#eaeaea</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">2em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-left</span>: <span class=\"number\">3px</span> solid <span class=\"number\">#ff1700</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: .<span class=\"number\">5em</span> <span class=\"number\">1em</span>; </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*stylesheet for the delcare end*/</span></span><br></pre></td></tr></table></figure>\n\n<p>4.add at the end of <code>themes/yilia/_config.yml</code> file:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare:</span><br><span class=\"line\">  declare_type: 1</span><br><span class=\"line\">  licensee_url: http://creativecommons.org/licenses/by-nc-sa/4.0/      </span><br><span class=\"line\">  licensee_name: &#x27;CC BY-NC-SA 4.0&#x27;                              </span><br><span class=\"line\">  licensee_alias: &#x27;CC BY-NC-SA 4.0&#x27;     </span><br><span class=\"line\">  licensee_img: https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p><a href=\"https://flatironschool.com/blog/the-benefits-of-blogging-how-and-why-to-keep-a-technical-blog/\">https://flatironschool.com/blog/the-benefits-of-blogging-how-and-why-to-keep-a-technical-blog/</a></p>\n<p><a href=\"https://weblog.masukomi.org/2015/10/18/static-vs-dynamic-blogging/\">https://weblog.masukomi.org/2015/10/18/static-vs-dynamic-blogging/</a></p>\n<p><a href=\"https://www.cnblogs.com/aoguai/p/11781505.html\">https://www.cnblogs.com/aoguai/p/11781505.html</a></p>\n<p><a href=\"https://www.kblog.top/post/30452.html\">https://www.kblog.top/post/30452.html</a></p>\n<p><a href=\"https://wkzqn.gitee.io/2020/02/16/typora%E7%BC%96%E5%86%99hexo%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/\">https://wkzqn.gitee.io/2020/02/16/typora%E7%BC%96%E5%86%99hexo%E5%8D%9A%E5%AE%A2%E6%97%B6%E7%9A%84%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000009478837#articleHeader5\">https://segmentfault.com/a/1190000009478837#articleHeader5</a></p>\n<p><a href=\"https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/\">https://hilyy.xyz/how-to-allow-google-to-index-your-hexo-blog-website-google-search-console-verification-methods/</a></p>\n<p><a href=\"https://busuanzi.ibruce.info/\">https://busuanzi.ibruce.info/</a></p>\n<p><a href=\"https://creativecommons.org/choose/results-one?license_code=by-nc-sa&amp;jurisdiction=&amp;version=4.0&amp;lang=en\">https://creativecommons.org/choose/results-one?license_code=by-nc-sa&amp;jurisdiction=&amp;version=4.0&amp;lang=en</a></p>\n<p><a href=\"https://www.jcchouinard.com/sitemap-could-not-be-read-couldnt-fetch-in-google-search-console/\">https://www.jcchouinard.com/sitemap-could-not-be-read-couldnt-fetch-in-google-search-console/</a></p>\n<p><a href=\"https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/\">https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/</a></p>"},{"title":"install d2l module on apple m1 chip for deep learning","author":"daydreamatnight","toc":true,"declare":true,"date":"2022-02-28T14:30:11.000Z","_content":"\n> [d2l](https://pypi.org/project/d2l/) is a small python module wheel that needed when read the useful deep learning book \"[dive into deeplearning](https://d2l.ai/)\", which provide interactive code examples implemented with [MXNet](https://mxnet.apache.org/versions/1.9.0/), PyTorch, and Tensorflow. \n>\n> But it took me ton's of time installing this module on the new M1 MacBook Air. Actually its easy, just to record this.\n\n<!-- more -->\n\n### How to install\n\n1.install miniforge\n\nalready did, easy.\n\n2.create a new environment with python=3.8\n\nm1 Mac officially support python>=3.9, but 3.8 can be installed.\n\n```shell\nconda create -n d2l python=3.8\nconda info --env\nconda activate d2l\n```\n\n3.install torch\n\ntorch==1.8.1 and torchvision==0.9.1 is recommended and tested in the book, but [# macOS is not currently supported for lts](https://pytorch.org/). \n\nSo the most convenient choice for mac is pytorch==1.10.2, torchvision==0.2.2\n\n```python\nconda install pytorch torchvision -c pytorch\n```\n\n#4.try install d2l directly\n\n```shell\nclear\npip install d2l==0.17.3\n```\n\nthousands lines of terrifying error will come out:\n\n```shell\n$ pip install d2l==0.17.3\nCollecting d2l==0.17.3\n  Using cached d2l-0.17.3-py3-none-any.whl (82 kB)\nCollecting jupyter==1.0.0\n  Using cached jupyter-1.0.0-py2.py3-none-any.whl (2.7 kB)\nCollecting numpy==1.18.5\n  Using cached numpy-1.18.5.zip (5.4 MB)\n  Installing build dependencies ... done\n  Getting requirements to build wheel ... done\n  Preparing metadata (pyproject.toml) ... done\nCollecting pandas==1.2.2\n  Using cached pandas-1.2.2.tar.gz (5.5 MB)\n  Installing build dependencies ... error\n  error: subprocess-exited-with-error\n  \n  × pip subprocess to install build dependencies did not run successfully.\n  │ exit code: 1\n  ╰─> [3659 lines of output]\n      Ignoring numpy: markers 'python_version == \"3.7\" and platform_system != \"AIX\"' don't match your environment\n      Ignoring numpy: markers 'python_version == \"3.7\" and platform_system == \"AIX\"' don't match your environment\n      Ignoring numpy: markers 'python_version == \"3.8\" and platform_system == \"AIX\"' don't match your environment\n      Ignoring numpy: markers 'python_version >= \"3.9\"' don't match your environment\n      Collecting setuptools\n        Using cached setuptools-60.9.3-py3-none-any.whl (1.1 MB)\n      Collecting wheel\n        Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\n      Collecting Cython<3,>=0.29.21\n        Using cached Cython-0.29.28-py2.py3-none-any.whl (983 kB)\n      Collecting numpy==1.17.3\n        Using cached numpy-1.17.3.zip (6.4 MB)\n        Preparing metadata (setup.py): started\n        Preparing metadata (setup.py): finished with status 'done'\n      Building wheels for collected packages: numpy\n        Building wheel for numpy (setup.py): started\n        Building wheel for numpy (setup.py): finished with status 'error'\n        error: subprocess-exited-with-error\n      \n        × python setup.py bdist_wheel did not run successfully.\n        │ exit code: 1\n        ╰─> [3286 lines of output]\n            Running from numpy source directory.\n            blas_opt_info:\n            blas_mkl_info:\n            customize UnixCCompiler\n              libraries mkl_rt not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            blis_info:\n            customize UnixCCompiler\n              libraries blis not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            openblas_info:\n            customize UnixCCompiler\n            customize UnixCCompiler\n              libraries openblas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_3_10_blas_threads_info:\n            Setting PTATLAS=ATLAS\n            customize UnixCCompiler\n              libraries tatlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_3_10_blas_info:\n            customize UnixCCompiler\n              libraries satlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_blas_threads_info:\n            Setting PTATLAS=ATLAS\n            customize UnixCCompiler\n              libraries ptf77blas,ptcblas,atlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_blas_info:\n            customize UnixCCompiler\n              libraries f77blas,cblas,atlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            accelerate_info:\n            customize UnixCCompiler\n              libraries accelerate not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n            Library accelerate was not found. Ignoring\n            customize UnixCCompiler\n              libraries veclib not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n            Library veclib was not found. Ignoring\n              FOUND:\n                extra_compile_args = ['-faltivec', '-I/System/Library/Frameworks/vecLib.framework/Headers']\n                extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']\n                define_macros = [('NO_ATLAS_INFO', 3), ('HAVE_CBLAS', None)]\n      \n              FOUND:\n                extra_compile_args = ['-faltivec', '-I/System/Library/Frameworks/vecLib.framework/Headers']\n                extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']\n                define_macros = [('NO_ATLAS_INFO', 3), ('HAVE_CBLAS', None)]\n      \n            /bin/sh: svnversion: command not found\n            non-existing path in 'numpy/distutils': 'site.cfg'\n            lapack_opt_info:\n            lapack_mkl_info:\n            customize UnixCCompiler\n              libraries mkl_rt not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            openblas_lapack_info:\n            customize UnixCCompiler\n            customize UnixCCompiler\n              libraries openblas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            openblas_clapack_info:\n            customize UnixCCompiler\n            customize UnixCCompiler\n              libraries openblas,lapack not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            flame_info:\n            customize UnixCCompiler\n              libraries flame not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_3_10_threads_info:\n            Setting PTATLAS=ATLAS\n            customize UnixCCompiler\n              libraries lapack_atlas not found in /opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib\n...\n...\n...\n\t\n\t\t\t\t\t\tNone - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h']\n            building library \"npysort\" sources\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common' to include_dirs.\n            None - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_sort.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_partition.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_binsearch.h']\n            building extension \"numpy.core._dummy\" sources\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h' to sources.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h' to sources.\n            executing numpy/core/code_generators/generate_numpy_api.py\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h' to sources.\n            numpy.core - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h']\n            building extension \"numpy.core._multiarray_tests\" sources\n            building extension \"numpy.core._multiarray_umath\" sources\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h' to sources.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h' to sources.\n            executing numpy/core/code_generators/generate_numpy_api.py\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h' to sources.\n            executing numpy/core/code_generators/generate_ufunc_api.py\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h' to sources.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath' to include_dirs.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath' to include_dirs.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common' to include_dirs.\n            numpy.core - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/funcs.inc', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/simd.inc', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/matmul.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/clip.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/templ_common.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h']\n            building extension \"numpy.core._umath_tests\" sources\n            building extension \"numpy.core._rational_tests\" sources\n            building extension \"numpy.core._struct_ufunc_tests\" sources\n            building extension \"numpy.core._operand_flag_tests\" sources\n            building extension \"numpy.fft._pocketfft_internal\" sources\n            building extension \"numpy.linalg.lapack_lite\" sources\n              adding 'numpy/linalg/lapack_lite/python_xerbla.c' to sources.\n            building extension \"numpy.linalg._umath_linalg\" sources\n              adding 'numpy/linalg/lapack_lite/python_xerbla.c' to sources.\n            building extension \"numpy.random.mt19937\" sources\n            building extension \"numpy.random.philox\" sources\n            building extension \"numpy.random.pcg64\" sources\n            building extension \"numpy.random.sfc64\" sources\n            building extension \"numpy.random.common\" sources\n            building extension \"numpy.random.bit_generator\" sources\n            building extension \"numpy.random.generator\" sources\n            building extension \"numpy.random.bounded_integers\" sources\n            building extension \"numpy.random.mtrand\" sources\n            building data_files sources\n            build_src: building npy-pkg config files\n            running build_py\n            copying numpy/version.py -> build/lib.macosx-11.0-arm64-3.8/numpy\n            copying build/src.macosx-11.0-arm64-3.8/numpy/__config__.py -> build/lib.macosx-11.0-arm64-3.8/numpy\n            copying build/src.macosx-11.0-arm64-3.8/numpy/distutils/__config__.py -> build/lib.macosx-11.0-arm64-3.8/numpy/distutils\n            running build_clib\n            customize UnixCCompiler\n            customize UnixCCompiler using build_clib\n            running build_ext\n            customize UnixCCompiler\n            customize UnixCCompiler using build_ext\n            building 'numpy.core._multiarray_umath' extension\n            compiling C sources\n            C compiler: gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64\n      \n            compile options: '-DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c'\n            extra options: '-faltivec -I/System/Library/Frameworks/vecLib.framework/Headers'\n            gcc: numpy/core/src/multiarray/alloc.c\n            gcc: numpy/core/src/multiarray/array_assign_scalar.c\n            gcc: numpy/core/src/multiarray/buffer.c\n            gcc: numpy/core/src/multiarray/common.c\n            gcc: numpy/core/src/multiarray/conversion_utils.c\n            gcc: numpy/core/src/multiarray/datetime_strings.c\n            gcc: numpy/core/src/multiarray/descriptor.c\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/einsum.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/hashdescr.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/lowlevel_strided_loops.c\n            gcc: numpy/core/src/multiarray/multiarraymodule.c\n            gcc: numpy/core/src/multiarray/nditer_constr.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/refcount.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/scalarapi.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/temp_elide.c\n            gcc: numpy/core/src/multiarray/vdot.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.c\n            gcc: numpy/core/src/umath/ufunc_object.c\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/scalarmath.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/npymath/npy_math.c\n            gcc: numpy/core/src/common/npy_longdouble.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/npymath/halffloat.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/common/numpyos.c\n            gcc: /private/var/folders/5y/pqfqz2md0njg2slq29yxp12w0000gn/T/pip-install-mxyh83f9/numpy_51614e6143884c3bbd246341eeb3b857/numpy/_build_utils/src/apple_sgemv_fix.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitlyclang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n      \n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            error: Command \"gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c numpy/core/src/multiarray/array_assign_scalar.c -o build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o -MMD -MF build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o.d -faltivec -I/System/Library/Frameworks/vecLib.framework/Headers\" failed with exit status 1\n            [end of output]\n      \n        note: This error originates from a subprocess, and is likely not a problem with pip.\n      error: legacy-install-failure\n      \n      × Encountered error while trying to install package.\n      ╰─> numpy\n      \n      note: This is an issue with the package mentioned above, not pip.\n      hint: See above for output from the failure.\n      [end of output]\n  \n  note: This error originates from a subprocess, and is likely not a problem with pip.\nerror: subprocess-exited-with-error\n\n× pip subprocess to install build dependencies did not run successfully.\n│ exit code: 1\n╰─> See above for output.\n\nnote: This error originates from a subprocess, and is likely not a problem with pip.\n```\n\nScroll to the top, it looks like `jupyter==1.0.0`, `pandas==1.2.2`, `numpy==1.18.5` are required, and numpy==1.18.5 is where the error comes from.\n\n4.As a result, install `jupyter==1.0.0` and `pandas==1.2.2` first\n\n```shell\npip install jupyter==1.0.0\n```\n\nconda can't be installed by pip, but can by conda\n\n```shell\nconda install pandas=1.2.2\n```\n\n5.numpy==1.18.5 can not be installed by pip or conda\n\nthanks to [tensorflow's wheel](https://github.com/apple/tensorflow_macos/releases/tag/v0.1alpha0), numpy==1.18.5's wheel for mac is included in the addons\n\ndownload and unzip [tensorflow_macos-0.1alpha0.tar.gz](https://github.com/apple/tensorflow_macos/releases/download/v0.1alpha0/tensorflow_macos-0.1alpha0.tar.gz)\n\ngo to the unzipped folder in terminal, and run\n\n```shell\npip install arm64/numpy-1.18.5-cp38-cp38-macosx_11_0_arm64.whl\n```\n\ncheck\n\n```shell\npip list |grep pandas\npip list |grep jupyter\npip list |grep numpy\n```\n\n```shell\npandas               1.2.2\njupyter              1.0.0\njupyter-client       7.1.2\njupyter-console      6.4.0\njupyter-core         4.9.2\njupyterlab-pygments  0.1.2\njupyterlab-widgets   1.0.2\nnumpy                1.18.5\n```\n\n5.install d2l\n\n```shell\npip install d2l\n```\n\nSucess!\n\n### Reference  \n\nhttps://zh-v2.d2l.ai/chapter_installation/index.html\n\nhttps://parthiban-kannan.medium.com/install-tensorflow-on-apple-macbook-m1-release-c1ce7e65cd0\n\nhttps://github.com/apple/tensorflow_macos/issues/48\n\n\n\n\n\n","source":"_posts/install-d2l-moudule-on-apple-m1-chip-for-deep-learning.md","raw":"---\ntitle: install d2l module on apple m1 chip for deep learning\nauthor: daydreamatnight\ntoc: true\ndeclare: true\ndate: 2022-02-28 22:30:11\ntags:\n  - m1 mac\n  - deep learning\n  - d2l\n---\n\n> [d2l](https://pypi.org/project/d2l/) is a small python module wheel that needed when read the useful deep learning book \"[dive into deeplearning](https://d2l.ai/)\", which provide interactive code examples implemented with [MXNet](https://mxnet.apache.org/versions/1.9.0/), PyTorch, and Tensorflow. \n>\n> But it took me ton's of time installing this module on the new M1 MacBook Air. Actually its easy, just to record this.\n\n<!-- more -->\n\n### How to install\n\n1.install miniforge\n\nalready did, easy.\n\n2.create a new environment with python=3.8\n\nm1 Mac officially support python>=3.9, but 3.8 can be installed.\n\n```shell\nconda create -n d2l python=3.8\nconda info --env\nconda activate d2l\n```\n\n3.install torch\n\ntorch==1.8.1 and torchvision==0.9.1 is recommended and tested in the book, but [# macOS is not currently supported for lts](https://pytorch.org/). \n\nSo the most convenient choice for mac is pytorch==1.10.2, torchvision==0.2.2\n\n```python\nconda install pytorch torchvision -c pytorch\n```\n\n#4.try install d2l directly\n\n```shell\nclear\npip install d2l==0.17.3\n```\n\nthousands lines of terrifying error will come out:\n\n```shell\n$ pip install d2l==0.17.3\nCollecting d2l==0.17.3\n  Using cached d2l-0.17.3-py3-none-any.whl (82 kB)\nCollecting jupyter==1.0.0\n  Using cached jupyter-1.0.0-py2.py3-none-any.whl (2.7 kB)\nCollecting numpy==1.18.5\n  Using cached numpy-1.18.5.zip (5.4 MB)\n  Installing build dependencies ... done\n  Getting requirements to build wheel ... done\n  Preparing metadata (pyproject.toml) ... done\nCollecting pandas==1.2.2\n  Using cached pandas-1.2.2.tar.gz (5.5 MB)\n  Installing build dependencies ... error\n  error: subprocess-exited-with-error\n  \n  × pip subprocess to install build dependencies did not run successfully.\n  │ exit code: 1\n  ╰─> [3659 lines of output]\n      Ignoring numpy: markers 'python_version == \"3.7\" and platform_system != \"AIX\"' don't match your environment\n      Ignoring numpy: markers 'python_version == \"3.7\" and platform_system == \"AIX\"' don't match your environment\n      Ignoring numpy: markers 'python_version == \"3.8\" and platform_system == \"AIX\"' don't match your environment\n      Ignoring numpy: markers 'python_version >= \"3.9\"' don't match your environment\n      Collecting setuptools\n        Using cached setuptools-60.9.3-py3-none-any.whl (1.1 MB)\n      Collecting wheel\n        Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\n      Collecting Cython<3,>=0.29.21\n        Using cached Cython-0.29.28-py2.py3-none-any.whl (983 kB)\n      Collecting numpy==1.17.3\n        Using cached numpy-1.17.3.zip (6.4 MB)\n        Preparing metadata (setup.py): started\n        Preparing metadata (setup.py): finished with status 'done'\n      Building wheels for collected packages: numpy\n        Building wheel for numpy (setup.py): started\n        Building wheel for numpy (setup.py): finished with status 'error'\n        error: subprocess-exited-with-error\n      \n        × python setup.py bdist_wheel did not run successfully.\n        │ exit code: 1\n        ╰─> [3286 lines of output]\n            Running from numpy source directory.\n            blas_opt_info:\n            blas_mkl_info:\n            customize UnixCCompiler\n              libraries mkl_rt not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            blis_info:\n            customize UnixCCompiler\n              libraries blis not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            openblas_info:\n            customize UnixCCompiler\n            customize UnixCCompiler\n              libraries openblas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_3_10_blas_threads_info:\n            Setting PTATLAS=ATLAS\n            customize UnixCCompiler\n              libraries tatlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_3_10_blas_info:\n            customize UnixCCompiler\n              libraries satlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_blas_threads_info:\n            Setting PTATLAS=ATLAS\n            customize UnixCCompiler\n              libraries ptf77blas,ptcblas,atlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_blas_info:\n            customize UnixCCompiler\n              libraries f77blas,cblas,atlas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            accelerate_info:\n            customize UnixCCompiler\n              libraries accelerate not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n            Library accelerate was not found. Ignoring\n            customize UnixCCompiler\n              libraries veclib not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n            Library veclib was not found. Ignoring\n              FOUND:\n                extra_compile_args = ['-faltivec', '-I/System/Library/Frameworks/vecLib.framework/Headers']\n                extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']\n                define_macros = [('NO_ATLAS_INFO', 3), ('HAVE_CBLAS', None)]\n      \n              FOUND:\n                extra_compile_args = ['-faltivec', '-I/System/Library/Frameworks/vecLib.framework/Headers']\n                extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']\n                define_macros = [('NO_ATLAS_INFO', 3), ('HAVE_CBLAS', None)]\n      \n            /bin/sh: svnversion: command not found\n            non-existing path in 'numpy/distutils': 'site.cfg'\n            lapack_opt_info:\n            lapack_mkl_info:\n            customize UnixCCompiler\n              libraries mkl_rt not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            openblas_lapack_info:\n            customize UnixCCompiler\n            customize UnixCCompiler\n              libraries openblas not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            openblas_clapack_info:\n            customize UnixCCompiler\n            customize UnixCCompiler\n              libraries openblas,lapack not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            flame_info:\n            customize UnixCCompiler\n              libraries flame not found in ['/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib', '/usr/local/lib', '/usr/lib']\n              NOT AVAILABLE\n      \n            atlas_3_10_threads_info:\n            Setting PTATLAS=ATLAS\n            customize UnixCCompiler\n              libraries lapack_atlas not found in /opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib\n...\n...\n...\n\t\n\t\t\t\t\t\tNone - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h']\n            building library \"npysort\" sources\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common' to include_dirs.\n            None - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_sort.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_partition.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_binsearch.h']\n            building extension \"numpy.core._dummy\" sources\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h' to sources.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h' to sources.\n            executing numpy/core/code_generators/generate_numpy_api.py\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h' to sources.\n            numpy.core - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h']\n            building extension \"numpy.core._multiarray_tests\" sources\n            building extension \"numpy.core._multiarray_umath\" sources\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h' to sources.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h' to sources.\n            executing numpy/core/code_generators/generate_numpy_api.py\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h' to sources.\n            executing numpy/core/code_generators/generate_ufunc_api.py\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h' to sources.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath' to include_dirs.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath' to include_dirs.\n              adding 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common' to include_dirs.\n            numpy.core - nothing done with h_files = ['build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/funcs.inc', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/simd.inc', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/matmul.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/clip.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/templ_common.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h', 'build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h']\n            building extension \"numpy.core._umath_tests\" sources\n            building extension \"numpy.core._rational_tests\" sources\n            building extension \"numpy.core._struct_ufunc_tests\" sources\n            building extension \"numpy.core._operand_flag_tests\" sources\n            building extension \"numpy.fft._pocketfft_internal\" sources\n            building extension \"numpy.linalg.lapack_lite\" sources\n              adding 'numpy/linalg/lapack_lite/python_xerbla.c' to sources.\n            building extension \"numpy.linalg._umath_linalg\" sources\n              adding 'numpy/linalg/lapack_lite/python_xerbla.c' to sources.\n            building extension \"numpy.random.mt19937\" sources\n            building extension \"numpy.random.philox\" sources\n            building extension \"numpy.random.pcg64\" sources\n            building extension \"numpy.random.sfc64\" sources\n            building extension \"numpy.random.common\" sources\n            building extension \"numpy.random.bit_generator\" sources\n            building extension \"numpy.random.generator\" sources\n            building extension \"numpy.random.bounded_integers\" sources\n            building extension \"numpy.random.mtrand\" sources\n            building data_files sources\n            build_src: building npy-pkg config files\n            running build_py\n            copying numpy/version.py -> build/lib.macosx-11.0-arm64-3.8/numpy\n            copying build/src.macosx-11.0-arm64-3.8/numpy/__config__.py -> build/lib.macosx-11.0-arm64-3.8/numpy\n            copying build/src.macosx-11.0-arm64-3.8/numpy/distutils/__config__.py -> build/lib.macosx-11.0-arm64-3.8/numpy/distutils\n            running build_clib\n            customize UnixCCompiler\n            customize UnixCCompiler using build_clib\n            running build_ext\n            customize UnixCCompiler\n            customize UnixCCompiler using build_ext\n            building 'numpy.core._multiarray_umath' extension\n            compiling C sources\n            C compiler: gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64\n      \n            compile options: '-DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c'\n            extra options: '-faltivec -I/System/Library/Frameworks/vecLib.framework/Headers'\n            gcc: numpy/core/src/multiarray/alloc.c\n            gcc: numpy/core/src/multiarray/array_assign_scalar.c\n            gcc: numpy/core/src/multiarray/buffer.c\n            gcc: numpy/core/src/multiarray/common.c\n            gcc: numpy/core/src/multiarray/conversion_utils.c\n            gcc: numpy/core/src/multiarray/datetime_strings.c\n            gcc: numpy/core/src/multiarray/descriptor.c\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/einsum.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/hashdescr.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/lowlevel_strided_loops.c\n            gcc: numpy/core/src/multiarray/multiarraymodule.c\n            gcc: numpy/core/src/multiarray/nditer_constr.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/refcount.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/scalarapi.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/multiarray/temp_elide.c\n            gcc: numpy/core/src/multiarray/vdot.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.c\n            gcc: numpy/core/src/umath/ufunc_object.c\n            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/scalarmath.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/npymath/npy_math.c\n            gcc: numpy/core/src/common/npy_longdouble.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/npymath/halffloat.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            gcc: numpy/core/src/common/numpyos.c\n            gcc: /private/var/folders/5y/pqfqz2md0njg2slq29yxp12w0000gn/T/pip-install-mxyh83f9/numpy_51614e6143884c3bbd246341eeb3b857/numpy/_build_utils/src/apple_sgemv_fix.c\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitlyclang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n      \n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            clang: error: the clang compiler does not support 'faltivec', please use -maltivec and include altivec.h explicitly\n            error: Command \"gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c numpy/core/src/multiarray/array_assign_scalar.c -o build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o -MMD -MF build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o.d -faltivec -I/System/Library/Frameworks/vecLib.framework/Headers\" failed with exit status 1\n            [end of output]\n      \n        note: This error originates from a subprocess, and is likely not a problem with pip.\n      error: legacy-install-failure\n      \n      × Encountered error while trying to install package.\n      ╰─> numpy\n      \n      note: This is an issue with the package mentioned above, not pip.\n      hint: See above for output from the failure.\n      [end of output]\n  \n  note: This error originates from a subprocess, and is likely not a problem with pip.\nerror: subprocess-exited-with-error\n\n× pip subprocess to install build dependencies did not run successfully.\n│ exit code: 1\n╰─> See above for output.\n\nnote: This error originates from a subprocess, and is likely not a problem with pip.\n```\n\nScroll to the top, it looks like `jupyter==1.0.0`, `pandas==1.2.2`, `numpy==1.18.5` are required, and numpy==1.18.5 is where the error comes from.\n\n4.As a result, install `jupyter==1.0.0` and `pandas==1.2.2` first\n\n```shell\npip install jupyter==1.0.0\n```\n\nconda can't be installed by pip, but can by conda\n\n```shell\nconda install pandas=1.2.2\n```\n\n5.numpy==1.18.5 can not be installed by pip or conda\n\nthanks to [tensorflow's wheel](https://github.com/apple/tensorflow_macos/releases/tag/v0.1alpha0), numpy==1.18.5's wheel for mac is included in the addons\n\ndownload and unzip [tensorflow_macos-0.1alpha0.tar.gz](https://github.com/apple/tensorflow_macos/releases/download/v0.1alpha0/tensorflow_macos-0.1alpha0.tar.gz)\n\ngo to the unzipped folder in terminal, and run\n\n```shell\npip install arm64/numpy-1.18.5-cp38-cp38-macosx_11_0_arm64.whl\n```\n\ncheck\n\n```shell\npip list |grep pandas\npip list |grep jupyter\npip list |grep numpy\n```\n\n```shell\npandas               1.2.2\njupyter              1.0.0\njupyter-client       7.1.2\njupyter-console      6.4.0\njupyter-core         4.9.2\njupyterlab-pygments  0.1.2\njupyterlab-widgets   1.0.2\nnumpy                1.18.5\n```\n\n5.install d2l\n\n```shell\npip install d2l\n```\n\nSucess!\n\n### Reference  \n\nhttps://zh-v2.d2l.ai/chapter_installation/index.html\n\nhttps://parthiban-kannan.medium.com/install-tensorflow-on-apple-macbook-m1-release-c1ce7e65cd0\n\nhttps://github.com/apple/tensorflow_macos/issues/48\n\n\n\n\n\n","slug":"install-d2l-moudule-on-apple-m1-chip-for-deep-learning","published":1,"updated":"2022-03-04T06:02:16.090Z","_id":"cl06vdjd800001byb26ss3hrc","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p><a href=\"https://pypi.org/project/d2l/\">d2l</a> is a small python module wheel that needed when read the useful deep learning book “<a href=\"https://d2l.ai/\">dive into deeplearning</a>“, which provide interactive code examples implemented with <a href=\"https://mxnet.apache.org/versions/1.9.0/\">MXNet</a>, PyTorch, and Tensorflow. </p>\n<p>But it took me ton’s of time installing this module on the new M1 MacBook Air. Actually its easy, just to record this.</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h3 id=\"How-to-install\"><a href=\"#How-to-install\" class=\"headerlink\" title=\"How to install\"></a>How to install</h3><p>1.install miniforge</p>\n<p>already did, easy.</p>\n<p>2.create a new environment with python&#x3D;3.8</p>\n<p>m1 Mac officially support python&gt;&#x3D;3.9, but 3.8 can be installed.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n d2l python=3.8</span><br><span class=\"line\">conda info --env</span><br><span class=\"line\">conda activate d2l</span><br></pre></td></tr></table></figure>\n\n<p>3.install torch</p>\n<p>torch&#x3D;&#x3D;1.8.1 and torchvision&#x3D;&#x3D;0.9.1 is recommended and tested in the book, but <a href=\"https://pytorch.org/\"># macOS is not currently supported for lts</a>. </p>\n<p>So the most convenient choice for mac is pytorch&#x3D;&#x3D;1.10.2, torchvision&#x3D;&#x3D;0.2.2</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda install pytorch torchvision -c pytorch</span><br></pre></td></tr></table></figure>\n\n<p>#4.try install d2l directly</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clear</span><br><span class=\"line\">pip install d2l==0.17.3</span><br></pre></td></tr></table></figure>\n\n<p>thousands lines of terrifying error will come out:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">pip install d2l==0.17.3</span></span><br><span class=\"line\">Collecting d2l==0.17.3</span><br><span class=\"line\">  Using cached d2l-0.17.3-py3-none-any.whl (82 kB)</span><br><span class=\"line\">Collecting jupyter==1.0.0</span><br><span class=\"line\">  Using cached jupyter-1.0.0-py2.py3-none-any.whl (2.7 kB)</span><br><span class=\"line\">Collecting numpy==1.18.5</span><br><span class=\"line\">  Using cached numpy-1.18.5.zip (5.4 MB)</span><br><span class=\"line\">  Installing build dependencies ... done</span><br><span class=\"line\">  Getting requirements to build wheel ... done</span><br><span class=\"line\">  Preparing metadata (pyproject.toml) ... done</span><br><span class=\"line\">Collecting pandas==1.2.2</span><br><span class=\"line\">  Using cached pandas-1.2.2.tar.gz (5.5 MB)</span><br><span class=\"line\">  Installing build dependencies ... error</span><br><span class=\"line\">  error: subprocess-exited-with-error</span><br><span class=\"line\">  </span><br><span class=\"line\">  × pip subprocess to install build dependencies did not run successfully.</span><br><span class=\"line\">  │ exit code: 1</span><br><span class=\"line\">  ╰─&gt; [3659 lines of output]</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version == &quot;3.7&quot; and platform_system != &quot;AIX&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version == &quot;3.7&quot; and platform_system == &quot;AIX&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version == &quot;3.8&quot; and platform_system == &quot;AIX&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version &gt;= &quot;3.9&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Collecting setuptools</span><br><span class=\"line\">        Using cached setuptools-60.9.3-py3-none-any.whl (1.1 MB)</span><br><span class=\"line\">      Collecting wheel</span><br><span class=\"line\">        Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)</span><br><span class=\"line\">      Collecting Cython&lt;3,&gt;=0.29.21</span><br><span class=\"line\">        Using cached Cython-0.29.28-py2.py3-none-any.whl (983 kB)</span><br><span class=\"line\">      Collecting numpy==1.17.3</span><br><span class=\"line\">        Using cached numpy-1.17.3.zip (6.4 MB)</span><br><span class=\"line\">        Preparing metadata (setup.py): started</span><br><span class=\"line\">        Preparing metadata (setup.py): finished with status &#x27;done&#x27;</span><br><span class=\"line\">      Building wheels for collected packages: numpy</span><br><span class=\"line\">        Building wheel for numpy (setup.py): started</span><br><span class=\"line\">        Building wheel for numpy (setup.py): finished with status &#x27;error&#x27;</span><br><span class=\"line\">        error: subprocess-exited-with-error</span><br><span class=\"line\">      </span><br><span class=\"line\">        × python setup.py bdist_wheel did not run successfully.</span><br><span class=\"line\">        │ exit code: 1</span><br><span class=\"line\">        ╰─&gt; [3286 lines of output]</span><br><span class=\"line\">            Running from numpy source directory.</span><br><span class=\"line\">            blas_opt_info:</span><br><span class=\"line\">            blas_mkl_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries mkl_rt not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            blis_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries blis not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            openblas_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries openblas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_3_10_blas_threads_info:</span><br><span class=\"line\">            Setting PTATLAS=ATLAS</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries tatlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_3_10_blas_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries satlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_blas_threads_info:</span><br><span class=\"line\">            Setting PTATLAS=ATLAS</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries ptf77blas,ptcblas,atlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_blas_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries f77blas,cblas,atlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            accelerate_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries accelerate not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">            Library accelerate was not found. Ignoring</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries veclib not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">            Library veclib was not found. Ignoring</span><br><span class=\"line\">              FOUND:</span><br><span class=\"line\">                extra_compile_args = [&#x27;-faltivec&#x27;, &#x27;-I/System/Library/Frameworks/vecLib.framework/Headers&#x27;]</span><br><span class=\"line\">                extra_link_args = [&#x27;-Wl,-framework&#x27;, &#x27;-Wl,Accelerate&#x27;]</span><br><span class=\"line\">                define_macros = [(&#x27;NO_ATLAS_INFO&#x27;, 3), (&#x27;HAVE_CBLAS&#x27;, None)]</span><br><span class=\"line\">      </span><br><span class=\"line\">              FOUND:</span><br><span class=\"line\">                extra_compile_args = [&#x27;-faltivec&#x27;, &#x27;-I/System/Library/Frameworks/vecLib.framework/Headers&#x27;]</span><br><span class=\"line\">                extra_link_args = [&#x27;-Wl,-framework&#x27;, &#x27;-Wl,Accelerate&#x27;]</span><br><span class=\"line\">                define_macros = [(&#x27;NO_ATLAS_INFO&#x27;, 3), (&#x27;HAVE_CBLAS&#x27;, None)]</span><br><span class=\"line\">      </span><br><span class=\"line\">            /bin/sh: svnversion: command not found</span><br><span class=\"line\">            non-existing path in &#x27;numpy/distutils&#x27;: &#x27;site.cfg&#x27;</span><br><span class=\"line\">            lapack_opt_info:</span><br><span class=\"line\">            lapack_mkl_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries mkl_rt not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            openblas_lapack_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries openblas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            openblas_clapack_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries openblas,lapack not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            flame_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries flame not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_3_10_threads_info:</span><br><span class=\"line\">            Setting PTATLAS=ATLAS</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries lapack_atlas not found in /opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t\t\t\t\tNone - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h&#x27;]</span><br><span class=\"line\">            building library &quot;npysort&quot; sources</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common&#x27; to include_dirs.</span><br><span class=\"line\">            None - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_sort.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_partition.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_binsearch.h&#x27;]</span><br><span class=\"line\">            building extension &quot;numpy.core._dummy&quot; sources</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27; to sources.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27; to sources.</span><br><span class=\"line\">            executing numpy/core/code_generators/generate_numpy_api.py</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27; to sources.</span><br><span class=\"line\">            numpy.core - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27;]</span><br><span class=\"line\">            building extension &quot;numpy.core._multiarray_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._multiarray_umath&quot; sources</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27; to sources.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27; to sources.</span><br><span class=\"line\">            executing numpy/core/code_generators/generate_numpy_api.py</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27; to sources.</span><br><span class=\"line\">            executing numpy/core/code_generators/generate_ufunc_api.py</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h&#x27; to sources.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath&#x27; to include_dirs.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath&#x27; to include_dirs.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common&#x27; to include_dirs.</span><br><span class=\"line\">            numpy.core - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/funcs.inc&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/simd.inc&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/matmul.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/clip.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/templ_common.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h&#x27;]</span><br><span class=\"line\">            building extension &quot;numpy.core._umath_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._rational_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._struct_ufunc_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._operand_flag_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.fft._pocketfft_internal&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.linalg.lapack_lite&quot; sources</span><br><span class=\"line\">              adding &#x27;numpy/linalg/lapack_lite/python_xerbla.c&#x27; to sources.</span><br><span class=\"line\">            building extension &quot;numpy.linalg._umath_linalg&quot; sources</span><br><span class=\"line\">              adding &#x27;numpy/linalg/lapack_lite/python_xerbla.c&#x27; to sources.</span><br><span class=\"line\">            building extension &quot;numpy.random.mt19937&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.philox&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.pcg64&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.sfc64&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.common&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.bit_generator&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.generator&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.bounded_integers&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.mtrand&quot; sources</span><br><span class=\"line\">            building data_files sources</span><br><span class=\"line\">            build_src: building npy-pkg config files</span><br><span class=\"line\">            running build_py</span><br><span class=\"line\">            copying numpy/version.py -&gt; build/lib.macosx-11.0-arm64-3.8/numpy</span><br><span class=\"line\">            copying build/src.macosx-11.0-arm64-3.8/numpy/__config__.py -&gt; build/lib.macosx-11.0-arm64-3.8/numpy</span><br><span class=\"line\">            copying build/src.macosx-11.0-arm64-3.8/numpy/distutils/__config__.py -&gt; build/lib.macosx-11.0-arm64-3.8/numpy/distutils</span><br><span class=\"line\">            running build_clib</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler using build_clib</span><br><span class=\"line\">            running build_ext</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler using build_ext</span><br><span class=\"line\">            building &#x27;numpy.core._multiarray_umath&#x27; extension</span><br><span class=\"line\">            compiling C sources</span><br><span class=\"line\">            C compiler: gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64</span><br><span class=\"line\">      </span><br><span class=\"line\">            compile options: &#x27;-DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c&#x27;</span><br><span class=\"line\">            extra options: &#x27;-faltivec -I/System/Library/Frameworks/vecLib.framework/Headers&#x27;</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/alloc.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/array_assign_scalar.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/buffer.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/common.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/conversion_utils.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/datetime_strings.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/descriptor.c</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/einsum.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/hashdescr.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/lowlevel_strided_loops.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/multiarraymodule.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/nditer_constr.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/refcount.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/scalarapi.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/temp_elide.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/vdot.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.c</span><br><span class=\"line\">            gcc: numpy/core/src/umath/ufunc_object.c</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/scalarmath.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/npymath/npy_math.c</span><br><span class=\"line\">            gcc: numpy/core/src/common/npy_longdouble.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/npymath/halffloat.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/common/numpyos.c</span><br><span class=\"line\">            gcc: /private/var/folders/5y/pqfqz2md0njg2slq29yxp12w0000gn/T/pip-install-mxyh83f9/numpy_51614e6143884c3bbd246341eeb3b857/numpy/_build_utils/src/apple_sgemv_fix.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitlyclang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">      </span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            error: Command &quot;gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c numpy/core/src/multiarray/array_assign_scalar.c -o build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o -MMD -MF build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o.d -faltivec -I/System/Library/Frameworks/vecLib.framework/Headers&quot; failed with exit status 1</span><br><span class=\"line\">            [end of output]</span><br><span class=\"line\">      </span><br><span class=\"line\">        note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class=\"line\">      error: legacy-install-failure</span><br><span class=\"line\">      </span><br><span class=\"line\">      × Encountered error while trying to install package.</span><br><span class=\"line\">      ╰─&gt; numpy</span><br><span class=\"line\">      </span><br><span class=\"line\">      note: This is an issue with the package mentioned above, not pip.</span><br><span class=\"line\">      hint: See above for output from the failure.</span><br><span class=\"line\">      [end of output]</span><br><span class=\"line\">  </span><br><span class=\"line\">  note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class=\"line\">error: subprocess-exited-with-error</span><br><span class=\"line\"></span><br><span class=\"line\">× pip subprocess to install build dependencies did not run successfully.</span><br><span class=\"line\">│ exit code: 1</span><br><span class=\"line\">╰─&gt; See above for output.</span><br><span class=\"line\"></span><br><span class=\"line\">note: This error originates from a subprocess, and is likely not a problem with pip.</span><br></pre></td></tr></table></figure>\n\n<p>Scroll to the top, it looks like <code>jupyter==1.0.0</code>, <code>pandas==1.2.2</code>, <code>numpy==1.18.5</code> are required, and numpy&#x3D;&#x3D;1.18.5 is where the error comes from.</p>\n<p>4.As a result, install <code>jupyter==1.0.0</code> and <code>pandas==1.2.2</code> first</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install jupyter==1.0.0</span><br></pre></td></tr></table></figure>\n\n<p>conda can’t be installed by pip, but can by conda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda install pandas=1.2.2</span><br></pre></td></tr></table></figure>\n\n<p>5.numpy&#x3D;&#x3D;1.18.5 can not be installed by pip or conda</p>\n<p>thanks to <a href=\"https://github.com/apple/tensorflow_macos/releases/tag/v0.1alpha0\">tensorflow’s wheel</a>, numpy&#x3D;&#x3D;1.18.5’s wheel for mac is included in the addons</p>\n<p>download and unzip <a href=\"https://github.com/apple/tensorflow_macos/releases/download/v0.1alpha0/tensorflow_macos-0.1alpha0.tar.gz\">tensorflow_macos-0.1alpha0.tar.gz</a></p>\n<p>go to the unzipped folder in terminal, and run</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install arm64/numpy-1.18.5-cp38-cp38-macosx_11_0_arm64.whl</span><br></pre></td></tr></table></figure>\n\n<p>check</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip list |grep pandas</span><br><span class=\"line\">pip list |grep jupyter</span><br><span class=\"line\">pip list |grep numpy</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pandas               1.2.2</span><br><span class=\"line\">jupyter              1.0.0</span><br><span class=\"line\">jupyter-client       7.1.2</span><br><span class=\"line\">jupyter-console      6.4.0</span><br><span class=\"line\">jupyter-core         4.9.2</span><br><span class=\"line\">jupyterlab-pygments  0.1.2</span><br><span class=\"line\">jupyterlab-widgets   1.0.2</span><br><span class=\"line\">numpy                1.18.5</span><br></pre></td></tr></table></figure>\n\n<p>5.install d2l</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install d2l</span><br></pre></td></tr></table></figure>\n\n<p>Sucess!</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p><a href=\"https://zh-v2.d2l.ai/chapter_installation/index.html\">https://zh-v2.d2l.ai/chapter_installation/index.html</a></p>\n<p><a href=\"https://parthiban-kannan.medium.com/install-tensorflow-on-apple-macbook-m1-release-c1ce7e65cd0\">https://parthiban-kannan.medium.com/install-tensorflow-on-apple-macbook-m1-release-c1ce7e65cd0</a></p>\n<p><a href=\"https://github.com/apple/tensorflow_macos/issues/48\">https://github.com/apple/tensorflow_macos/issues/48</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p><a href=\"https://pypi.org/project/d2l/\">d2l</a> is a small python module wheel that needed when read the useful deep learning book “<a href=\"https://d2l.ai/\">dive into deeplearning</a>“, which provide interactive code examples implemented with <a href=\"https://mxnet.apache.org/versions/1.9.0/\">MXNet</a>, PyTorch, and Tensorflow. </p>\n<p>But it took me ton’s of time installing this module on the new M1 MacBook Air. Actually its easy, just to record this.</p>\n</blockquote>","more":"<h3 id=\"How-to-install\"><a href=\"#How-to-install\" class=\"headerlink\" title=\"How to install\"></a>How to install</h3><p>1.install miniforge</p>\n<p>already did, easy.</p>\n<p>2.create a new environment with python&#x3D;3.8</p>\n<p>m1 Mac officially support python&gt;&#x3D;3.9, but 3.8 can be installed.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n d2l python=3.8</span><br><span class=\"line\">conda info --env</span><br><span class=\"line\">conda activate d2l</span><br></pre></td></tr></table></figure>\n\n<p>3.install torch</p>\n<p>torch&#x3D;&#x3D;1.8.1 and torchvision&#x3D;&#x3D;0.9.1 is recommended and tested in the book, but <a href=\"https://pytorch.org/\"># macOS is not currently supported for lts</a>. </p>\n<p>So the most convenient choice for mac is pytorch&#x3D;&#x3D;1.10.2, torchvision&#x3D;&#x3D;0.2.2</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda install pytorch torchvision -c pytorch</span><br></pre></td></tr></table></figure>\n\n<p>#4.try install d2l directly</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clear</span><br><span class=\"line\">pip install d2l==0.17.3</span><br></pre></td></tr></table></figure>\n\n<p>thousands lines of terrifying error will come out:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$ </span><span class=\"language-bash\">pip install d2l==0.17.3</span></span><br><span class=\"line\">Collecting d2l==0.17.3</span><br><span class=\"line\">  Using cached d2l-0.17.3-py3-none-any.whl (82 kB)</span><br><span class=\"line\">Collecting jupyter==1.0.0</span><br><span class=\"line\">  Using cached jupyter-1.0.0-py2.py3-none-any.whl (2.7 kB)</span><br><span class=\"line\">Collecting numpy==1.18.5</span><br><span class=\"line\">  Using cached numpy-1.18.5.zip (5.4 MB)</span><br><span class=\"line\">  Installing build dependencies ... done</span><br><span class=\"line\">  Getting requirements to build wheel ... done</span><br><span class=\"line\">  Preparing metadata (pyproject.toml) ... done</span><br><span class=\"line\">Collecting pandas==1.2.2</span><br><span class=\"line\">  Using cached pandas-1.2.2.tar.gz (5.5 MB)</span><br><span class=\"line\">  Installing build dependencies ... error</span><br><span class=\"line\">  error: subprocess-exited-with-error</span><br><span class=\"line\">  </span><br><span class=\"line\">  × pip subprocess to install build dependencies did not run successfully.</span><br><span class=\"line\">  │ exit code: 1</span><br><span class=\"line\">  ╰─&gt; [3659 lines of output]</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version == &quot;3.7&quot; and platform_system != &quot;AIX&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version == &quot;3.7&quot; and platform_system == &quot;AIX&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version == &quot;3.8&quot; and platform_system == &quot;AIX&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Ignoring numpy: markers &#x27;python_version &gt;= &quot;3.9&quot;&#x27; don&#x27;t match your environment</span><br><span class=\"line\">      Collecting setuptools</span><br><span class=\"line\">        Using cached setuptools-60.9.3-py3-none-any.whl (1.1 MB)</span><br><span class=\"line\">      Collecting wheel</span><br><span class=\"line\">        Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)</span><br><span class=\"line\">      Collecting Cython&lt;3,&gt;=0.29.21</span><br><span class=\"line\">        Using cached Cython-0.29.28-py2.py3-none-any.whl (983 kB)</span><br><span class=\"line\">      Collecting numpy==1.17.3</span><br><span class=\"line\">        Using cached numpy-1.17.3.zip (6.4 MB)</span><br><span class=\"line\">        Preparing metadata (setup.py): started</span><br><span class=\"line\">        Preparing metadata (setup.py): finished with status &#x27;done&#x27;</span><br><span class=\"line\">      Building wheels for collected packages: numpy</span><br><span class=\"line\">        Building wheel for numpy (setup.py): started</span><br><span class=\"line\">        Building wheel for numpy (setup.py): finished with status &#x27;error&#x27;</span><br><span class=\"line\">        error: subprocess-exited-with-error</span><br><span class=\"line\">      </span><br><span class=\"line\">        × python setup.py bdist_wheel did not run successfully.</span><br><span class=\"line\">        │ exit code: 1</span><br><span class=\"line\">        ╰─&gt; [3286 lines of output]</span><br><span class=\"line\">            Running from numpy source directory.</span><br><span class=\"line\">            blas_opt_info:</span><br><span class=\"line\">            blas_mkl_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries mkl_rt not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            blis_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries blis not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            openblas_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries openblas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_3_10_blas_threads_info:</span><br><span class=\"line\">            Setting PTATLAS=ATLAS</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries tatlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_3_10_blas_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries satlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_blas_threads_info:</span><br><span class=\"line\">            Setting PTATLAS=ATLAS</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries ptf77blas,ptcblas,atlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_blas_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries f77blas,cblas,atlas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            accelerate_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries accelerate not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">            Library accelerate was not found. Ignoring</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries veclib not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">            Library veclib was not found. Ignoring</span><br><span class=\"line\">              FOUND:</span><br><span class=\"line\">                extra_compile_args = [&#x27;-faltivec&#x27;, &#x27;-I/System/Library/Frameworks/vecLib.framework/Headers&#x27;]</span><br><span class=\"line\">                extra_link_args = [&#x27;-Wl,-framework&#x27;, &#x27;-Wl,Accelerate&#x27;]</span><br><span class=\"line\">                define_macros = [(&#x27;NO_ATLAS_INFO&#x27;, 3), (&#x27;HAVE_CBLAS&#x27;, None)]</span><br><span class=\"line\">      </span><br><span class=\"line\">              FOUND:</span><br><span class=\"line\">                extra_compile_args = [&#x27;-faltivec&#x27;, &#x27;-I/System/Library/Frameworks/vecLib.framework/Headers&#x27;]</span><br><span class=\"line\">                extra_link_args = [&#x27;-Wl,-framework&#x27;, &#x27;-Wl,Accelerate&#x27;]</span><br><span class=\"line\">                define_macros = [(&#x27;NO_ATLAS_INFO&#x27;, 3), (&#x27;HAVE_CBLAS&#x27;, None)]</span><br><span class=\"line\">      </span><br><span class=\"line\">            /bin/sh: svnversion: command not found</span><br><span class=\"line\">            non-existing path in &#x27;numpy/distutils&#x27;: &#x27;site.cfg&#x27;</span><br><span class=\"line\">            lapack_opt_info:</span><br><span class=\"line\">            lapack_mkl_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries mkl_rt not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            openblas_lapack_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries openblas not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            openblas_clapack_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries openblas,lapack not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            flame_info:</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries flame not found in [&#x27;/opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib&#x27;, &#x27;/usr/local/lib&#x27;, &#x27;/usr/lib&#x27;]</span><br><span class=\"line\">              NOT AVAILABLE</span><br><span class=\"line\">      </span><br><span class=\"line\">            atlas_3_10_threads_info:</span><br><span class=\"line\">            Setting PTATLAS=ATLAS</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">              libraries lapack_atlas not found in /opt/homebrew/Caskroom/miniforge/base/envs/d2d/lib</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t\t\t\t\tNone - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h&#x27;]</span><br><span class=\"line\">            building library &quot;npysort&quot; sources</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common&#x27; to include_dirs.</span><br><span class=\"line\">            None - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_sort.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_partition.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/npy_binsearch.h&#x27;]</span><br><span class=\"line\">            building extension &quot;numpy.core._dummy&quot; sources</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27; to sources.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27; to sources.</span><br><span class=\"line\">            executing numpy/core/code_generators/generate_numpy_api.py</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27; to sources.</span><br><span class=\"line\">            numpy.core - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27;]</span><br><span class=\"line\">            building extension &quot;numpy.core._multiarray_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._multiarray_umath&quot; sources</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27; to sources.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27; to sources.</span><br><span class=\"line\">            executing numpy/core/code_generators/generate_numpy_api.py</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27; to sources.</span><br><span class=\"line\">            executing numpy/core/code_generators/generate_ufunc_api.py</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h&#x27; to sources.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath&#x27; to include_dirs.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath&#x27; to include_dirs.</span><br><span class=\"line\">              adding &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common&#x27; to include_dirs.</span><br><span class=\"line\">            numpy.core - nothing done with h_files = [&#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/funcs.inc&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/simd.inc&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/matmul.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/clip.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath/npy_math_internal.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/src/common/templ_common.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/config.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/_numpyconfig.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__multiarray_api.h&#x27;, &#x27;build/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy/__ufunc_api.h&#x27;]</span><br><span class=\"line\">            building extension &quot;numpy.core._umath_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._rational_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._struct_ufunc_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.core._operand_flag_tests&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.fft._pocketfft_internal&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.linalg.lapack_lite&quot; sources</span><br><span class=\"line\">              adding &#x27;numpy/linalg/lapack_lite/python_xerbla.c&#x27; to sources.</span><br><span class=\"line\">            building extension &quot;numpy.linalg._umath_linalg&quot; sources</span><br><span class=\"line\">              adding &#x27;numpy/linalg/lapack_lite/python_xerbla.c&#x27; to sources.</span><br><span class=\"line\">            building extension &quot;numpy.random.mt19937&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.philox&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.pcg64&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.sfc64&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.common&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.bit_generator&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.generator&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.bounded_integers&quot; sources</span><br><span class=\"line\">            building extension &quot;numpy.random.mtrand&quot; sources</span><br><span class=\"line\">            building data_files sources</span><br><span class=\"line\">            build_src: building npy-pkg config files</span><br><span class=\"line\">            running build_py</span><br><span class=\"line\">            copying numpy/version.py -&gt; build/lib.macosx-11.0-arm64-3.8/numpy</span><br><span class=\"line\">            copying build/src.macosx-11.0-arm64-3.8/numpy/__config__.py -&gt; build/lib.macosx-11.0-arm64-3.8/numpy</span><br><span class=\"line\">            copying build/src.macosx-11.0-arm64-3.8/numpy/distutils/__config__.py -&gt; build/lib.macosx-11.0-arm64-3.8/numpy/distutils</span><br><span class=\"line\">            running build_clib</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler using build_clib</span><br><span class=\"line\">            running build_ext</span><br><span class=\"line\">            customize UnixCCompiler</span><br><span class=\"line\">            customize UnixCCompiler using build_ext</span><br><span class=\"line\">            building &#x27;numpy.core._multiarray_umath&#x27; extension</span><br><span class=\"line\">            compiling C sources</span><br><span class=\"line\">            C compiler: gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64</span><br><span class=\"line\">      </span><br><span class=\"line\">            compile options: &#x27;-DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c&#x27;</span><br><span class=\"line\">            extra options: &#x27;-faltivec -I/System/Library/Frameworks/vecLib.framework/Headers&#x27;</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/alloc.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/array_assign_scalar.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/buffer.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/common.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/conversion_utils.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/datetime_strings.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/descriptor.c</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/einsum.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/hashdescr.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/lowlevel_strided_loops.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/multiarraymodule.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/nditer_constr.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/refcount.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/scalarapi.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/temp_elide.c</span><br><span class=\"line\">            gcc: numpy/core/src/multiarray/vdot.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/loops.c</span><br><span class=\"line\">            gcc: numpy/core/src/umath/ufunc_object.c</span><br><span class=\"line\">            gcc: build/src.macosx-11.0-arm64-3.8/numpy/core/src/umath/scalarmath.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/npymath/npy_math.c</span><br><span class=\"line\">            gcc: numpy/core/src/common/npy_longdouble.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/npymath/halffloat.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            gcc: numpy/core/src/common/numpyos.c</span><br><span class=\"line\">            gcc: /private/var/folders/5y/pqfqz2md0njg2slq29yxp12w0000gn/T/pip-install-mxyh83f9/numpy_51614e6143884c3bbd246341eeb3b857/numpy/_build_utils/src/apple_sgemv_fix.c</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitlyclang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">      </span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            clang: error: the clang compiler does not support &#x27;faltivec&#x27;, please use -maltivec and include altivec.h explicitly</span><br><span class=\"line\">            error: Command &quot;gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include -arch arm64 -DNPY_INTERNAL_BUILD=1 -DHAVE_NPY_CONFIG_H=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGEFILE64_SOURCE=1 -DNO_ATLAS_INFO=3 -DHAVE_CBLAS -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/umath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Inumpy/core/include -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/include/numpy -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/opt/homebrew/Caskroom/miniforge/base/envs/d2d/include/python3.8 -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/common -Ibuild/src.macosx-11.0-arm64-3.8/numpy/core/src/npymath -c numpy/core/src/multiarray/array_assign_scalar.c -o build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o -MMD -MF build/temp.macosx-11.0-arm64-3.8/numpy/core/src/multiarray/array_assign_scalar.o.d -faltivec -I/System/Library/Frameworks/vecLib.framework/Headers&quot; failed with exit status 1</span><br><span class=\"line\">            [end of output]</span><br><span class=\"line\">      </span><br><span class=\"line\">        note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class=\"line\">      error: legacy-install-failure</span><br><span class=\"line\">      </span><br><span class=\"line\">      × Encountered error while trying to install package.</span><br><span class=\"line\">      ╰─&gt; numpy</span><br><span class=\"line\">      </span><br><span class=\"line\">      note: This is an issue with the package mentioned above, not pip.</span><br><span class=\"line\">      hint: See above for output from the failure.</span><br><span class=\"line\">      [end of output]</span><br><span class=\"line\">  </span><br><span class=\"line\">  note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class=\"line\">error: subprocess-exited-with-error</span><br><span class=\"line\"></span><br><span class=\"line\">× pip subprocess to install build dependencies did not run successfully.</span><br><span class=\"line\">│ exit code: 1</span><br><span class=\"line\">╰─&gt; See above for output.</span><br><span class=\"line\"></span><br><span class=\"line\">note: This error originates from a subprocess, and is likely not a problem with pip.</span><br></pre></td></tr></table></figure>\n\n<p>Scroll to the top, it looks like <code>jupyter==1.0.0</code>, <code>pandas==1.2.2</code>, <code>numpy==1.18.5</code> are required, and numpy&#x3D;&#x3D;1.18.5 is where the error comes from.</p>\n<p>4.As a result, install <code>jupyter==1.0.0</code> and <code>pandas==1.2.2</code> first</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install jupyter==1.0.0</span><br></pre></td></tr></table></figure>\n\n<p>conda can’t be installed by pip, but can by conda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda install pandas=1.2.2</span><br></pre></td></tr></table></figure>\n\n<p>5.numpy&#x3D;&#x3D;1.18.5 can not be installed by pip or conda</p>\n<p>thanks to <a href=\"https://github.com/apple/tensorflow_macos/releases/tag/v0.1alpha0\">tensorflow’s wheel</a>, numpy&#x3D;&#x3D;1.18.5’s wheel for mac is included in the addons</p>\n<p>download and unzip <a href=\"https://github.com/apple/tensorflow_macos/releases/download/v0.1alpha0/tensorflow_macos-0.1alpha0.tar.gz\">tensorflow_macos-0.1alpha0.tar.gz</a></p>\n<p>go to the unzipped folder in terminal, and run</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install arm64/numpy-1.18.5-cp38-cp38-macosx_11_0_arm64.whl</span><br></pre></td></tr></table></figure>\n\n<p>check</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip list |grep pandas</span><br><span class=\"line\">pip list |grep jupyter</span><br><span class=\"line\">pip list |grep numpy</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pandas               1.2.2</span><br><span class=\"line\">jupyter              1.0.0</span><br><span class=\"line\">jupyter-client       7.1.2</span><br><span class=\"line\">jupyter-console      6.4.0</span><br><span class=\"line\">jupyter-core         4.9.2</span><br><span class=\"line\">jupyterlab-pygments  0.1.2</span><br><span class=\"line\">jupyterlab-widgets   1.0.2</span><br><span class=\"line\">numpy                1.18.5</span><br></pre></td></tr></table></figure>\n\n<p>5.install d2l</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install d2l</span><br></pre></td></tr></table></figure>\n\n<p>Sucess!</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p><a href=\"https://zh-v2.d2l.ai/chapter_installation/index.html\">https://zh-v2.d2l.ai/chapter_installation/index.html</a></p>\n<p><a href=\"https://parthiban-kannan.medium.com/install-tensorflow-on-apple-macbook-m1-release-c1ce7e65cd0\">https://parthiban-kannan.medium.com/install-tensorflow-on-apple-macbook-m1-release-c1ce7e65cd0</a></p>\n<p><a href=\"https://github.com/apple/tensorflow_macos/issues/48\">https://github.com/apple/tensorflow_macos/issues/48</a></p>"},{"title":"Intro and Pytorch Implementation of Label Smoothing Regularization (LSR)","author":"daydreamatnight","toc":true,"declare":true,"date":"2022-03-04T05:59:58.000Z","_content":"\n> Recently, I joined a [Kaggle image classification competition](https://www.kaggle.com/c/classify-leaves/), I used the pretrained ResNet50 plus other tricks and here is to record some of them I've learned for now. \n\n> Soft label is a commonly used trick to prevent overfitting. It can always gain some extra points on the image classification tasks. In this article, I have put together useful information from theory to implementation of it.\n\n<!-- more -->\n\n### Introduction: from hard label to soft label\n\nIn deep learning, the neural network is basically a super powerful non-linear regression machine aimed to fit a function between the input and the label. And the result is always called label.\n\nHard label, in another word:  the one-hot vector, is the most commonly type of label that is used. For example, in this [Kaggle image classification competition](https://www.kaggle.com/c/classify-leaves/), to digitalize the different name of the leaves, it is intuitive to encode the leaves categories as: 0, 1, 2, 3. And the factorized target labels would be somehow like [1,3,0...] where each element stands for the categories of the data. With the resulting category dictionary, it can be easily decoded after the training.\n\n<img src=\"leave%20class%20code.png\" alt=\"leave class code\" style=\"zoom:22%;\" />\n\nActually, there is a slightly difference in the binary world. What usually do is, the previously factorized label will be extended to be a 2-dimensional \"on-hot\" matrix where the elements stands for the probability of each class. And the network is aimed to train itself to make inference label nearest to the target label.\n\n<img src=\"hard%20label.png\" alt=\"hard label\" style=\"zoom:22%;\" />\n\nSoft label is just slightly deteriorate the strong one-hot label into a weaker one.\n\n<img src=\"soft%20label.png\" alt=\"soft label\" style=\"zoom:22%;\" />\n\n### Simple explanation: How loss function lost information?\n\nIn the cross entropy loss function, where `y_inference` and `y_grountruth` stands for inference and target label, n stands for the number of class.\n\n<img src=\"Cross%20entropy%20loss%20function.png\" alt=\"Cross entropy loss function\" style=\"zoom:22%;\" />\n\nWith the one-hot label, the components are 0 except for the true category. In a other word, the `y_inference` of the wrong category is not considered at all i.e. the information of the wrong category is lost. Which is against the real word classification. \n\n### Effectiveness: Visualization\n\nIn [When does label smoothing help?](https://arxiv.org/pdf/1906.02629.pdf)  Hinton shows the feature map difference between without and with LSR:\n\n<img src=\"Label%20smoothing%20feature%20norm.png\" alt=\"Label smoothing feature norm\" style=\"zoom:80%;\" />\n\n>- When label smoothing is applied, the clusters are much tighter because label smoothing encourages that each example in the training set is to be equidistant from all other class’s templates.\n>- With hard targets, the clusters for semantically similar classes (for example different breed of dogs in ImageNet), are isotropic whereas, with label smoothing, clusters lie in an arc as shown in the third row. If you mix two semantically similar classes with a third semantically different class, the clusters are still much better than the ones obtained with hard targets as shown in the fourth row.\n\n### Experiment: apply in competition\n\nLabel smoothing can be easily applied in [Tensorflow](https://www.tensorflow.org/api_docs/python/tf/keras/losses/CategoricalCrossentropy), but there is no such thing in PyTorch.  So overwrite the Cross-entropy loss function with LSR (implemented in 2 ways): \n\n```python\nclass LSR(nn.Module):\n    \"\"\"NLL loss with label smoothing.\n    \"\"\"\n    def __init__(self, smoothing=0.0):\n        \"\"\"Constructor for the LSR module.\n        :param smoothing: label smoothing factor\n        \"\"\"\n        super(LSR, self).__init__()\n        self.confidence = 1.0 - smoothing\n        self.smoothing = smoothing\n\n    def forward(self, x, target):\n        logprobs = torch.nn.functional.log_softmax(x, dim=-1)\n        nll_loss = -logprobs.gather(dim=-1, index=target.unsqueeze(1))\n        nll_loss = nll_loss.squeeze(1)\n        smooth_loss = -logprobs.mean(dim=-1)\n        loss = self.confidence * nll_loss + self.smoothing * smooth_loss\n        return loss.mean()\n    \nloss = LSR(0.1)\n```\n\n```python\nclass LSR2(nn.Module):\n\n    def __init__(self, e=0.01,reduction='mean'):\n        super().__init__()\n\n        self.log_softmax = nn.LogSoftmax(dim=1)\n        self.e = e\n        self.reduction = reduction\n\n    def _one_hot(self, labels, classes, value=1):\n        \"\"\"\n            Convert labels to one hot vectors\n\n        Args:\n            labels: torch tensor in format [label1, label2, label3, ...]\n            classes: int, number of classes\n            value: label value in one hot vector, default to 1\n\n        Returns:\n            return one hot format labels in shape [batchsize, classes]\n        \"\"\"\n        #print(\"classes\", classes)\n        one_hot = torch.zeros(labels.size(0), classes)\n\n        # labels and value_added  size must match\n        labels = labels.view(labels.size(0), -1)\n        value_added = torch.Tensor(labels.size(0), 1).fill_(value)\n\n        value_added = value_added.to(labels.device)\n        one_hot = one_hot.to(labels.device)\n\n        one_hot.scatter_add_(1, labels, value_added)\n\n        return one_hot\n\n    def _smooth_label(self, target, length, smooth_factor):\n        \"\"\"convert targets to one-hot format, and smooth\n        them.\n\n        Args:\n            target: target in form with [label1, label2, label_batchsize]\n            length: length of one-hot format(number of classes)\n            smooth_factor: smooth factor for label smooth\n\n        Returns:\n            smoothed labels in one hot format\n        \"\"\"\n        #print(\"length\", length)\n        #print(\"smooth_fact\", smooth_factor)\n        one_hot = self._one_hot(target, length, value=1 - smooth_factor)\n        one_hot += smooth_factor / length\n\n        return one_hot.to(target.device)\n\n    def forward(self, x, target):\n\n        if x.size(0) != target.size(0):\n            raise ValueError('Expected input batchsize ({}) to match target batch_size({})'\n                             .format(x.size(0), target.size(0)))\n\n        if x.dim() < 2:\n            raise ValueError('Expected input tensor to have least 2 dimensions(got {})'\n                             .format(x.size(0)))\n\n        if x.dim() != 2:\n            raise ValueError('Only 2 dimension tensor are implemented, (got {})'\n                             .format(x.size()))\n        #print(\"x: \", x)\n        #print(\"target\", target)\n\n        smoothed_target = self._smooth_label(target, x.size(1), self.e)\n        x = self.log_softmax(x)\n        loss = torch.sum(- x * smoothed_target, dim=1)\n        if self.reduction == 'none':\n            return loss\n\n        elif self.reduction == 'sum':\n            return torch.sum(loss)\n\n        elif self.reduction == 'mean':\n            return torch.mean(loss)\n\n        else:\n            raise ValueError('unrecognized option, expect reduction to be one of none, mean, sum')\n            \nloss = LSR2(0.1)\n```\n\nPretrained ResNet50 is in use\n\n```shell\nlr, num_epochs, batch_size = 0.01, 10, 256\n```\n\n<img src=\"accuracy%20curve%20compare%20label%20smoothing%20with%20hard%20label.png\" alt=\"accuracy curve compare label smoothing with hard label\" style=\"zoom:67%;\" />\n\nIt can bee seen that the under same `random seed`, `batch_size`, `lr`, and `num_epochs`, the overall accuracy has a fascinating rise of 0.5. \n\nThen apply the LSR and run 50 epochs, with learning rate 0.005 and batch size 256, the result turns to be:\n\n<img src=\"accuracy%20curve%20applying%20label%20smoothing.png\" alt=\"accuracy curve applying label smoothing\" style=\"zoom:67%;\" />\n\nIt is a exciting improvement, but more tricks still in need.\n\n### Conclusion\n\n3 disadvantaged of the hard label:\n\n- the relationship between the true label and the others is neglected, tend to be overfitting\n- the model is tend to be over confident i.e. less generalizable\n- more sensitive to label with noise, wrong labeled for example.\n\nSeveral good things about label smoothing:\n\n- data augmentation by add more information, compensates for the lack of supervisory signals \n- Improves generalizability\n- Improves noise robust\n- lower the feature norm\n- Improves model calibration \n\nBad things about label smoothing:\n\n-  label smoothing can't give real relationship between labels. It simply adds random noise, under fitting might happen under certain scenarios.\n- If distill in use, the teach network preforms worse when apply label smoothing, more explanation in  [When does label smoothing help?](https://arxiv.org/pdf/1906.02629.pdf) \n\n### Reference\n\n [标签平滑 - Label Smoothing概述 - 云+社区 - 腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1815786) \n\n [大道至简：算法工程师炼丹Trick手册 (qq.com)](https://mp.weixin.qq.com/s?__biz=Mzg4MzU1NjQ2Mw==&mid=2247495228&idx=1&sn=ec685adcf8a274e8235c177718868a34&scene=21#wechat_redirect) \n\nhttps://cloud.tencent.com/developer/article/1684298?from=article.detail.1815786\n\n [Label Smoothing 标签平滑 (Label smooth regularization, LSR)_hxxjxw的博客-CSDN博客](https://blog.csdn.net/hxxjxw/article/details/115298103) \n\n [When Does Label Smoothing Help?. In late 2015, a team at Google came up… | by Aakash Nain | Medium](https://medium.com/@nainaakash012/when-does-label-smoothing-help-89654ec75326#:~:text=Label smoothing%2C in a nutshell%2C is a way,as a function of activations in penultimate layer) \n\n https://gist.github.com/suvojit-0x55aa/0afb3eefbb26d33f54e1fb9f94d6b609","source":"_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR.md","raw":"---\ntitle: Intro and Pytorch Implementation of Label Smoothing Regularization (LSR)\nauthor: daydreamatnight\ntoc: true\ndeclare: true\ndate: 2022-03-04 13:59:58\ntags:\n\t- deep learning\n\t- deep learning tricks\n\n---\n\n> Recently, I joined a [Kaggle image classification competition](https://www.kaggle.com/c/classify-leaves/), I used the pretrained ResNet50 plus other tricks and here is to record some of them I've learned for now. \n\n> Soft label is a commonly used trick to prevent overfitting. It can always gain some extra points on the image classification tasks. In this article, I have put together useful information from theory to implementation of it.\n\n<!-- more -->\n\n### Introduction: from hard label to soft label\n\nIn deep learning, the neural network is basically a super powerful non-linear regression machine aimed to fit a function between the input and the label. And the result is always called label.\n\nHard label, in another word:  the one-hot vector, is the most commonly type of label that is used. For example, in this [Kaggle image classification competition](https://www.kaggle.com/c/classify-leaves/), to digitalize the different name of the leaves, it is intuitive to encode the leaves categories as: 0, 1, 2, 3. And the factorized target labels would be somehow like [1,3,0...] where each element stands for the categories of the data. With the resulting category dictionary, it can be easily decoded after the training.\n\n<img src=\"leave%20class%20code.png\" alt=\"leave class code\" style=\"zoom:22%;\" />\n\nActually, there is a slightly difference in the binary world. What usually do is, the previously factorized label will be extended to be a 2-dimensional \"on-hot\" matrix where the elements stands for the probability of each class. And the network is aimed to train itself to make inference label nearest to the target label.\n\n<img src=\"hard%20label.png\" alt=\"hard label\" style=\"zoom:22%;\" />\n\nSoft label is just slightly deteriorate the strong one-hot label into a weaker one.\n\n<img src=\"soft%20label.png\" alt=\"soft label\" style=\"zoom:22%;\" />\n\n### Simple explanation: How loss function lost information?\n\nIn the cross entropy loss function, where `y_inference` and `y_grountruth` stands for inference and target label, n stands for the number of class.\n\n<img src=\"Cross%20entropy%20loss%20function.png\" alt=\"Cross entropy loss function\" style=\"zoom:22%;\" />\n\nWith the one-hot label, the components are 0 except for the true category. In a other word, the `y_inference` of the wrong category is not considered at all i.e. the information of the wrong category is lost. Which is against the real word classification. \n\n### Effectiveness: Visualization\n\nIn [When does label smoothing help?](https://arxiv.org/pdf/1906.02629.pdf)  Hinton shows the feature map difference between without and with LSR:\n\n<img src=\"Label%20smoothing%20feature%20norm.png\" alt=\"Label smoothing feature norm\" style=\"zoom:80%;\" />\n\n>- When label smoothing is applied, the clusters are much tighter because label smoothing encourages that each example in the training set is to be equidistant from all other class’s templates.\n>- With hard targets, the clusters for semantically similar classes (for example different breed of dogs in ImageNet), are isotropic whereas, with label smoothing, clusters lie in an arc as shown in the third row. If you mix two semantically similar classes with a third semantically different class, the clusters are still much better than the ones obtained with hard targets as shown in the fourth row.\n\n### Experiment: apply in competition\n\nLabel smoothing can be easily applied in [Tensorflow](https://www.tensorflow.org/api_docs/python/tf/keras/losses/CategoricalCrossentropy), but there is no such thing in PyTorch.  So overwrite the Cross-entropy loss function with LSR (implemented in 2 ways): \n\n```python\nclass LSR(nn.Module):\n    \"\"\"NLL loss with label smoothing.\n    \"\"\"\n    def __init__(self, smoothing=0.0):\n        \"\"\"Constructor for the LSR module.\n        :param smoothing: label smoothing factor\n        \"\"\"\n        super(LSR, self).__init__()\n        self.confidence = 1.0 - smoothing\n        self.smoothing = smoothing\n\n    def forward(self, x, target):\n        logprobs = torch.nn.functional.log_softmax(x, dim=-1)\n        nll_loss = -logprobs.gather(dim=-1, index=target.unsqueeze(1))\n        nll_loss = nll_loss.squeeze(1)\n        smooth_loss = -logprobs.mean(dim=-1)\n        loss = self.confidence * nll_loss + self.smoothing * smooth_loss\n        return loss.mean()\n    \nloss = LSR(0.1)\n```\n\n```python\nclass LSR2(nn.Module):\n\n    def __init__(self, e=0.01,reduction='mean'):\n        super().__init__()\n\n        self.log_softmax = nn.LogSoftmax(dim=1)\n        self.e = e\n        self.reduction = reduction\n\n    def _one_hot(self, labels, classes, value=1):\n        \"\"\"\n            Convert labels to one hot vectors\n\n        Args:\n            labels: torch tensor in format [label1, label2, label3, ...]\n            classes: int, number of classes\n            value: label value in one hot vector, default to 1\n\n        Returns:\n            return one hot format labels in shape [batchsize, classes]\n        \"\"\"\n        #print(\"classes\", classes)\n        one_hot = torch.zeros(labels.size(0), classes)\n\n        # labels and value_added  size must match\n        labels = labels.view(labels.size(0), -1)\n        value_added = torch.Tensor(labels.size(0), 1).fill_(value)\n\n        value_added = value_added.to(labels.device)\n        one_hot = one_hot.to(labels.device)\n\n        one_hot.scatter_add_(1, labels, value_added)\n\n        return one_hot\n\n    def _smooth_label(self, target, length, smooth_factor):\n        \"\"\"convert targets to one-hot format, and smooth\n        them.\n\n        Args:\n            target: target in form with [label1, label2, label_batchsize]\n            length: length of one-hot format(number of classes)\n            smooth_factor: smooth factor for label smooth\n\n        Returns:\n            smoothed labels in one hot format\n        \"\"\"\n        #print(\"length\", length)\n        #print(\"smooth_fact\", smooth_factor)\n        one_hot = self._one_hot(target, length, value=1 - smooth_factor)\n        one_hot += smooth_factor / length\n\n        return one_hot.to(target.device)\n\n    def forward(self, x, target):\n\n        if x.size(0) != target.size(0):\n            raise ValueError('Expected input batchsize ({}) to match target batch_size({})'\n                             .format(x.size(0), target.size(0)))\n\n        if x.dim() < 2:\n            raise ValueError('Expected input tensor to have least 2 dimensions(got {})'\n                             .format(x.size(0)))\n\n        if x.dim() != 2:\n            raise ValueError('Only 2 dimension tensor are implemented, (got {})'\n                             .format(x.size()))\n        #print(\"x: \", x)\n        #print(\"target\", target)\n\n        smoothed_target = self._smooth_label(target, x.size(1), self.e)\n        x = self.log_softmax(x)\n        loss = torch.sum(- x * smoothed_target, dim=1)\n        if self.reduction == 'none':\n            return loss\n\n        elif self.reduction == 'sum':\n            return torch.sum(loss)\n\n        elif self.reduction == 'mean':\n            return torch.mean(loss)\n\n        else:\n            raise ValueError('unrecognized option, expect reduction to be one of none, mean, sum')\n            \nloss = LSR2(0.1)\n```\n\nPretrained ResNet50 is in use\n\n```shell\nlr, num_epochs, batch_size = 0.01, 10, 256\n```\n\n<img src=\"accuracy%20curve%20compare%20label%20smoothing%20with%20hard%20label.png\" alt=\"accuracy curve compare label smoothing with hard label\" style=\"zoom:67%;\" />\n\nIt can bee seen that the under same `random seed`, `batch_size`, `lr`, and `num_epochs`, the overall accuracy has a fascinating rise of 0.5. \n\nThen apply the LSR and run 50 epochs, with learning rate 0.005 and batch size 256, the result turns to be:\n\n<img src=\"accuracy%20curve%20applying%20label%20smoothing.png\" alt=\"accuracy curve applying label smoothing\" style=\"zoom:67%;\" />\n\nIt is a exciting improvement, but more tricks still in need.\n\n### Conclusion\n\n3 disadvantaged of the hard label:\n\n- the relationship between the true label and the others is neglected, tend to be overfitting\n- the model is tend to be over confident i.e. less generalizable\n- more sensitive to label with noise, wrong labeled for example.\n\nSeveral good things about label smoothing:\n\n- data augmentation by add more information, compensates for the lack of supervisory signals \n- Improves generalizability\n- Improves noise robust\n- lower the feature norm\n- Improves model calibration \n\nBad things about label smoothing:\n\n-  label smoothing can't give real relationship between labels. It simply adds random noise, under fitting might happen under certain scenarios.\n- If distill in use, the teach network preforms worse when apply label smoothing, more explanation in  [When does label smoothing help?](https://arxiv.org/pdf/1906.02629.pdf) \n\n### Reference\n\n [标签平滑 - Label Smoothing概述 - 云+社区 - 腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1815786) \n\n [大道至简：算法工程师炼丹Trick手册 (qq.com)](https://mp.weixin.qq.com/s?__biz=Mzg4MzU1NjQ2Mw==&mid=2247495228&idx=1&sn=ec685adcf8a274e8235c177718868a34&scene=21#wechat_redirect) \n\nhttps://cloud.tencent.com/developer/article/1684298?from=article.detail.1815786\n\n [Label Smoothing 标签平滑 (Label smooth regularization, LSR)_hxxjxw的博客-CSDN博客](https://blog.csdn.net/hxxjxw/article/details/115298103) \n\n [When Does Label Smoothing Help?. In late 2015, a team at Google came up… | by Aakash Nain | Medium](https://medium.com/@nainaakash012/when-does-label-smoothing-help-89654ec75326#:~:text=Label smoothing%2C in a nutshell%2C is a way,as a function of activations in penultimate layer) \n\n https://gist.github.com/suvojit-0x55aa/0afb3eefbb26d33f54e1fb9f94d6b609","slug":"Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR","published":1,"updated":"2022-03-04T10:06:47.614Z","_id":"cl0c8tinx000074uj51lfhrjm","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>Recently, I joined a <a href=\"https://www.kaggle.com/c/classify-leaves/\">Kaggle image classification competition</a>, I used the pretrained ResNet50 plus other tricks and here is to record some of them I’ve learned for now. </p>\n</blockquote>\n<blockquote>\n<p>Soft label is a commonly used trick to prevent overfitting. It can always gain some extra points on the image classification tasks. In this article, I have put together useful information from theory to implementation of it.</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h3 id=\"Introduction-from-hard-label-to-soft-label\"><a href=\"#Introduction-from-hard-label-to-soft-label\" class=\"headerlink\" title=\"Introduction: from hard label to soft label\"></a>Introduction: from hard label to soft label</h3><p>In deep learning, the neural network is basically a super powerful non-linear regression machine aimed to fit a function between the input and the label. And the result is always called label.</p>\n<p>Hard label, in another word:  the one-hot vector, is the most commonly type of label that is used. For example, in this <a href=\"https://www.kaggle.com/c/classify-leaves/\">Kaggle image classification competition</a>, to digitalize the different name of the leaves, it is intuitive to encode the leaves categories as: 0, 1, 2, 3. And the factorized target labels would be somehow like [1,3,0…] where each element stands for the categories of the data. With the resulting category dictionary, it can be easily decoded after the training.</p>\n<img src=\"leave%20class%20code.png\" alt=\"leave class code\" style=\"zoom:22%;\" />\n\n<p>Actually, there is a slightly difference in the binary world. What usually do is, the previously factorized label will be extended to be a 2-dimensional “on-hot” matrix where the elements stands for the probability of each class. And the network is aimed to train itself to make inference label nearest to the target label.</p>\n<img src=\"hard%20label.png\" alt=\"hard label\" style=\"zoom:22%;\" />\n\n<p>Soft label is just slightly deteriorate the strong one-hot label into a weaker one.</p>\n<img src=\"soft%20label.png\" alt=\"soft label\" style=\"zoom:22%;\" />\n\n<h3 id=\"Simple-explanation-How-loss-function-lost-information\"><a href=\"#Simple-explanation-How-loss-function-lost-information\" class=\"headerlink\" title=\"Simple explanation: How loss function lost information?\"></a>Simple explanation: How loss function lost information?</h3><p>In the cross entropy loss function, where <code>y_inference</code> and <code>y_grountruth</code> stands for inference and target label, n stands for the number of class.</p>\n<img src=\"Cross%20entropy%20loss%20function.png\" alt=\"Cross entropy loss function\" style=\"zoom:22%;\" />\n\n<p>With the one-hot label, the components are 0 except for the true category. In a other word, the <code>y_inference</code> of the wrong category is not considered at all i.e. the information of the wrong category is lost. Which is against the real word classification. </p>\n<h3 id=\"Effectiveness-Visualization\"><a href=\"#Effectiveness-Visualization\" class=\"headerlink\" title=\"Effectiveness: Visualization\"></a>Effectiveness: Visualization</h3><p>In <a href=\"https://arxiv.org/pdf/1906.02629.pdf\">When does label smoothing help?</a>  Hinton shows the feature map difference between without and with LSR:</p>\n<img src=\"Label%20smoothing%20feature%20norm.png\" alt=\"Label smoothing feature norm\" style=\"zoom:80%;\" />\n\n<blockquote>\n<ul>\n<li>When label smoothing is applied, the clusters are much tighter because label smoothing encourages that each example in the training set is to be equidistant from all other class’s templates.</li>\n<li>With hard targets, the clusters for semantically similar classes (for example different breed of dogs in ImageNet), are isotropic whereas, with label smoothing, clusters lie in an arc as shown in the third row. If you mix two semantically similar classes with a third semantically different class, the clusters are still much better than the ones obtained with hard targets as shown in the fourth row.</li>\n</ul>\n</blockquote>\n<h3 id=\"Experiment-apply-in-competition\"><a href=\"#Experiment-apply-in-competition\" class=\"headerlink\" title=\"Experiment: apply in competition\"></a>Experiment: apply in competition</h3><p>Label smoothing can be easily applied in <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/losses/CategoricalCrossentropy\">Tensorflow</a>, but there is no such thing in PyTorch.  So overwrite the Cross-entropy loss function with LSR (implemented in 2 ways): </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LSR</span>(nn.Module):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;NLL loss with label smoothing.</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, smoothing=<span class=\"number\">0.0</span></span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;Constructor for the LSR module.</span></span><br><span class=\"line\"><span class=\"string\">        :param smoothing: label smoothing factor</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>(LSR, self).__init__()</span><br><span class=\"line\">        self.confidence = <span class=\"number\">1.0</span> - smoothing</span><br><span class=\"line\">        self.smoothing = smoothing</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">forward</span>(<span class=\"params\">self, x, target</span>):</span><br><span class=\"line\">        logprobs = torch.nn.functional.log_softmax(x, dim=-<span class=\"number\">1</span>)</span><br><span class=\"line\">        nll_loss = -logprobs.gather(dim=-<span class=\"number\">1</span>, index=target.unsqueeze(<span class=\"number\">1</span>))</span><br><span class=\"line\">        nll_loss = nll_loss.squeeze(<span class=\"number\">1</span>)</span><br><span class=\"line\">        smooth_loss = -logprobs.mean(dim=-<span class=\"number\">1</span>)</span><br><span class=\"line\">        loss = self.confidence * nll_loss + self.smoothing * smooth_loss</span><br><span class=\"line\">        <span class=\"keyword\">return</span> loss.mean()</span><br><span class=\"line\">    </span><br><span class=\"line\">loss = LSR(<span class=\"number\">0.1</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LSR2</span>(nn.Module):</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, e=<span class=\"number\">0.01</span>,reduction=<span class=\"string\">&#x27;mean&#x27;</span></span>):</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.log_softmax = nn.LogSoftmax(dim=<span class=\"number\">1</span>)</span><br><span class=\"line\">        self.e = e</span><br><span class=\"line\">        self.reduction = reduction</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_one_hot</span>(<span class=\"params\">self, labels, classes, value=<span class=\"number\">1</span></span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">            Convert labels to one hot vectors</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Args:</span></span><br><span class=\"line\"><span class=\"string\">            labels: torch tensor in format [label1, label2, label3, ...]</span></span><br><span class=\"line\"><span class=\"string\">            classes: int, number of classes</span></span><br><span class=\"line\"><span class=\"string\">            value: label value in one hot vector, default to 1</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Returns:</span></span><br><span class=\"line\"><span class=\"string\">            return one hot format labels in shape [batchsize, classes]</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;classes&quot;, classes)</span></span><br><span class=\"line\">        one_hot = torch.zeros(labels.size(<span class=\"number\">0</span>), classes)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># labels and value_added  size must match</span></span><br><span class=\"line\">        labels = labels.view(labels.size(<span class=\"number\">0</span>), -<span class=\"number\">1</span>)</span><br><span class=\"line\">        value_added = torch.Tensor(labels.size(<span class=\"number\">0</span>), <span class=\"number\">1</span>).fill_(value)</span><br><span class=\"line\"></span><br><span class=\"line\">        value_added = value_added.to(labels.device)</span><br><span class=\"line\">        one_hot = one_hot.to(labels.device)</span><br><span class=\"line\"></span><br><span class=\"line\">        one_hot.scatter_add_(<span class=\"number\">1</span>, labels, value_added)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> one_hot</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_smooth_label</span>(<span class=\"params\">self, target, length, smooth_factor</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;convert targets to one-hot format, and smooth</span></span><br><span class=\"line\"><span class=\"string\">        them.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Args:</span></span><br><span class=\"line\"><span class=\"string\">            target: target in form with [label1, label2, label_batchsize]</span></span><br><span class=\"line\"><span class=\"string\">            length: length of one-hot format(number of classes)</span></span><br><span class=\"line\"><span class=\"string\">            smooth_factor: smooth factor for label smooth</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Returns:</span></span><br><span class=\"line\"><span class=\"string\">            smoothed labels in one hot format</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;length&quot;, length)</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;smooth_fact&quot;, smooth_factor)</span></span><br><span class=\"line\">        one_hot = self._one_hot(target, length, value=<span class=\"number\">1</span> - smooth_factor)</span><br><span class=\"line\">        one_hot += smooth_factor / length</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> one_hot.to(target.device)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">forward</span>(<span class=\"params\">self, x, target</span>):</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> x.size(<span class=\"number\">0</span>) != target.size(<span class=\"number\">0</span>):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;Expected input batchsize (&#123;&#125;) to match target batch_size(&#123;&#125;)&#x27;</span></span><br><span class=\"line\">                             .<span class=\"built_in\">format</span>(x.size(<span class=\"number\">0</span>), target.size(<span class=\"number\">0</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> x.dim() &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;Expected input tensor to have least 2 dimensions(got &#123;&#125;)&#x27;</span></span><br><span class=\"line\">                             .<span class=\"built_in\">format</span>(x.size(<span class=\"number\">0</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> x.dim() != <span class=\"number\">2</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;Only 2 dimension tensor are implemented, (got &#123;&#125;)&#x27;</span></span><br><span class=\"line\">                             .<span class=\"built_in\">format</span>(x.size()))</span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;x: &quot;, x)</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;target&quot;, target)</span></span><br><span class=\"line\"></span><br><span class=\"line\">        smoothed_target = self._smooth_label(target, x.size(<span class=\"number\">1</span>), self.e)</span><br><span class=\"line\">        x = self.log_softmax(x)</span><br><span class=\"line\">        loss = torch.<span class=\"built_in\">sum</span>(- x * smoothed_target, dim=<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.reduction == <span class=\"string\">&#x27;none&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> loss</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> self.reduction == <span class=\"string\">&#x27;sum&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> torch.<span class=\"built_in\">sum</span>(loss)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> self.reduction == <span class=\"string\">&#x27;mean&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> torch.mean(loss)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;unrecognized option, expect reduction to be one of none, mean, sum&#x27;</span>)</span><br><span class=\"line\">            </span><br><span class=\"line\">loss = LSR2(<span class=\"number\">0.1</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Pretrained ResNet50 is in use</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lr, num_epochs, batch_size = 0.01, 10, 256</span><br></pre></td></tr></table></figure>\n\n<img src=\"accuracy%20curve%20compare%20label%20smoothing%20with%20hard%20label.png\" alt=\"accuracy curve compare label smoothing with hard label\" style=\"zoom:67%;\" />\n\n<p>It can bee seen that the under same <code>random seed</code>, <code>batch_size</code>, <code>lr</code>, and <code>num_epochs</code>, the overall accuracy has a fascinating rise of 0.5. </p>\n<p>Then apply the LSR and run 50 epochs, with learning rate 0.005 and batch size 256, the result turns to be:</p>\n<img src=\"accuracy%20curve%20applying%20label%20smoothing.png\" alt=\"accuracy curve applying label smoothing\" style=\"zoom:67%;\" />\n\n<p>It is a exciting improvement, but more tricks still in need.</p>\n<h3 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h3><p>3 disadvantaged of the hard label:</p>\n<ul>\n<li>the relationship between the true label and the others is neglected, tend to be overfitting</li>\n<li>the model is tend to be over confident i.e. less generalizable</li>\n<li>more sensitive to label with noise, wrong labeled for example.</li>\n</ul>\n<p>Several good things about label smoothing:</p>\n<ul>\n<li>data augmentation by add more information, compensates for the lack of supervisory signals </li>\n<li>Improves generalizability</li>\n<li>Improves noise robust</li>\n<li>lower the feature norm</li>\n<li>Improves model calibration</li>\n</ul>\n<p>Bad things about label smoothing:</p>\n<ul>\n<li>label smoothing can’t give real relationship between labels. It simply adds random noise, under fitting might happen under certain scenarios.</li>\n<li>If distill in use, the teach network preforms worse when apply label smoothing, more explanation in  <a href=\"https://arxiv.org/pdf/1906.02629.pdf\">When does label smoothing help?</a></li>\n</ul>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p> <a href=\"https://cloud.tencent.com/developer/article/1815786\">标签平滑 - Label Smoothing概述 - 云+社区 - 腾讯云 (tencent.com)</a> </p>\n<p> <a href=\"https://mp.weixin.qq.com/s?__biz=Mzg4MzU1NjQ2Mw==&mid=2247495228&idx=1&sn=ec685adcf8a274e8235c177718868a34&scene=21#wechat_redirect\">大道至简：算法工程师炼丹Trick手册 (qq.com)</a> </p>\n<p><a href=\"https://cloud.tencent.com/developer/article/1684298?from=article.detail.1815786\">https://cloud.tencent.com/developer/article/1684298?from=article.detail.1815786</a></p>\n<p> <a href=\"https://blog.csdn.net/hxxjxw/article/details/115298103\">Label Smoothing 标签平滑 (Label smooth regularization, LSR)_hxxjxw的博客-CSDN博客</a> </p>\n<p> [When Does Label Smoothing Help?. In late 2015, a team at Google came up… | by Aakash Nain | Medium](<a href=\"https://medium.com/@nainaakash012/when-does-label-smoothing-help-89654ec75326#:~:text=Label\">https://medium.com/@nainaakash012/when-does-label-smoothing-help-89654ec75326#:~:text=Label</a> smoothing%2C in a nutshell%2C is a way,as a function of activations in penultimate layer) </p>\n<p> <a href=\"https://gist.github.com/suvojit-0x55aa/0afb3eefbb26d33f54e1fb9f94d6b609\">https://gist.github.com/suvojit-0x55aa/0afb3eefbb26d33f54e1fb9f94d6b609</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>Recently, I joined a <a href=\"https://www.kaggle.com/c/classify-leaves/\">Kaggle image classification competition</a>, I used the pretrained ResNet50 plus other tricks and here is to record some of them I’ve learned for now. </p>\n</blockquote>\n<blockquote>\n<p>Soft label is a commonly used trick to prevent overfitting. It can always gain some extra points on the image classification tasks. In this article, I have put together useful information from theory to implementation of it.</p>\n</blockquote>","more":"<h3 id=\"Introduction-from-hard-label-to-soft-label\"><a href=\"#Introduction-from-hard-label-to-soft-label\" class=\"headerlink\" title=\"Introduction: from hard label to soft label\"></a>Introduction: from hard label to soft label</h3><p>In deep learning, the neural network is basically a super powerful non-linear regression machine aimed to fit a function between the input and the label. And the result is always called label.</p>\n<p>Hard label, in another word:  the one-hot vector, is the most commonly type of label that is used. For example, in this <a href=\"https://www.kaggle.com/c/classify-leaves/\">Kaggle image classification competition</a>, to digitalize the different name of the leaves, it is intuitive to encode the leaves categories as: 0, 1, 2, 3. And the factorized target labels would be somehow like [1,3,0…] where each element stands for the categories of the data. With the resulting category dictionary, it can be easily decoded after the training.</p>\n<img src=\"leave%20class%20code.png\" alt=\"leave class code\" style=\"zoom:22%;\" />\n\n<p>Actually, there is a slightly difference in the binary world. What usually do is, the previously factorized label will be extended to be a 2-dimensional “on-hot” matrix where the elements stands for the probability of each class. And the network is aimed to train itself to make inference label nearest to the target label.</p>\n<img src=\"hard%20label.png\" alt=\"hard label\" style=\"zoom:22%;\" />\n\n<p>Soft label is just slightly deteriorate the strong one-hot label into a weaker one.</p>\n<img src=\"soft%20label.png\" alt=\"soft label\" style=\"zoom:22%;\" />\n\n<h3 id=\"Simple-explanation-How-loss-function-lost-information\"><a href=\"#Simple-explanation-How-loss-function-lost-information\" class=\"headerlink\" title=\"Simple explanation: How loss function lost information?\"></a>Simple explanation: How loss function lost information?</h3><p>In the cross entropy loss function, where <code>y_inference</code> and <code>y_grountruth</code> stands for inference and target label, n stands for the number of class.</p>\n<img src=\"Cross%20entropy%20loss%20function.png\" alt=\"Cross entropy loss function\" style=\"zoom:22%;\" />\n\n<p>With the one-hot label, the components are 0 except for the true category. In a other word, the <code>y_inference</code> of the wrong category is not considered at all i.e. the information of the wrong category is lost. Which is against the real word classification. </p>\n<h3 id=\"Effectiveness-Visualization\"><a href=\"#Effectiveness-Visualization\" class=\"headerlink\" title=\"Effectiveness: Visualization\"></a>Effectiveness: Visualization</h3><p>In <a href=\"https://arxiv.org/pdf/1906.02629.pdf\">When does label smoothing help?</a>  Hinton shows the feature map difference between without and with LSR:</p>\n<img src=\"Label%20smoothing%20feature%20norm.png\" alt=\"Label smoothing feature norm\" style=\"zoom:80%;\" />\n\n<blockquote>\n<ul>\n<li>When label smoothing is applied, the clusters are much tighter because label smoothing encourages that each example in the training set is to be equidistant from all other class’s templates.</li>\n<li>With hard targets, the clusters for semantically similar classes (for example different breed of dogs in ImageNet), are isotropic whereas, with label smoothing, clusters lie in an arc as shown in the third row. If you mix two semantically similar classes with a third semantically different class, the clusters are still much better than the ones obtained with hard targets as shown in the fourth row.</li>\n</ul>\n</blockquote>\n<h3 id=\"Experiment-apply-in-competition\"><a href=\"#Experiment-apply-in-competition\" class=\"headerlink\" title=\"Experiment: apply in competition\"></a>Experiment: apply in competition</h3><p>Label smoothing can be easily applied in <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/losses/CategoricalCrossentropy\">Tensorflow</a>, but there is no such thing in PyTorch.  So overwrite the Cross-entropy loss function with LSR (implemented in 2 ways): </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LSR</span>(nn.Module):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;NLL loss with label smoothing.</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, smoothing=<span class=\"number\">0.0</span></span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;Constructor for the LSR module.</span></span><br><span class=\"line\"><span class=\"string\">        :param smoothing: label smoothing factor</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>(LSR, self).__init__()</span><br><span class=\"line\">        self.confidence = <span class=\"number\">1.0</span> - smoothing</span><br><span class=\"line\">        self.smoothing = smoothing</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">forward</span>(<span class=\"params\">self, x, target</span>):</span><br><span class=\"line\">        logprobs = torch.nn.functional.log_softmax(x, dim=-<span class=\"number\">1</span>)</span><br><span class=\"line\">        nll_loss = -logprobs.gather(dim=-<span class=\"number\">1</span>, index=target.unsqueeze(<span class=\"number\">1</span>))</span><br><span class=\"line\">        nll_loss = nll_loss.squeeze(<span class=\"number\">1</span>)</span><br><span class=\"line\">        smooth_loss = -logprobs.mean(dim=-<span class=\"number\">1</span>)</span><br><span class=\"line\">        loss = self.confidence * nll_loss + self.smoothing * smooth_loss</span><br><span class=\"line\">        <span class=\"keyword\">return</span> loss.mean()</span><br><span class=\"line\">    </span><br><span class=\"line\">loss = LSR(<span class=\"number\">0.1</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LSR2</span>(nn.Module):</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, e=<span class=\"number\">0.01</span>,reduction=<span class=\"string\">&#x27;mean&#x27;</span></span>):</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.log_softmax = nn.LogSoftmax(dim=<span class=\"number\">1</span>)</span><br><span class=\"line\">        self.e = e</span><br><span class=\"line\">        self.reduction = reduction</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_one_hot</span>(<span class=\"params\">self, labels, classes, value=<span class=\"number\">1</span></span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">            Convert labels to one hot vectors</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Args:</span></span><br><span class=\"line\"><span class=\"string\">            labels: torch tensor in format [label1, label2, label3, ...]</span></span><br><span class=\"line\"><span class=\"string\">            classes: int, number of classes</span></span><br><span class=\"line\"><span class=\"string\">            value: label value in one hot vector, default to 1</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Returns:</span></span><br><span class=\"line\"><span class=\"string\">            return one hot format labels in shape [batchsize, classes]</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;classes&quot;, classes)</span></span><br><span class=\"line\">        one_hot = torch.zeros(labels.size(<span class=\"number\">0</span>), classes)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># labels and value_added  size must match</span></span><br><span class=\"line\">        labels = labels.view(labels.size(<span class=\"number\">0</span>), -<span class=\"number\">1</span>)</span><br><span class=\"line\">        value_added = torch.Tensor(labels.size(<span class=\"number\">0</span>), <span class=\"number\">1</span>).fill_(value)</span><br><span class=\"line\"></span><br><span class=\"line\">        value_added = value_added.to(labels.device)</span><br><span class=\"line\">        one_hot = one_hot.to(labels.device)</span><br><span class=\"line\"></span><br><span class=\"line\">        one_hot.scatter_add_(<span class=\"number\">1</span>, labels, value_added)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> one_hot</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_smooth_label</span>(<span class=\"params\">self, target, length, smooth_factor</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;convert targets to one-hot format, and smooth</span></span><br><span class=\"line\"><span class=\"string\">        them.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Args:</span></span><br><span class=\"line\"><span class=\"string\">            target: target in form with [label1, label2, label_batchsize]</span></span><br><span class=\"line\"><span class=\"string\">            length: length of one-hot format(number of classes)</span></span><br><span class=\"line\"><span class=\"string\">            smooth_factor: smooth factor for label smooth</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Returns:</span></span><br><span class=\"line\"><span class=\"string\">            smoothed labels in one hot format</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;length&quot;, length)</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;smooth_fact&quot;, smooth_factor)</span></span><br><span class=\"line\">        one_hot = self._one_hot(target, length, value=<span class=\"number\">1</span> - smooth_factor)</span><br><span class=\"line\">        one_hot += smooth_factor / length</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> one_hot.to(target.device)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">forward</span>(<span class=\"params\">self, x, target</span>):</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> x.size(<span class=\"number\">0</span>) != target.size(<span class=\"number\">0</span>):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;Expected input batchsize (&#123;&#125;) to match target batch_size(&#123;&#125;)&#x27;</span></span><br><span class=\"line\">                             .<span class=\"built_in\">format</span>(x.size(<span class=\"number\">0</span>), target.size(<span class=\"number\">0</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> x.dim() &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;Expected input tensor to have least 2 dimensions(got &#123;&#125;)&#x27;</span></span><br><span class=\"line\">                             .<span class=\"built_in\">format</span>(x.size(<span class=\"number\">0</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> x.dim() != <span class=\"number\">2</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;Only 2 dimension tensor are implemented, (got &#123;&#125;)&#x27;</span></span><br><span class=\"line\">                             .<span class=\"built_in\">format</span>(x.size()))</span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;x: &quot;, x)</span></span><br><span class=\"line\">        <span class=\"comment\">#print(&quot;target&quot;, target)</span></span><br><span class=\"line\"></span><br><span class=\"line\">        smoothed_target = self._smooth_label(target, x.size(<span class=\"number\">1</span>), self.e)</span><br><span class=\"line\">        x = self.log_softmax(x)</span><br><span class=\"line\">        loss = torch.<span class=\"built_in\">sum</span>(- x * smoothed_target, dim=<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.reduction == <span class=\"string\">&#x27;none&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> loss</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> self.reduction == <span class=\"string\">&#x27;sum&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> torch.<span class=\"built_in\">sum</span>(loss)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> self.reduction == <span class=\"string\">&#x27;mean&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> torch.mean(loss)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">&#x27;unrecognized option, expect reduction to be one of none, mean, sum&#x27;</span>)</span><br><span class=\"line\">            </span><br><span class=\"line\">loss = LSR2(<span class=\"number\">0.1</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Pretrained ResNet50 is in use</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lr, num_epochs, batch_size = 0.01, 10, 256</span><br></pre></td></tr></table></figure>\n\n<img src=\"accuracy%20curve%20compare%20label%20smoothing%20with%20hard%20label.png\" alt=\"accuracy curve compare label smoothing with hard label\" style=\"zoom:67%;\" />\n\n<p>It can bee seen that the under same <code>random seed</code>, <code>batch_size</code>, <code>lr</code>, and <code>num_epochs</code>, the overall accuracy has a fascinating rise of 0.5. </p>\n<p>Then apply the LSR and run 50 epochs, with learning rate 0.005 and batch size 256, the result turns to be:</p>\n<img src=\"accuracy%20curve%20applying%20label%20smoothing.png\" alt=\"accuracy curve applying label smoothing\" style=\"zoom:67%;\" />\n\n<p>It is a exciting improvement, but more tricks still in need.</p>\n<h3 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h3><p>3 disadvantaged of the hard label:</p>\n<ul>\n<li>the relationship between the true label and the others is neglected, tend to be overfitting</li>\n<li>the model is tend to be over confident i.e. less generalizable</li>\n<li>more sensitive to label with noise, wrong labeled for example.</li>\n</ul>\n<p>Several good things about label smoothing:</p>\n<ul>\n<li>data augmentation by add more information, compensates for the lack of supervisory signals </li>\n<li>Improves generalizability</li>\n<li>Improves noise robust</li>\n<li>lower the feature norm</li>\n<li>Improves model calibration</li>\n</ul>\n<p>Bad things about label smoothing:</p>\n<ul>\n<li>label smoothing can’t give real relationship between labels. It simply adds random noise, under fitting might happen under certain scenarios.</li>\n<li>If distill in use, the teach network preforms worse when apply label smoothing, more explanation in  <a href=\"https://arxiv.org/pdf/1906.02629.pdf\">When does label smoothing help?</a></li>\n</ul>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p> <a href=\"https://cloud.tencent.com/developer/article/1815786\">标签平滑 - Label Smoothing概述 - 云+社区 - 腾讯云 (tencent.com)</a> </p>\n<p> <a href=\"https://mp.weixin.qq.com/s?__biz=Mzg4MzU1NjQ2Mw==&mid=2247495228&idx=1&sn=ec685adcf8a274e8235c177718868a34&scene=21#wechat_redirect\">大道至简：算法工程师炼丹Trick手册 (qq.com)</a> </p>\n<p><a href=\"https://cloud.tencent.com/developer/article/1684298?from=article.detail.1815786\">https://cloud.tencent.com/developer/article/1684298?from=article.detail.1815786</a></p>\n<p> <a href=\"https://blog.csdn.net/hxxjxw/article/details/115298103\">Label Smoothing 标签平滑 (Label smooth regularization, LSR)_hxxjxw的博客-CSDN博客</a> </p>\n<p> [When Does Label Smoothing Help?. In late 2015, a team at Google came up… | by Aakash Nain | Medium](<a href=\"https://medium.com/@nainaakash012/when-does-label-smoothing-help-89654ec75326#:~:text=Label\">https://medium.com/@nainaakash012/when-does-label-smoothing-help-89654ec75326#:~:text=Label</a> smoothing%2C in a nutshell%2C is a way,as a function of activations in penultimate layer) </p>\n<p> <a href=\"https://gist.github.com/suvojit-0x55aa/0afb3eefbb26d33f54e1fb9f94d6b609\">https://gist.github.com/suvojit-0x55aa/0afb3eefbb26d33f54e1fb9f94d6b609</a></p>"}],"PostAsset":[{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/check google search.png","slug":"check google search.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/github page.png","slug":"github page.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/google console.png","slug":"google console.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/node js install.png","slug":"node js install.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/typora setting.png","slug":"typora setting.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/google console varification.png","slug":"google console varification.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/can't fetch sitemap.png","slug":"can't fetch sitemap.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console.png","slug":"baidu console.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console varification.png","slug":"baidu console varification.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/baidu console sitemap.png","slug":"baidu console sitemap.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect 2.png","slug":"Google sitemap inspect 2.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect 3.png","slug":"Google sitemap inspect 3.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/Google sitemap inspect.png","slug":"Google sitemap inspect.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/being sitemap connect google.png","slug":"being sitemap connect google.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/bing search console success.png","slug":"bing search console success.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Build-and-configure-a-personal-blog-via-hexo-and-yilia/bing sitemap.png","slug":"bing sitemap.png","post":"ckzzbfat10001miyb9ll22vr2","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/accuracy curve applying label smoothing.png","slug":"accuracy curve applying label smoothing.png","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/accuracy curve compare label smoothing with hard label.png","slug":"accuracy curve compare label smoothing with hard label.png","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/Cross entropy loss function.png","slug":"Cross entropy loss function.png","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/hard label.png","slug":"hard label.png","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/Label smoothing feature norm.png","slug":"Label smoothing feature norm.png","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/leave class code.png","slug":"leave class code.png","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/soft label.png","slug":"soft label.png","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/source ppt.pptx","slug":"source ppt.pptx","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0},{"_id":"source/_posts/Intro-and-Pytorch-Implementation-of-Label-Smoothing-Regularization-LSR/~$source ppt.pptx","slug":"~$source ppt.pptx","post":"cl0c8tinx000074uj51lfhrjm","modified":0,"renderable":0}],"PostCategory":[],"PostTag":[{"post_id":"ckzzbfasz0000miybbz5ldmby","tag_id":"ckzzbfat20002miyb3fpx9bvg","_id":"ckzzbfat30004miybf0h9hdm4"},{"post_id":"ckzzbfat10001miyb9ll22vr2","tag_id":"ckzzbfat30003miyb5nsy6g25","_id":"ckzzrgzoo0001s3ybe4xnd62a"},{"post_id":"ckzzbfat10001miyb9ll22vr2","tag_id":"ckzzrgzom0000s3yb8ov53adi","_id":"ckzzrgzoo0002s3yb8sskbe9n"},{"post_id":"ckzzbfat10001miyb9ll22vr2","tag_id":"cl00l56hz0000azybdpxi93xn","_id":"cl00l56i00001azyb1k35czvu"},{"post_id":"cl06vdjd800001byb26ss3hrc","tag_id":"cl06vdjd900011byban791sz0","_id":"cl06vdjda00041byb9vdweblp"},{"post_id":"cl06vdjd800001byb26ss3hrc","tag_id":"cl06vdjda00021bybd1a53k0i","_id":"cl06vdjda00051byb1gmp4fhy"},{"post_id":"cl06vdjd800001byb26ss3hrc","tag_id":"cl06vdjda00031bybfbvt5p2i","_id":"cl06vdjda00061bybhw3mad8k"},{"post_id":"cl0c8tinx000074uj51lfhrjm","tag_id":"cl06vdjda00021bybd1a53k0i","_id":"cl0c8tiox000274ujhuha1e1t"},{"post_id":"cl0c8tinx000074uj51lfhrjm","tag_id":"cl0c8tiou000174ujb4u590ri","_id":"cl0c8tiox000374uj6pzvh8i7"}],"Tag":[{"name":"First Blog","_id":"ckzzbfat20002miyb3fpx9bvg"},{"name":"learn","_id":"ckzzbfat30003miyb5nsy6g25"},{"name":"learn hexo","_id":"ckzzrdgzj0000r0yb1o0je13u"},{"name":"--learn --hexo","_id":"ckzzrdz2k0000rdyb09g8gy8w"},{"name":"-- learn -- hexo","_id":"ckzzremfb0000rsyb4r8xf6bc"},{"name":"hexo","_id":"ckzzrgzom0000s3yb8ov53adi"},{"name":"git","_id":"cl00l56hz0000azybdpxi93xn"},{"name":"m1 mac","_id":"cl06vdjd900011byban791sz0"},{"name":"deep learning","_id":"cl06vdjda00021bybd1a53k0i"},{"name":"d2l","_id":"cl06vdjda00031bybfbvt5p2i"},{"name":"deep learning tricks","_id":"cl0c8tiou000174ujb4u590ri"}]}}